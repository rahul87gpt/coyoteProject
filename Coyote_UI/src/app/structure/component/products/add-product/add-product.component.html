<div class="mainContent-innner pills-tab-form">
  <form [formGroup]="productForm">
    <!-- <div class="pro-sidemenu">
            <div class="card-grey p-0">
            	<ul class="ps-list list-none ">
            		<li class="active"><a href="javascript:void(0);">Details</a></li>
            		<li><a href="javascript:void(0);">Zone Pricing</a></li>
            		<li><a href="javascript:void(0);">Promostions</a></li>
            		<li><a href="javascript:void(0);">Suppliers Products</a></li>
            		<li><a href="javascript:void(0);">Transaction History</a></li>
            		<li><a href="javascript:void(0);">Purchase History</a></li>
            		<li><a href="javascript:void(0);">Weekly Sales history</a></li>
            		<li><a href="javascript:void(0);">Recipes</a></li>
            		<li><a href="javascript:void(0);">Changes Log</a></li>
            		<li><a href="javascript:void(0);">Stock Movement</a></li>
            		<li><a href="javascript:void(0);">Child Products</a></li>
            	</ul>
            </div>
            </div> -->
    <div class="">
      <div class="d-flex align-items-center">
        <h4 class="title flex-grow-1 mb-0 pl-12">Product</h4>
        <div class="probtn-wrap text-right">
          <!-- <div class="form-group probtn-wrap-select mr-2 mb-0">
                        <div class="dropdown select-dropdown">
                            <button class="btn btn-block select-btn" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Select</button>
                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                <a class="dropdown-item" href="javascript:void(0);">Details</a>
                                <a class="dropdown-item" href="javascript:void(0);">Zone Pricing</a>
                                <a class="dropdown-item" href="javascript:void(0);">Promostions</a>
                                <a class="dropdown-item" href="javascript:void(0);">Suppliers Products</a>
                                <a class="dropdown-item" href="javascript:void(0);">Transaction History</a>
                                <a class="dropdown-item" href="javascript:void(0);">Purchase History</a>
                                <a class="dropdown-item" href="javascript:void(0);">Weekly Sales History</a>
                                <a class="dropdown-item" href="javascript:void(0);">Recipes</a>
                                <a class="dropdown-item" href="javascript:void(0);">Changes Log</a>
                                <a class="dropdown-item" href="javascript:void(0);">Stock Movement</a>
                                <a class="dropdown-item" href="javascript:void(0);">Child Products</a>
                            </div>
                        </div> 
                    </div> -->
          <button class="btn btn-blue mr-2" (click)="onSubmit()">
            <i class="icon fa fa-plus-circle"></i> {{ buttonText }}
          </button>
          <button
            class="btn"
            (click)="undoOrCancelOutletProduct('submitCancel')"
          >
            Cancel
          </button>
        </div>
      </div>
      <div class="bg-box mt-2 custom-ng-select">
        <div class="apn-navTab">
          <ul
            class="nav nav-pills mb-2 justify-content-between"
            id="pills-tab"
            role="tablist"
          >
            <li class="nav-item">
              <a
                class="nav-link active"
                id="pills-Details-tab"
                data-toggle="pill"
                href="#pills-Details"
                role="tab"
                aria-controls="pills-Details"
                aria-selected="true"
                >Details</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                id="pills-Pricing-tab"
                data-toggle="pill"
                href="#pills-Pricing"
                role="tab"
                aria-controls="pills-Pricing"
                aria-selected="false"
                title="Zone Pricing"
                (click)="
                  getTransOrWeeklyOrPurOrChangeLogHistoryOrStockMoveOrChildProd(
                    null,
                    null,
                    'ZonePricing',
                    { zone_pricing: 'zonePricingList' },
                    'Zone Pricing'
                  )
                "
                >Zone Pric.</a
              >
            </li>
            <li class="nav-item">
              <a
                class="nav-link"
                id="pills-Promostions-tab"
                data-toggle="pill"
                href="#pills-Promostions"
                role="tab"
                aria-controls="pills-Promostions"
                aria-selected="true"
                title="Promotions"
                (click)="
                  getTransOrWeeklyOrPurOrChangeLogHistoryOrStockMoveOrChildProd(
                    null,
                    null,
                    'Promotions',
                    { promotion_history: 'promotions' }
                  )
                "
                >Prom.</a
              >
            </li>
            <!-- Promotions -->
            <li class="nav-item">
              <a
                class="nav-link"
                id="pills-Suppliers-tab"
                data-toggle="pill"
                href="#pills-Suppliers"
                role="tab"
                aria-controls="pills-Suppliers"
                aria-selected="false"
                title="Suppliers Products"
                >Supp. Pro.</a
              >
            </li>
            <!-- Suppliers Products -->
            <li class="nav-item">
              <a
                class="nav-link"
                id="pills-Transaction-tab"
                data-toggle="pill"
                href="#pills-Transaction"
                role="tab"
                aria-controls="pills-Transaction"
                aria-selected="false"
                title="Transaction History"
                (click)="resetDateChange(null, 'trans_history')"
                >Tran. Hist.</a
              >
            </li>
            <!-- Transaction History -->
            <li class="nav-item">
              <a
                class="nav-link"
                id="pills-Purchase-tab"
                data-toggle="pill"
                href="#pills-Purchase"
                role="tab"
                aria-controls="pills-Purchase"
                aria-selected="false"
                title="Purchase History"
                (click)="resetDateChange(null, 'purchase_history'); 
                  getTransOrWeeklyOrPurOrChangeLogHistoryOrStockMoveOrChildProd(
                    null,
                    null,
                    'Purchase',
                    { purchase_history: 'purchaseList' },
                    'Purchase History'
                  );
                "
                >Purc. Hist.</a
              >
            </li>
            <!-- Purchase History -->
            <li class="nav-item">
              <a
                class="nav-link"
                id="pills-Weekly-tab"
                data-toggle="pill"
                href="#pills-Weekly"
                role="tab"
                aria-controls="pills-Weekly"
                aria-selected="false"
                title="Weekly Sales History"
                (click)="resetDateChange(null, 'weekly_history')"
                >Week. Sal. Hist.</a
              >
            </li>
            <!-- Weekly Sales history -->
            <li class="nav-item">
              <a
                class="nav-link"
                id="pills-Recipes-tab"
                data-toggle="pill"
                href="#pills-Recipes"
                role="tab"
                aria-controls="pills-Recipes"
                aria-selected="false"
                title="Recipes"
                (click)="
                  getRecipe('Recipe', { recipes: 'recipes' }, f?.id?.value)
                "
                >Reci.</a
              >
            </li>
            <!-- ReciPes -->
            <li class="nav-item">
              <a
                class="nav-link"
                id="pills-Changes-tab"
                data-toggle="pill"
                href="#pills-Changes"
                role="tab"
                aria-controls="pills-Changes"
                aria-selected="false"
                title="Changes Log"
                (click)="resetDateChange(null, 'change_log_history')"
                >Chan. Log</a
              >
            </li>
            <!-- Changes Log -->
            <li class="nav-item">
              <a
                class="nav-link"
                id="pills-Stock-tab"
                data-toggle="pill"
                href="#pills-Stock"
                role="tab"
                aria-controls="pills-Stock"
                aria-selected="false"
                title="Stock Movement"
                (click)="resetDateChange(null, 'stock_mov_history')"
                >Stock Move.</a
              >
            </li>
            <!-- Stock Movement -->
            <li class="nav-item">
              <a
                class="nav-link"
                id="pills-Child-tab"
                data-toggle="pill"
                href="#pills-Child"
                role="tab"
                aria-controls="pills-Child"
                aria-selected="false"
                title="Child Products"
                (click)="
                  getTransOrWeeklyOrPurOrChangeLogHistoryOrStockMoveOrChildProd(
                    null,
                    null,
                    'Children',
                    { child_product: 'productChildrenList' }
                  )
                "
                >Child Prod.</a
              >
            </li>
            <!--Child Products -->
          </ul>
        </div>
        <div class="tab-content p-0 borderxy-1" id="pills-tabContent">
          <div
            class="tab-pane fade show active"
            id="pills-Details"
            role="tabpanel"
            aria-labelledby="pills-Details-tab"
          >
            <div class="form-row">
              <div class="col-lg-5 col-md-12">
                <div class="group-from pb-17 ">
                  <h5 class="title">Product Details</h5>
                  <div class="form-group form-row align-items-center">
                    <div class="col-md-3">
                      <label class="mb-0">Number<sup>*</sup></label>
                    </div>
                    <div class="col-md-9">
                      <div class="form-row align-items-center">
                        <div class="col-6">
                          <input
                            type="number"
                            class="form-control"
                            formControlName="number"
                            placeholder="0"
                            [ngClass]="{
                              'is-invalid': submitted && f.number.errors
                            }"
                            title="{{ f?.number?.value }}"
                            readonly
                          />
                        </div>
                        <div class="col-6">
                          <select
                            class="form-control"
                            formControlName="status"
                            [ngClass]="{
                              'is-invalid': submitted && f.status.errors
                            }"
                          >
                            <option
                              [value]="status.value"
                              *ngFor="let status of statusArray"
                            >
                              {{ status?.status }}
                            </option>
                          </select>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group form-row align-items-center">
                    <div class="col-md-3">
                      <label class="mb-0">Type<sup>*</sup></label>
                    </div>
                    <div class="col-md-9">
                      <ng-select
                        [items]="productObj.type"
                        bindLabel="name"
                        bindValue="id"
                        [multiple]="false"
                        [clearable]="false"
                        [searchable]="false"
                        [virtualScroll]="true"
                        (search)="searchBtnAction($event, 'type', 'MasterListItem/code', 'PRODUCT_TYPE')"
                        formControlName="typeId"
                      >
                        <!-- It hold value on the basis of filter -->
                        <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
                          <div class="form-row">
                            <span class="col-6 zone-overflow" title="{{ item?.name }}">{{ item?.name }}</span>
                            <!-- <div class="col-6" title="{{ item?.code }}">{{ item.code }}</div> -->
                          </div>
                        </ng-template>
                      </ng-select>
                      <!-- <div
                        *ngIf="(submitted && f.controls['typeId'].errors) ||
                          (f.typeId.invalid && (f.typeId.untouched || f.typeId.dirty))"
                        class="invalid-feedback" >
                        <div *ngIf="f.typeId.errors.required" class="alert error-alert">
                          Name is required
                        </div>
                      </div> -->
                    </div>
                  </div>
                  <div class="form-group form-row align-items-center">
                    <div class="col-md-3">
                      <label class="mb-0">Description<sup>*</sup></label>
                    </div>
                    <div class="col-md-9">
                      <input
                        type="text"
                        appUppercase
                        class="form-control"
                        formControlName="desc"
                        value="COCA COLA 375ML"
                        [ngClass]="{ 'is-invalid': submitted && f.desc.errors }"
                      />
                    </div>
                  </div>
                  <div class="form-group form-row align-items-center">
                    <div class="col-md-3">
                      <label class="mb-0">Pos Desc</label>
                    </div>
                    <div class="col-md-9">
                      <div class="form-group mb-0 form-row align-items-center">
                        <div class="col-5">
                          <input
                          appUppercase
                            type="text"
                            class="form-control"
                            formControlName="posDesc"
                            value="Pos value"
                          />
                        </div>
                        <div class="col-3">
                          <label class="mb-0">Size Desc</label>
                        </div>
                        <div class="col-4">
                          <input
                          appUppercase
                            type="text"
                            class="form-control"
                            formControlName="size"
                            maxlength="8"
                            value=""
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group form-row align-items-center">
                    <div class="col-md-3">
                      <label class="mb-0">Replicate</label>
                    </div>
                    <div class="col-md-9">
                      <input
                        type="text"
                        appUppercase
                        class="form-control"
                        formControlName="replicate"
                        value="01238"
                      />
                    </div>
                  </div>
                  <div class="form-group form-row align-items-center">
                    <div class="col-md-3">
                      <label class="mb-0">Commodity<sup>*</sup></label>
                    </div>
                    <div class="col-md-9">
                      <ng-select
                        [items]="productObj.commodity"
                        [ngClass]="{
                          'is-invalid': submitted && f.commodityId.errors
                        }"
                        bindLabel="desc"
                        bindValue="id"
                        [multiple]="false"
                        [clearable]="false"
                        [virtualScroll]="true"
                        (search)="
                          searchBtnAction($event, 'commodity', 'commodity')
                        "
                        placeholder="Select Commodity"
                        formControlName="commodityId"
                      >
                        <!-- It hold value on the basis of filter -->
                        <ng-template
                          ng-option-tmp
                          let-item="item"
                          let-item$="item$"
                          let-index="index"
                        >
                        <div class="form-row">
                          <span class="col-9 zone-overflow" title="{{ item?.desc }}">
                            {{ item?.desc }}
                          </span>
                          <div class="col-3">
                            {{ item?.code }}
                          </div>
                        </div>
                        </ng-template>
                      </ng-select>
                    </div>
                  </div>
                  <div class="form-group form-row align-items-center">
                    <div class="col-md-3">
                      <label class="mb-0">Department<sup>*</sup></label>
                    </div>
                    <div class="col-md-9">
                      <ng-select
                        [items]="productObj.department"
                        [ngClass]="{
                          'is-invalid': submitted && f.departmentId.errors
                        }"
                        bindLabel="desc"
                        bindValue="id"
                        [multiple]="false"
                        [virtualScroll]="true"
                        [clearable]="false"
                        (search)="
                          searchBtnAction($event, 'department', 'department')
                        "
                        placeholder="Select Department"
                        formControlName="departmentId"
                      >
                        <!-- It hold value on the basis of filter -->
                        <ng-template
                          ng-option-tmp
                          let-item="item"
                          let-item$="item$"
                          let-index="index"
                        >
                        <div class="form-row">
                          <span class="col-9 zone-overflow" title="{{ item?.desc }}">
                            {{ item?.desc }}
                          </span>
                          <div class="col-3">
                            {{ item?.code }}
                          </div>
                        </div>
                        </ng-template>
                      </ng-select>
                    </div>
                  </div>
                  <div class="form-group form-row align-items-center">
                    <div class="col-md-3">
                      <label class="mb-0">Category<sup>*</sup></label>
                    </div>
                    <div class="col-md-9">
                      <ng-select
                        [items]="productObj.category"
                        [ngClass]="{
                          'is-invalid': submitted && f.categoryId.errors
                        }"
                        bindLabel="name"
                        bindValue="id"
                        [multiple]="false"
                        [virtualScroll]="true"
                        [clearable]="false"
                        (search)="
                          searchBtnAction(
                            $event,
                            'category',
                            'MasterListItem/code',
                            'CATEGORY'
                          )
                        "
                        placeholder="Select Category"
                        formControlName="categoryId"
                      >
                        <!-- It hold value on the basis of filter -->
                        <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
                          <div class="form-row">
                            <span class="col-9 zone-overflow" title="{{ item?.name }}">
                              {{ item?.name }}
                            </span>
                            <div class="col-3">
                              {{ item?.code }}
                            </div>
                          </div>
                        </ng-template>
                      </ng-select>
                    </div>
                  </div>
                  <div class="form-group form-row align-items-center">
                    <div class="col-md-3">
                      <label class="mb-0">Group<sup>*</sup></label>
                    </div>
                    <div class="col-md-9">
                      <ng-select
                        [items]="productObj.group"
                        [ngClass]="{
                          'is-invalid': submitted && f.groupId.errors
                        }"
                        bindLabel="name"
                        bindValue="id"
                        [multiple]="false"
                        [virtualScroll]="true"
                        [clearable]="false"
                        (search)="
                          searchBtnAction(
                            $event,
                            'group',
                            'MasterListItem/code',
                            'GROUP'
                          )
                        "
                        placeholder="Select Group"
                        formControlName="groupId"
                      >
                        <!-- It hold value on the basis of filter -->
                        <ng-template
                          ng-option-tmp
                          let-item="item"
                          let-item$="item$"
                          let-index="index"
                        >
                        <div class="form-row">
                          <span class="col-9 zone-overflow" title="{{ item?.name }}">
                            {{ item?.name }}
                          </span>
                          <div class="col-3">
                            {{ item?.code }}
                          </div>
                        </div>
                        </ng-template>
                      </ng-select>
                    </div>
                  </div>
                  <div class="form-group form-row align-items-center">
                    <div class="col-md-3">
                      <label class="mb-0">Supplier<sup>*</sup></label>
                    </div>
                    <div class="col-md-9">
                      <ng-select
                        [items]="productObj.supplier"
                        [ngClass]="{
                          'is-invalid': submitted && f.supplierId.errors
                        }"
                        bindLabel="desc"
                        bindValue="id"
                        [multiple]="false"
                        [virtualScroll]="true"
                        [clearable]="false"
                        (search)="
                          searchBtnAction(
                            $event,
                            'supplier',
                            'Supplier/GetActiveSuppliers'
                          )
                        "
                        placeholder="Select Supplier"
                        formControlName="supplierId"
                      >
                        <!-- It hold value on the basis of filter -->
                        <ng-template
                          ng-option-tmp
                          let-item="item"
                          let-item$="item$"
                          let-index="index"
                        >
                        <div class="form-row">
                          <span class="col-9 zone-overflow" title="{{ item?.desc }}">
                            {{ item?.desc }}
                          </span>
                          <div class="col-3">
                            {{ item?.code }}
                          </div>
                        </div>
                        </ng-template>
                      </ng-select>
                    </div>
                  </div>
                  <div
                    class="form-group form-row align-items-center custom-ng-select"
                  >
                    <div class="col-md-3">
                      <label class="mb-0">Manufacturer<sup>*</sup></label>
                    </div>
                    <div class="col-md-9">
                      <div class="form-group mb-0">
                        <ng-select
                          [items]="productObj.manufacturer"
                          [ngClass]="{
                            'is-invalid': submitted && f.manufacturerId.errors
                          }"
                          bindLabel="name"
                          bindValue="id"
                          [multiple]="false"
                          [virtualScroll]="true"
                          [clearable]="false"
                          (search)="
                            searchBtnAction(
                              $event,
                              'manufacturer',
                              'MasterListItem/code',
                              'MANUFACTURER'
                            )
                          "
                          placeholder="Select Manufacturer"
                          formControlName="manufacturerId"
                          (scrollToEnd)="onScrollAPIcall('manufacturer', 'MasterListItem/code', 'MANUFACTURER')"
                        >
                          <ng-template
                            ng-option-tmp
                            let-item="item"
                            let-index="index"
                          >
                            <div class="form-row">
                              <span class="col-9 zone-overflow" title="{{ f?.manufacturer?.value || item?.name }} &nbsp;&nbsp; {{item?.code}}">
                                {{ f?.manufacturer?.value || item?.name }}
                              </span>
                              <div class="col-3">
                                {{ item?.code }}
                              </div>
                            </div>    
                          </ng-template>
                        </ng-select>
                      </div>
                    </div>
                  </div>
                  <div class="form-group form-row align-items-center input-p">
                    <div class="col-md-3">
                      <label class="mb-0">Carton Qty.<sup>*</sup></label>
                    </div>
                    <div class="col-md-9">
                      <div class="form-row align-items-center">
                        <div class="col-4">
                          <input
                            type="currency"
                            class="form-control"
                            appOnlyNumber
                            formControlName="cartonQty"
                            (keyup)="calculation('cartonQty')"
                            [ngClass]="{
                              'is-invalid': submitted && f.cartonQty.errors
                            }"
                          />
                        </div>
                        <div class="col-8">
                          <div class="form-row align-items-center">
                            <label class="col-7 mb-0 text-right"
                              >Sell Unit Qty.<sup>*</sup></label
                            >
                            <div class="col-5">
                              <input
                                type="number"
                                class="form-control"
                                formControlName="unitQty"
                                (keyup)="calculation('unitQty')"
                                [ngClass]="{
                                  'is-invalid': submitted && f.unitQty.errors
                                }"
                              />
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group form-row align-items-center">
                    <div class="col-md-3">
                      <label class="mb-0">Original RRP<sup>*</sup></label>
                    </div>
                    <div class="col-md-9">
                      <div class="form-row align-items-center">
                        <div class="col-4">
                          <div [ngClass]="((f?.rrp?.value) || (f?.rrp?.value == 0)) ? 'dollar-symbol-icon' : ''">
                            <input
                              type="number"
                              class="form-control"
                              formControlName="rrp"
                              [ngClass]="{
                                'is-invalid': submitted && f.rrp.errors
                              }"

                              
                            />
                          </div>
                        </div>
                        <div class="col-8">
                          <div class="form-row align-items-center">
                            <label class="mb-0 col-7 text-right"
                            >Original Carton Cost<sup>*</sup></label
                          >
                          <div class="col-5">
                            <div [ngClass]="((f?.cartonCost?.value) || (f?.cartonCost?.value == 0)) ? 'dollar-symbol-icon' : ''">
                            <!-- <div [ngClass]="f?.cartonCost?.value ? 'dollar-symbol-icon' : ''"> -->
                              <input
                                type="number"
                                class="form-control"
                                formControlName="cartonCost"
                                (keyup)="calculation('cartonCost')"
                                [ngClass]="{
                                  'is-invalid': submitted && f.cartonCost.errors
                                }"
                              />
                            </div>
                          </div>
                          </div>
                        </div>
                      </div>
                      
                    </div>
                  </div>
               
                </div>
              </div>
              <div class="col-lg-5 col-md-12">
                <div class="group-from">
                  <h5 class="title">Parent Product</h5>
                  <div class="form-group form-row align-items-center">
                    <div class="col-4">
                      <input
                        type="number"
                        class="form-control"
                        formControlName="parent"
                        (focusout)="getParentProduct($event.target.value)"
                      />
                    </div>
                    <div class="col-8">
                      <div class="form-row align-items-center">
                        <div class="col-7">
                          <label class="mb-0">Parent Sell Unit Qty.</label>
                        </div>
                        <div class="col-5">
                          <input
                            type="number"
                            class="form-control"
                            formControlName="parentCartonQty"
                            readonly
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group mb-0 form-row align-items-center">
                    <div class="col-md-12">
                      <input
                        type="text"
                        class="form-control"
                        formControlName="parentDesc"
                        readonly
                      />
                    </div>
                  </div>
                </div>
                <div class="group-from">
                  <h5 class="title">Additional Info</h5>
                  <input
                    type="text"
                    appUppercase
                    class="form-control"
                    formControlName="info"
                    maxlength="40"
                  />
                </div>
                <div class="group-from">
                  <h5 class="title">Restrict to Outlet</h5>

                  <ng-select
                      [items]="hold_obj.store_records"
                      bindLabel="desc"
                      bindValue="id"
                      [multiple]="true"
                      [virtualScroll]="true"
                      [clearable]="false"
                      [clearSearchOnAdd]="true"
                      [closeOnSelect]="false"
                      (add)="onCheckChange('store', $event.id)"
                      (remove)="onCheckChange('store', $event.value.id)"
                      placeholder="Select Store"
                      formControlName="restricteOutletIds"
                  >
                    <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
                      <div class="form-row">
                        <div class="col-9 zone-overflow">
                          <input id="item-{{ index }}" type="checkbox" [checked]="remove_index_map[item.id] ? true : false"/>&nbsp;
                          <span title="{{ item?.desc }}">
                            {{ item?.desc }}
                          </span>
                        </div>
                        <div class="col-3">
                          {{ item?.code }}
                        </div>
                      </div>
                    </ng-template>

                    <ng-template ng-multi-label-tmp let-items="items" let-clear="clear">
                      <div class="ng-value" *ngFor="let item of items | slice: 0:2">
                        <span class="ng-value-label">{{item.desc}}</span>
                        <span class="ng-value-icon right" (click)="clear(item)" aria-hidden="true">×</span>
                      </div>
                      <div class="ng-value" *ngIf="items.length > 2">
                        <span class="ng-value-label">{{ items.length - 2 }} more...</span>
                      </div>
                    </ng-template>
                  </ng-select>

                  <!-- <div class="accordion OutletRestList" id="accordionExample">
                    <div id="headingOne">
                      <a
                        href="javascript:void(0);"
                        class="Out-btn collapsed"
                        data-toggle="collapse"
                        data-target="#collapseOne"
                        aria-expanded="true"
                        aria-controls="collapseOne"
                        >Select Outlet</a
                      >
                    </div>
                    <div
                      id="collapseOne"
                      class="collapse"
                      aria-labelledby="headingOne"
                      data-parent="#accordionExample"
                    >
                      <ul class="submenu">
                        <ng-container
                          *ngIf="
                            productObj.store_data &&
                            productObj.store_data.length
                          "
                        >
                          <ng-container
                            *ngFor="
                              let store of productObj.store_data;
                              let i = index
                            "
                          >
                            <li>
                              <div class="custom-control custom-checkbox mb-1">
                                <input
                                  type="checkbox"
                                  class="custom-control-input"
                                  id="Control01"
                                  id="{{ i }}"
                                  [value]="store.id"
                                  (change)="
                                    onCheckChange('store', $event.target.value)
                                  "
                                  [checked]="store.checked"
                                />
                                <label
                                  class="custom-control-label"
                                  for="{{ i }}"
                                >
                                  <span class="label-mt-1 d-block">
                                    {{ store?.desc }} &nbsp;&nbsp;
                                    {{ store?.code }}
                                  </span>
                                </label>
                              </div>
                            </li>
                          </ng-container>
                        </ng-container>
                      </ul>
                    </div>
                  </div> -->
                </div>
                <div class="group-from">
                  <h5 class="title">Other Settings</h5>
                  <div class="form-row">
                    <div class="col-lg-8 col-md-6 other-w">
                      <div class="form-group form-row align-items-center">
                        <label class="col-md-6 mb-0"
                          >Tax Type<sup>*</sup></label
                        >
                        <div class="col-md-6">
                          <ng-select
                            [items]="productObj.tax"
                            bindLabel="desc"
                            bindValue="id"
                            [multiple]="false"
                            [searchable]="false"
                            [virtualScroll]="true"
                            [clearable]="false"
                            (search)="searchBtnAction($event, 'tax', 'tax')"
                            placeholder="Select Tax"
                            formControlName="taxId"
                          >
                            <!-- It hold value on the basis of filter -->
                            <ng-template
                              ng-option-tmp
                              let-item="item"
                              let-item$="item$"
                              let-index="index"
                            >
                              <div class="form-row">
                                <ng-container *ngIf="item?.desc">
                                  <span class="col-9 zone-overflow" title="{{ item?.desc }}">
                                    {{ item?.desc }}
                                  </span>
                                </ng-container>
                                <!-- <div class="col-3">
                                  {{ item?.code }}
                                </div> -->
                              </div>    
                            </ng-template>
                          </ng-select>
                        </div>
                      </div>
                      <div class="form-group form-row align-items-center">
                        <label class="col-md-6 mb-0">Unit of Measure</label>
                        <div class="col-md-6">
                          <ng-select
                            [items]="productObj.unitMeasure"
                            bindLabel="name"
                            bindValue="id"
                            [multiple]="false"
                            [virtualScroll]="true"
                            [searchable]="false"
                            (remove)="removeItem($event, 'unitMeasureId', 'remove')"
  													(clear)="removeItem($event, 'unitMeasureId', 'clear_all')"
                            (search)="searchBtnAction($event, 'unitMeasure', 'MasterListItem/code', 'UNITMEASURE')"
                            placeholder="Select Unit Measure"
                            formControlName="unitMeasureId"
                          >
                            <!-- It hold value on the basis of filter -->
                            <ng-template
                              ng-option-tmp
                              let-item="item"
                              let-item$="item$"
                              let-index="index"
                            >
                              <div class="form-row">
                                <span class="col-9 zone-overflow" title="{{ item?.name }}">
                                  {{ item?.name }}
                                </span>
                                <!-- <div class="col-3">
                                  {{ item?.code }}
                                </div> -->
                              </div>    
                            </ng-template>
                          </ng-select>
                        </div>
                      </div>
                      <div class="form-group form-row align-items-center">
                        <label class="col-md-6 mb-0">Tare Weight</label>
                        <div class="col-md-6">
                          <input
                            type="text"
                            class="form-control"
                            appOnlyNumber
                            formControlName="tareWeight"
                          />
                        </div>
                      </div>
                      <div class="form-group form-row align-items-center">
                        <label class="col-md-6 mb-0">Date Added</label>
                        <div class="col-md-6">
                          <!-- <div class="ctm-calendar"> -->
                            <!-- <input
                              type="text"
                              class="form-control"
                              [value]="this.updateProduct ? this.updateProduct[0]?.createdAt?.split('T')[0] : todaysDate"
                              disabled
                            /> -->
                          <div>
                            <input
                              type="text"
                              class="form-control"
                              [value]="this.updateProduct ? (this.updateProduct[0]?.createdAt | date:'dd/MM/yyyy') : (todaysDate | date:'dd/MM/yyyy')"
                              disabled
                            />
                          </div>
                        </div>
                      </div>
                      <div class="form-group form-row align-items-center">
                        <label class="col-md-6 mb-0">Date Changed</label>
                        <div class="col-md-6">
                          <div>
                            <input
                              type="text"
                              class="form-control"
                              [value]="this.updateProduct ? (this.updateProduct[0]?.updatedAt | date:'dd/MM/yyyy') : (todaysDate | date:'dd/MM/yyyy')"
                              disabled
                            />
                          </div>
                        </div>
                      </div>
                      <div class="form-group mb-0 form-row align-items-center*
                      ">
                        <label class="col-md-6 mb-0"
                          >National Range<sup>*</sup></label
                        >
                        <div class="col-md-6 range-drop">
                          <ng-select
                            [items]="productObj.nationalRange"
                            [ngClass]="{
                              'is-invalid':
                                submitted && f.nationalRangeId.errors
                            }"
                            bindLabel="code"
                            bindValue="id"
                            [multiple]="false"
                            [virtualScroll]="true"
                            [clearable]="false"
                            (search)="
                              searchBtnAction(
                                $event,
                                'nationalRange',
                                'MasterListItem/code',
                                'NATIONALRANGE'
                              )
                            "
                            placeholder="Select National Range"
                            formControlName="nationalRangeId"
                          >
                            <!-- It hold value on the basis of filter -->
                            <ng-template
                              ng-option-tmp
                              let-item="item"
                              let-item$="item$"
                              let-index="index"
                            >
                              <div class="form-row">
                                <span class="col-3 zone-overflow text-left" title="{{ item?.code }}">
                                  {{ item?.code }}
                                </span>
                                <div class="col-9 text-left" title="{{ item?.name }}">
                                  {{ item?.name }}
                                </div>
                              </div>    
                            </ng-template>
                          </ng-select>
                        </div>
                      </div>
                    </div>
                    <div class="col-lg-4 col-md-6 other-check ">
                      <div class="text-right form-group">
                        <div class="custom-control custom-checkbox">
                          <input
                            type="checkbox"
                            class="custom-control-input"
                            formControlName="scaleInd"
                            id="customControl01"
                            (change)="
                              onCheckChange('scaleInd', $event.target.checked)
                            "
                          />
                          <label
                            class="custom-control-label"
                            for="customControl01"
                            ><span>Pos Weight Scales</span></label
                          >
                        </div>
                        <div class="custom-control custom-checkbox">
                          <input
                            type="checkbox"
                            class="custom-control-input"
                            formControlName="slowMovingInd"
                            id="customControlSMI"
                            (change)="
                              onCheckChange(
                                'slowMovingInd',
                                $event.target.checked
                              )
                            "
                          />
                          <label
                            class="custom-control-label"
                            for="customControlSMI"
                            ><span>Slow Moving Item</span></label
                          >
                        </div>
                        <div class="custom-control custom-checkbox">
                          <input
                            type="checkbox"
                            class="custom-control-input"
                            formControlName="varietyInd"
                            id="Variety"
                            (change)="
                              onCheckChange('varietyInd', $event.target.checked)
                            "
                          />
                          <label class="custom-control-label" for="Variety"
                            ><span>Variety Item</span></label
                          >
                        </div>
                        <div class="custom-control custom-checkbox">
                          <input
                            type="checkbox"
                            class="custom-control-input"
                            formControlName="austMadeInd"
                            id="Australian"
                            (change)="
                              onCheckChange(
                                'austMadeInd',
                                $event.target.checked
                              )
                            "
                          />
                          <label class="custom-control-label" for="Australian"
                            ><span>Australian Made</span></label
                          >
                        </div>
                        <div class="custom-control custom-checkbox">
                          <input
                            type="checkbox"
                            class="custom-control-input"
                            formControlName="austOwnedInd"
                            id="Owned"
                            (change)="
                              onCheckChange(
                                'austOwnedInd',
                                $event.target.checked
                              )
                            "
                          />
                          <label class="custom-control-label" for="Owned"
                            ><span>Australian Owned</span></label
                          >
                        </div>
                        <div class="custom-control custom-checkbox">
                          <input
                            type="checkbox"
                            class="custom-control-input"
                            formControlName="organicInd"
                            id="Produce"
                            (change)="
                              onCheckChange('organicInd', $event.target.checked)
                            "
                          />
                          <label class="custom-control-label" for="Produce"
                            ><span>Organic Produce</span></label
                          >
                        </div>
                        <div class="custom-control custom-checkbox">
                          <input
                            type="checkbox"
                            class="custom-control-input"
                            formControlName="altSupplier"
                            id="Supp"
                            (change)="
                              onCheckChange(
                                'altSupplier',
                                $event.target.checked
                              )
                            "
                          />
                          <label class="custom-control-label" for="Supp"
                            ><span>Default Supp Only</span></label
                          >
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-2 col-md-12">
                <div class="form-row">
                  <div class="col-lg-12 col-md-6">
                    <div class="group-from p-0">
                      <h5 class="title">APN Numbers</h5>
                      <div
                        [ngClass]="
                          getAPNNumbers?.length < 6
                            ? 'apn-number-list-noScrollBar'
                            : 'apn-number-list'
                        "
                      >

                     
                        <div class="form-group mb-0">
                          <div
                            class="input-title mb-1"
                            *ngFor="
                              let apnIndex of getAPNNumbers.controls;
                              let i = index
                            "
                          >   
                         
                            <input type="text" class="apn-left" name="tunNumber" value="{{apnIndex?.value?.toString()?.length > 13 ? 'T': '' }}" [readonly]="true">
                          
                         
                            <input
                              [formControl]="apnIndex"
                              appOnlyNumber
                              class="form-control apn-right"
                              type="text"
                              [value]="apnIndex.value"
                              (blur)="
                                addOrUpdateApnNumber(i, null, apnIndex.value)
                              "
                            />
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-12 col-md-6">
                    <div class="group-from ware-house">
                      <h5 class="title">Warehouse Order Codes</h5>
                      <div class="form-group mt-2 form-row align-items-center ">
                        <div class="col-5">
                          <!-- <label>{{ productForm.value.hostCode }}</label> -->
                          <!-- <label class="mb-0"></label> -->
                          <label>{{ productForm.value.hostCode }}</label>
                        </div>
                        <div class="col-7">
                          <div class="form-row align-items-center">
                            <div class="col-8">
                              <input
                                type="text"
                                class="form-control"
                                value="null"
                                formControlName="hostNumber"
                                readonly
                              />
                            </div>
                            <div class="col-4">
                              <input
                                type="text"
                                class="form-control"
                                formControlName="hostItemType"
                                readonly
                              />
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="form-group form-row align-items-center">
                        <div class="col-5">
                          <label class="mb-0">{{
                            productForm.value.hostCode2
                          }}</label>
                        </div>
                        <div class="col-7">
                          <div class="form-row align-items-center">
                            <div class="col-8">
                              <input
                                type="text"
                                class="form-control"
                                formControlName="hostNumber2"
                                readonly
                              />
                            </div>
                            <div class="col-4">
                              <input
                                type="text"
                                class="form-control"
                                formControlName="hostItemType2"
                                readonly
                              />
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="form-group mb-0 form-row align-items-center">
                        <div class="col-5">
                          <label class="mb-0">{{
                            productForm.value.hostCode3
                          }}</label>
                        </div>
                        <div class="col-7">
                          <div class="form-row align-items-center">
                            <div class="col-8">
                              <input
                                type="text"
                                class="form-control"
                                formControlName="hostNumber3"
                                readonly
                              />
                            </div>
                            <div class="col-4">
                              <input
                                type="text"
                                class="form-control"
                                formControlName="hostItemType3"
                                readonly
                              />
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="">
              <div class="apn-navTab">
                <ul class="nav nav-pills mb-2" id="pills-tab" role="tablist">
                  <li class="nav-item">
                    <a
                      class="nav-link"
                      [ngClass]="!gridRefresh ? 'active' : ''"
                      id="pills-home-tab"
                      data-toggle="pill"
                      href="#pills-home"
                      role="tab"
                      aria-controls="pills-home"
                      aria-selected="true"
                      (click)="addOutletProduct(false)"
                      >Outlet Grid</a
                    >
                  </li>
                  <li class="nav-item">
                    <a
                      class="nav-link"
                      [ngClass]="gridRefresh ? 'active' : ''"
                      id="pills-profile-tab"
                      data-toggle="pill"
                      href="#pills-profile"
                      role="tab"
                      aria-controls="pills-profile"
                      aria-selected="false"
                      (click)="
                        addOutletProduct(
                          true,
                          null,
                          getOutletProductControl?.value?.length > 0
                            ? 'OUTLETVALUE'
                            : null,
                          0
                        )
                      "
                      >Outlet</a
                    >
                  </li>
                </ul>
                <div class="tab-content p-0 " id="pills-tabContent">
                  <ng-container formArrayName="outletProduct">
                    <div
                      class="tab-pane fade"
                      [ngClass]="!gridRefresh ? 'show active' : ''"
                      id="pills-home"
                      role="tabpanel"
                      aria-labelledby="pills-home-tab"
                    >
                      <ng-container *ngIf="currentUrl !== urlObj.outlet_product">
                        <div class="form-group text-right mt-2 mb-2 px-2">
                          <div class="custom-control p-0 custom-checkbox">
                            <input
                              type="checkbox"
                              class="custom-control-input"
                              id="outlets"
                              (click)="filterOutletGridData($event.target.checked)"
                            />
                            <label
                              class="custom-control-label mb-0 show-only"
                              for="outlets"
                            >
                              Show Only Active outlets
                            </label>
                          </div>
                        </div>
                      </ng-container>
                      
                      <div class="outletGrid-scroll table-scroll-order ">
                        <div class="table-responsive border-tab tran-table">
                          <table class="table ctm-table" id="outletGrid">
                            <thead>
                              <tr>
                                <ng-container
                                  *ngFor="let column of outletGridColumns"
                                >
                                <th>{{ column }}</th>
                                </ng-container>
                              </tr>
                            </thead>
                            <tbody>
                              <ng-container
                                *ngIf="
                                  productObj.store && productObj.store.length
                                "
                              >
                                <ng-container
                                  *ngFor="
                                    let columnData of productObj.store;
                                    index as i
                                  "
                                >
                                  <tr>
                                    <td> <span style="display: none">{{columnData.status_checked }}</span>
                                      <span
                                        class="status-check"
                                        [ngClass]="
                                          columnData.status_checked ||
                                          outletProductWithActiveGreenStatus(
                                            columnData?.id,
                                            i
                                          )
                                            ? 'status-' +
                                              (columnData.status_checked
                                                ? columnData.status_checked
                                                : 'false')
                                            : 'status-false'
                                        "
                                      ></span>
                                    </td>
                                    <td>
                                      <a
                                        (click)="
                                          addOutletProduct(
                                            true,
                                            columnData,
                                            'UPDATE',
                                            i
                                          )
                                        "
                                      >
                                        {{
                                          columnData?.code ||
                                            columnData?.storeCode
                                        }}
                                      </a>
                                    </td>
                                    <td>
                                      {{
                                        columnData?.desc ||
                                          columnData?.storeDesc
                                      }}
                                    </td>
                                    <td>
                                      {{ columnData?.normalPrice1 ? (columnData?.normalPrice1 | currency:'USD') : '' }}
                                    </td>
                                    <!-- <td>
                                      {{ columnData?.normalPrice1 ? ('$' + columnData?.normalPrice1) : '' }}
                                    </td> -->
                                    <td> 
                                        {{ columnData?.gp1 ? (columnData?.gp1 + '%') : ( showValueOnUIOnly?.exiting?.column_data?.gp1[i] ? (showValueOnUIOnly?.exiting?.column_data?.gp1[i] + '%') : '')}}
                                    </td>
                                    <td>
                                      {{ columnData?.normalPrice2 ? (columnData?.normalPrice2 | currency:'USD') : '' }}
                                    </td>
                                    <!-- <td>
                                      {{ columnData?.normalPrice2 ? ('$' + columnData?.normalPrice2) : '' }}
                                    </td> -->
                                    <td> 
                                        {{ columnData?.gp2 ? (columnData?.gp2 + '%') : 
                                          (showValueOnUIOnly?.exiting?.column_data?.gp2[i] ? 
                                            (showValueOnUIOnly?.exiting?.column_data?.gp2[i] + '%') : '')}}
                                    </td>
                                    <!-- <td>
                                      {{ columnData?.normalPrice3 ? ('$' + columnData?.normalPrice3) : '' }}
                                    </td> -->
                                    <td>
                                      {{ columnData?.normalPrice3 ? (columnData?.normalPrice3 | currency:'USD') : '' }}
                                    </td>
                                    <td>{{ columnData?.gp3 ? (columnData?.gp3 + '%') : 
                                          (showValueOnUIOnly?.exiting?.column_data?.gp3[i] ? 
                                            (showValueOnUIOnly?.exiting?.column_data?.gp3[i] + '%') : '')}}
                                    </td>
                                    <!-- <td>
                                      ${{ columnData?.normalPrice4 ||  }}
                                    </td> -->
                                    <td>
                                      {{ columnData?.normalPrice4 ? (columnData?.normalPrice4 | currency:'USD') : '' }}
                                    </td>
                                    <!-- <td>
                                      {{ columnData?.normalPrice4 ? ('$' + columnData?.normalPrice4) : '' }}
                                    </td> -->
                                    <!-- <td>
                                      {{
                                        columnData?.gp4 ||
                                          showValueOnUIOnly.exiting.column_data
                                            .gp4[i] ||
                                          0
                                      }}%
                                    </td> -->
                                    <td>{{ columnData?.gp4 ? (columnData?.gp4 + '%') : 
                                          (showValueOnUIOnly?.exiting?.column_data?.gp4[i] ? 
                                            (showValueOnUIOnly?.exiting?.column_data?.gp4[i] + '%') : '')}}
                                    </td>
                                    <!-- <td>
                                      ${{ 
                                        
                                        (columnData?.itemCost 
                                          | number: "0.1-2") || 0.0
                                      }}
                                    </td> -->

                                    <td>
                                      {{ 
                                        
                                        (columnData?.itemCost | currency:'USD' ) || 0.0
                                      }}
                                    </td>
                                    <!-- <td>${{ columnData?.cartonCost || 0 }}</td> -->
                                    <td>{{(columnData?.cartonCost || 0) | currency:'USD' }}</td>
                                    
                                    <td>
                                      <div
                                        class="custom-control custom-checkbox"
                                      >
                                        <input
                                          type="checkbox"
                                          class="custom-control-input"
                                          id="customControl{{ i }}"
                                          (change)="
                                            filterOutletGridData(
                                              $event.target.checked,
                                              columnData,
                                              i
                                            )
                                          "
                                          [checked]="
                                            columnData?.status_checked
                                              ? true
                                              : ''
                                          "
                                        />
                                        <label
                                          class="custom-control-label mb-0"
                                          for="customControl{{ i }}"
                                        >
                                          {{
                                            columnData?.status_checked
                                              ? statusArray[0].status
                                              : statusArray[1].status
                                          }}
                                        </label>
                                      </div>
                                    </td>
                                    <td>
                                      {{ columnData?.qtyOnHand || 0 }}
                                    </td>
                                    <td>
                                      {{ columnData?.openPrice ? 'Y' : 'N' }}
                                    </td>
                                    <td>
                                      {{ columnData?.sellPromoCode }}
                                    </td>
                                    <td>
                                      {{ columnData?.promoPrice1 }}
                                    </td>
                                    <td>
                                      {{ columnData?.promoPrice2 }}
                                    </td>
                                    <td>
                                      {{ columnData?.promoPrice3 }}
                                    </td>
                                    <td>
                                      {{ columnData?.promoPrice4 }}
                                    </td>
                                    <td>
                                      {{ columnData?.mixMatch1PromoCode }}
                                    </td>
                                    <td>
                                      {{ columnData?.offer }}
                                    </td>
                                    <td>
                                      {{ columnData?.holdNorm || "HoldGP%" }}
                                    </td>
                                    <td>
                                      {{ columnData?.buyPromoCode }}
                                    </td>
                                    <td>{{(columnData?.promoCost || columnData?.promoCartonCost || 0 ) | currency:'USD' }} 
                                    </td>
                                    <td>
                                      {{ columnData?.minOnHand || 0 }}
                                    </td>
                                    <td>
                                      {{ columnData?.maxOnHand || 0 }}
                                    </td>
                                    <td>
                                      {{ columnData?.minReorderQty || 0 }}
                                    </td>
                                    <!-- Not Receiving -->
                                    <td>
                                      {{ columnData?.stockOutlet || 0 }}
                                    </td>
                                    <td>
                                      {{ columnData?.pickingBinNo }}
                                    </td>
                                    <td>
                                      {{ (columnData?.cartonCostHost || 0)  | currency:'USD'}}
                                    </td>
                                    <td>
                                      {{ (columnData?.cartonCostInv || 0 )  | currency:'USD'}}
                                    </td>
                                    <td>
                                      {{(columnData?.cartonCostAvg || 0 ) | currency:'USD'}}
                                    </td>
                                    <td>
                                      {{ columnData?.changeCostType || "HOST" }}
                                    </td>
                                    <td>
                                      {{ columnData?.changeLabelInd ? 'Yes' : 'No' }}
                                    </td>
                                    <td>
                                      {{ columnData?.changeTillInd  ? 'Yes' : 'No'}}
                                    </td>
                                    <td>
                                      {{ columnData?.labelQty || 1 }}
                                    </td>
                                    <td>
                                      {{ columnData?.shortLabelInd ? 'Yes' : 'No'}}
                                    </td>
                                    <td>
                                      {{ columnData?.supplierCode }}
                                    </td>
                                    <td>
                                      {{ columnData?.skipReorder ? 'Y' : 'N'}}
                                    </td>
                                    <td>
                                      {{ columnData?.mixMatch2PromoCode }}
                                    </td>
                                    <td>
                                      {{ columnData?.offer2PromoCode }}
                                    </td>
                                    <td>
                                      {{ columnData?.offer3PromoCode }}
                                    </td>
                                    <td>
                                      {{ columnData?.offer4PromoCode }}
                                    </td>
                                    <td>
                                      {{ columnData?.specPrice }}
                                    </td>
                                    <td>
                                      {{ columnData?.specCode }}
                                    </td>
                                    <td><span style="display: none">{{convertDateToMiliSeconds(columnData?.specFrom)}}</span>
                                      {{
                                        columnData?.specFrom
                                          | customdatetimeformat
                                      }}
                                    </td>
                                    <td><span style="display: none">{{convertDateToMiliSeconds(columnData?.specTo)}}</span>
                                      {{
                                        columnData?.specTo
                                          | customdatetimeformat
                                      }}
                                    </td>
                                    <td>
                                      {{ columnData?.specCartonCost ? ('$' + columnData?.specCartonCost) : ''}}
                                    </td>
                                    <td>
                                      {{ columnData.status == true ? columnData.outletPriceFromOutletCode : 0}}
                                    </td>
                                    <td>
                                      {{ columnData?.priceFromLevel}}
                                    </td>
                                    <td>
                                      {{ columnData?.scalePlu }}
                                    </td>
                                    <td>
                                      {{ columnData?.fifoStock ? 'Y' : 'N' }}
                                    </td>
                                    <td>
                                      <!-- {{ columnData.status == true ? (columnData.mrp > 0 ? (columnData.mrp | currency:'USD') : '' ): '' }} -->
                                      {{ columnData.status == true ? (columnData.mrp | currency:'USD' ): '' }}
                                    </td>
                                    <td>
                                      <div class="tbHover-btnGroup">
                                        <button
                                          tooltip="Change"
                                          class="tbHover-btn trash-btn"
                                          (click)="
                                            addOutletProduct(
                                              true,
                                              columnData,
                                              'UPDATE',
                                              i
                                            )
                                          "
                                        >
                                          <i class="fa fa-pencil"></i>
                                        </button>
                                      </div>
                                    </td>
                                  </tr>
                                </ng-container>
                              </ng-container>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                    <div
                      class="tab-pane fade"
                      [ngClass]="gridRefresh ? 'show active' : ''"
                      id="pills-profile"
                      *ngFor="
                        let outletProductObj of productForm.get(
                          'outletProduct'
                        )['controls'];
                        let i = index
                      "
                      [formGroupName]="i"
                    >
                      <ng-container *ngIf="i === selectedIndex">
                        <div class="d-flex align-items-center">
                          <div class="col-9">
                            <h4 class="title mb-0">
                              {{
                                (gridData?.code || gridData?.storeCode) +
                                  " " +
                                  (gridData?.desc || gridData?.storeDesc)
                              }}
                            </h4>
                          </div>
                          <div class="col-3 p-0">
                            <div class="form-row">
                              <div class="col-7 text-right">
                                <button
                                  class="btn btn-grey input-btn"
                                  (click)="undoOrCancelOutletProduct()"
                                >
                                  <i class="icon fa fa-refresh"></i> Undo
                                </button>
                              </div>
                              <div class="col-5">
                                <select
                                  class="form-control"
                                  formControlName="status"
                                  (change)="
                                    filterOutletGridData(
                                      $event.target.value,
                                      outletProductObj,
                                      i,
                                      true
                                    )
                                  "
                                >
                                  <option
                                    *ngFor="let label of statusArray"
                                    [value]="label.value"
                                  >
                                    {{ label.status }}
                                  </option>
                                </select>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="salesOutlet-wrap mt-10">
                          <div class="form-row">
                            <div class="col-lg-6">
                              <div class="group-from mt-0">
                                <h5 class="title">Normal Prices</h5>
                                <div
                                  class="form-group form-row align-items-center"
                                >
                                  <div class="col-md-3">
                                    <label class="mb-0">Prices</label>
                                  </div>
                                  <div class="col-md-9">
                                    <div class="form-row">
                                      <div class="col-3">
                                        <label class="mb-0">Price 1</label>
                                        <!-- <div [ngClass]="(outletProductObj?.normalPrice1?.value > 0) ? 'dollar-symbol-icon' : ''"> -->
                                        <div [ngClass]="((outletProductObj?.value?.normalPrice1) || (outletProductObj?.value?.normalPrice1 == 0)) ? 'dollar-symbol-icon' : ''">  
                                          <input
                                            type="number"
                                            class="form-control"
                                            formControlName="normalPrice1"
                                            (keyup)="
                                              calculation('normalPrice1')
                                            "
                                          />
                                        </div>
                                      </div>
                                      <div class="col-3">
                                        <label class="mb-0">Price 2</label>
                                        <!-- <div class="dollar-symbol-icon"> -->
                                        <div [ngClass]="((outletProductObj?.value?.normalPrice2) || (outletProductObj?.value?.normalPrice2 == 0)) ? 'dollar-symbol-icon' : ''">
                                          <input
                                            type="number"
                                            class="form-control"
                                            formControlName="normalPrice2"
                                            (keyup)="
                                              calculation('normalPrice2')
                                            "
                                          />
                                        </div>
                                      </div>
                                      <div class="col-3">
                                        <label class="mb-0">Price 3</label>
                                        <div [ngClass]="((outletProductObj?.value?.normalPrice3) || (outletProductObj?.value?.normalPrice3 == 0)) ? 'dollar-symbol-icon' : ''">
										  <input
                                            type="number"
                                            class="form-control"
                                            formControlName="normalPrice3"
                                            (keyup)="
                                              calculation('normalPrice3')
                                            "
                                          />
                                        </div>
                                      </div>
                                      <div class="col-3">
                                        <label class="mb-0">Price 4</label>
                                        <div [ngClass]="((outletProductObj?.value?.normalPrice4) || (outletProductObj?.value?.normalPrice4 == 0)) ? 'dollar-symbol-icon' : ''">
									      <input
                                            type="number"
                                            class="form-control"
                                            formControlName="normalPrice4"
                                            (keyup)="
                                              calculation('normalPrice4')
                                            "
                                          />
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <div
                                  class="form-group form-row align-items-center input-p"
                                >
                                  <div class="col-md-3">
                                    <label class="mb-0">GP%</label>
                                  </div>
                                  <div class="col-md-9">
                                    <div class="form-row">
                                      <div class="col-3">
                                        <input
                                          type="text"
                                          class="form-control"
                                          [value]="(showValueOnUIOnly.gp1[i] | number: '0.1-2') || (showValueOnUIOnly.exiting.grid_data.gp1[i] | number: '0.1-2') || 0"
                                          readonly
                                        />
                                      </div>
                                      <div class="col-3">
                                        <input
                                          type="text"
                                          class="form-control"
                                          [value]="(showValueOnUIOnly.gp2[i] | number: '0.1-2') || 
                                            (showValueOnUIOnly.exiting.grid_data.gp2[i] | number: '0.1-2') || 0"
                                          readonly
                                        />
                                      </div>
                                      <div class="col-3">
                                        <input
                                          type="text"
                                          class="form-control"
                                          [value]="(showValueOnUIOnly.gp3[i] | number: '0.1-2') || 
                                            (showValueOnUIOnly.exiting.grid_data.gp3[i] | number: '0.1-2') || 0"
                                          readonly
                                        />
                                      </div>
                                      <div class="col-3">
                                        <input
                                          type="text"
                                          class="form-control"
                                          [value]="(showValueOnUIOnly.gp4[i] | number: '0.1-2') ||
                                            (showValueOnUIOnly.exiting.grid_data.gp4[i] | number: '0.1-2') || 0"
                                          readonly
                                        />
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <div
                                  class="form-group mb-0 form-row align-items-center"
                                >
                                  <div class="col-md-3">
                                    <label class="mb-0">Open Price</label>
                                  </div>
                                  <div class="col-md-9">
                                    <div class="form-row align-items-center">
                                      <div class="col-3">
                                        <div
                                          class="custom-control custom-checkbox"
                                        >
                                          <input
                                            type="checkbox"
                                            class="custom-control-input"
                                            id="customControl4854"
                                            formControlName="openPrice"
                                          />
                                          <label
                                            class="custom-control-label mb-0"
                                            for="customControl4854"
                                          ></label>
                                        </div>
                                      </div>
                                      <div class="col-6 text-right">
                                        <label class="mb-0">Hold Option</label>
                                      </div>
                                      <div class="col-3">
                                        <select
                                          class="form-control"
                                          formControlName="holdNorm"
                                        >
                                          <option
                                            *ngFor="let hold of holdArray"
                                            [selected]="
                                              hold ===
                                              outletProductObj.value?.holdNorm
                                            "
                                          >
                                            {{ hold }}
                                          </option>
                                        </select>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="group-from">
                                <h5 class="title">Active Promo</h5>
                                <div
                                  class="form-group form-row align-items-center"
                                >
                                  <div class="col-md-3">
                                    <label class="mb-0">Prices</label>
                                  </div>
                                  <div class="col-md-9">
                                    <div class="form-row">
                                      <div class="col-3">
                                        <label class="mb-0">Price 1</label>
                                        <!-- <div class="dollar-symbol-icon"> -->
										<div [ngClass]="((outletProductObj?.value?.promoPrice1) || (outletProductObj?.value?.promoPrice1 == 0)) ? 'dollar-symbol-icon' : ''">
                                        <!-- <div [ngClass]="(outletProductObj.value?.promoPrice1 && outletProductObj.value?.promoPrice1 >= 0) ? 'dollar-symbol-icon' : ''"> -->
                                          <input
                                            type="number"
                                            class="form-control"
                                            formControlName="promoPrice1"
                                            readonly
                                          />
                                        </div>
                                      </div>
                                      <div class="col-3">
                                        <label class="mb-0">Price 2</label>
                                        <!-- <div class="dollar-symbol-icon">-->
                                        <div [ngClass]="((outletProductObj?.value?.promoPrice2) || (outletProductObj?.value?.promoPrice2 == 0)) ? 'dollar-symbol-icon' : ''">
                                        <!-- <div [ngClass]="(outletProductObj.value?.promoPrice2 && outletProductObj.value?.promoPrice2 >= 0) ? 'dollar-symbol-icon' : ''">   -->
                                          <input
                                            type="number"
                                            class="form-control"
                                            formControlName="promoPrice2"
                                            readonly
                                          />
                                        </div>
                                      </div>
                                      <div class="col-3">
                                        <label class="mb-0"
                                          >Special Price</label
                                        >
                                        <!-- <div class="dollar-symbol-icon"> -->
                                        <div [ngClass]="((outletProductObj?.value?.specPrice) || (outletProductObj?.value?.specPrice == 0)) ? 'dollar-symbol-icon' : ''">
										<!-- <div [ngClass]="(outletProductObj.value?.specPrice && outletProductObj.value?.specPrice >= 0) ? 'dollar-symbol-icon' : ''"> -->
                                          <input
                                            type="number"
                                            class="form-control"
                                            formControlName="specPrice"
                                            [ngClass]="(outletProductObj.value?.specPrice > 0) ? 'special-ctn' : ''"
                                            readonly
                                          />
                                        </div>
                                      </div>
                                      <div class="col-3">
                                        <label class="mb-0"
                                          >Spec. Ctn Cst</label
                                        >
                                        <!-- <div class="dollar-symbol-icon">-->
                                        <div [ngClass]="((outletProductObj.value?.specCartonCost) || (outletProductObj.value?.specCartonCost == 0)) ? 'dollar-symbol-icon' : ''">
										  <input
                                            type="number"
                                            class="form-control"
                                            formControlName="specCartonCost"
                                            [ngClass]="(outletProductObj.value?.specCartonCost > 0) ? 'special-ctn' : ''"
                                            readonly
                                          />
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <div
                                  class="form-group form-row align-items-center input-p"
                                >
                                  <div class="col-md-3">
                                    <label class="mb-0">GP%</label>
                                  </div>
                                  <div class="col-md-9">
                                    <div class="form-row">
                                      <div class="col-3">
                                        <input
                                          type="text"
                                          class="form-control"
                                          [value]="
                                            activePromoValueOnUIOnly
                                              ?.promoPrice1[i] ||
                                            activePromoValueOnUIOnly.exiting
                                              .grid_data?.promoPrice1[i] ||
                                            0
                                          "
                                          readonly
                                        />
                                      </div>
                                      <div class="col-3">
                                        <input
                                          type="text"
                                          class="form-control"
                                          [value]="
                                            activePromoValueOnUIOnly
                                              ?.promoPrice2[i] ||
                                            activePromoValueOnUIOnly.exiting
                                              .grid_data?.promoPrice2[i] ||
                                            0
                                          "
                                          readonly
                                        />
                                      </div>
                                      <div class="col-3">
                                        <input
                                          type="text"
                                          class="form-control"
                                          [ngClass]="(activePromoValueOnUIOnly?.specPrice[i] || activePromoValueOnUIOnly.exiting.grid_data?.specPrice[i]) ? 'special-ctn' : ''"
                                          [value]="activePromoValueOnUIOnly?.specPrice[i] || activePromoValueOnUIOnly.exiting.grid_data?.specPrice[i] || 0"
                                          readonly
                                        />
                                      </div>
                                      <div class="col-3">
                                        <button
                                          type="button"
                                          class="btn btn-grey btn-block btn-blue input-btn"
                                          data-toggle="modal"
                                          data-target="#OutletSpecial"
                                          (click)="
                                            specDateChange(
                                              'getDateSpec',
                                              outletProductObj.value
                                            )
                                            "
                                        >
                                        <!--
                                        <button
                                          type="button"
                                          class="btn btn-grey btn-block btn-blue input-btn"
                                          data-toggle="modal"
                                          data-target="#OutletSpecial"
                                          (click)="
                                            specDateChange_old(
                                              'getDateSpec',
                                              outletProductObj.value
                                            )
                                          "
                                        >
                                        -->
                                          Set Special
                                        </button>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <div
                                  class="form-group form-row align-items-center"
                                >
                                  <div class="col-md-3">
                                    <label class="mb-0">Promo</label>
                                  </div>
                                  <div class="col-md-9">
                                    <div class="form-row align-items-center">
                                      <div class="col-3">
                                        <input
                                          type="text"
                                          class="form-control"
                                          formControlName="sellPromoCode"
                                          readonly
                                        />
                                      </div>
                                      <div class="col-3 text-right">
                                        <label for="" class="mb-0"
                                          >Mix- Matchs</label
                                        >
                                      </div>
                                      <div class="col-3">
                                        <input
                                          type="text"
                                          class="form-control"
                                          formControlName="mixMatch1PromoCode"
                                          readonly
                                        />
                                      </div>
                                      <div class="col-3">
                                        <input
                                          type="text"
                                          class="form-control"
                                          formControlName="mixMatch2PromoCode"
                                          readonly
                                        />
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <div
                                  class="form-group form-row align-items-center"
                                >
                                  <div class="col-md-3">
                                    <label class="mb-0">Offers</label>
                                  </div>
                                  <div class="col-md-9">
                                    <div class="form-row">
                                      <div class="col-3">
                                        <input
                                          type="text"
                                          class="form-control"
                                          value=""
                                          formControlName="offer1PromoCode"
                                          readonly
                                        />
                                      </div>
                                      <div class="col-3">
                                        <input
                                          type="text"
                                          class="form-control"
                                          formControlName="offer2PromoCode"
                                          readonly
                                        />
                                      </div>
                                      <div class="col-3">
                                        <input
                                          type="text"
                                          class="form-control"
                                          formControlName="offer3PromoCode"
                                          readonly
                                        />
                                      </div>
                                      <div class="col-3">
                                        <input
                                          type="text"
                                          class="form-control"
                                          formControlName="offer4PromoCode"
                                          readonly
                                        />
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <div
                                  class="form-group form-row align-items-center"
                                >
                                  <div class="col-md-3">
                                    <label class="mb-0">MemOff</label>
                                  </div>
                                  <div class="col-md-9">
                                    <div class="form-row">
                                      <div class="col-3">
                                        <input
                                          type="text"
                                          class="form-control"
                                          formControlName="memberOfferCode"
                                          readonly
                                        />
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="form-row">
                                <div class="col-5">
                                  <div
                                    class="form-group form-row align-items-center"
                                  >
                                    <label class="col-md-7 mb-0" title="Maximum Retail Price">Max. Retail Price</label>
                                    <div class="col-md-5">
                                      <div [ngClass]="((outletProductObj.value?.mrp) || (outletProductObj.value?.mrp == 0)) ? 'dollar-symbol-icon' : ''">
										<input
                                          type="number"
                                          class="form-control"
                                          formControlName="mrp"
                                          (keyup)="calculation('mrp')"
                                        />
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <div class="col-6">
                                  <div
                                    class="form-group form-row align-items-center"
                                  >
                                    <label class="col-md-7 mb-0" title="Maximum Retail Price GP%"
                                      >Max. Retail Price GP%</label
                                    >
                                    <div class="col-md-5">
                                      <input
                                        type="text"
                                        class="form-control"
                                        [value]="
                                          showValueOnUIOnly.mrp_gp[i] ||
                                          showValueOnUIOnly.exiting.grid_data
                                            .mrp_gp[i] ||
                                          0
                                        "
                                        readonly
                                      />
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="col-lg-6">
                              <div class="group-from mt-0">
                                <h5 class="title">Costs</h5>
                                <div class="form-row">
                                  <div class="col-6">
                                    <div class="form-row">
                                      <div class="col-md-7">
                                        <div class="form-group">
                                          <label class="mb-0">Item Cost</label>
                                          <!-- <div class="dollar-symbol-icon"> -->
                                          <div [ngClass]="((outletProductObj.value?.itemCost) || (outletProductObj.value?.itemCost == 0)) ? 'dollar-symbol-icon' : ''">
										    <input
                                              type="number"
                                              class="form-control"
                                              [value]="outletProductObj.value.itemCost"
                                              formControlName="itemCost"
                                              readonly
                                            />
                                            <!-- <input
                                              type="number"
                                              class="form-control"
                                              [value]="gridData?.itemCost"
                                              readonly
                                            />
                                            -->
                                          </div>
                                        </div>
                                      </div>
                                      <div class="col-md-5">
                                        <div class="form-group">
                                          <label class="mb-0"
                                            >Carton Cost</label
                                          >
                                          <!-- <div class="dollar-symbol-icon"> -->
                                          <div [ngClass]="((outletProductObj.value?.cartonCost) || (outletProductObj.value?.cartonCost == 0)) ? 'dollar-symbol-icon' : ''">
										    <input
                                              type="number"
                                              class="form-control"
                                              formControlName="cartonCost"
                                              (keyup)="
                                                calculation('cartonCost')
                                              "
                                            />
                                          </div>
                                        </div>
                                      </div>
                                      <div class="col-md-7">
                                        <div class="form-group">
                                          <label class="mb-0">Promo Code</label>
                                          <input
                                            type="text"
                                            class="form-control"
                                            formControlName="buyPromoCode"
                                            readonly
                                          />
                                        </div>
                                      </div>
                                      <div class="col-md-5">
                                        <div class="form-group">
                                          <label class="mb-0">Promo Cost</label>
                                          <!-- <div class="dollar-symbol-icon"> -->
                                          <div [ngClass]="((outletProductObj.value?.promoCartonCost) || (outletProductObj.value?.promoCartonCost == 0)) ? 'dollar-symbol-icon' : ''">
											<input
                                              type="number"
                                              class="form-control"
                                              formControlName="promoCartonCost"
                                              readonly
                                            />
                                          </div>
                                        </div>
                                      </div>
                                      <div class="col-md-7">
                                        <div class="form-group">
                                          <label class="mb-0"
                                            >Final Carton Cost</label
                                          >
                                          <div class="dollar-symbol-icon">
                                          <!-- <div [ngClass]="(showValueOnUIOnly.final_carton_cost[i] && showValueOnUIOnly.final_carton_cost[i] >= 0) ? 'dollar-symbol-icon' : ''"> -->
                                            <input
                                              type="number"
                                              class="form-control"
                                              [value]="(showValueOnUIOnly.final_carton_cost[i] | number: '0.1-2')|| 0"
                                              readonly
                                            />
                                          </div>
                                        </div>
                                      </div>
                                      <div class="col-md-5">
                                        <div class="form-group">
                                          <!-- Not In Structure -->
                                          <label class="mb-0"
                                            >Final Item Cost</label
                                          >
                                          <div class="dollar-symbol-icon">
                                          <!-- <div [ngClass]="(showValueOnUIOnly.final_item_cost[i] && showValueOnUIOnly.final_item_cost[i] >= 0) ? 'dollar-symbol-icon' : ''"> -->
                                            <!-- <input
                                              type="text"
                                              class="form-control"
                                              [value]="(showValueOnUIOnly?.final_item_cost[i] | number: '0.1-2') || 0"
                                              readonly
                                            /> -->
                                            <input
                                              type="text"
                                              class="form-control"
                                              [value]="(showValueOnUIOnly?.final_item_cost[i] < 1000000000) ? (showValueOnUIOnly?.final_item_cost[i] | number: '0.1-2') : 0"
                                              readonly
                                            />
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                  <div class="col-6">
                                    <div class="form-row">
                                      <div class="col-7">
                                        <div class="form-group">
                                          <!-- Not In Structure -->
                                          <label class="mb-0"
                                            >Terms Rebate</label
                                          >
                                          <div class="dollar-symbol-icon">
                                          <!-- <div [ngClass]="(outletProductObj.value?.ctnTermsRebate && outletProductObj.value?.ctnTermsRebate >= 0) ? 'dollar-symbol-icon' : ''">  -->
                                            <input
                                              type="number"
                                              class="form-control"
                                              formControlName="ctnTermsRebate"
                                              readonly
                                            />
                                          </div>
                                        </div>
                                        <div class="form-group">
                                          <!-- Not In Structure -->
                                          <label class="mb-0"
                                            >Promo Scan Rebate</label
                                          >
                                          <div class="dollar-symbol-icon">
                                          <!-- <div [ngClass]="(outletProductObj.value?.ctnScanRebate && outletProductObj.value?.ctnScanRebate >= 0) ? 'dollar-symbol-icon' : ''">  -->
                                            <input
                                              type="number"
                                              class="form-control"
                                              value="0"
                                              formControlName="ctnScanRebate"
                                              readonly
                                            />
                                          </div>
                                        </div>
                                        <div class="form-group">
                                          <!-- Not In Structure -->
                                          <label class="mb-0"
                                            >Promo Puchase Rebate</label
                                          >
                                          <div class="dollar-symbol-icon">
                                          <!-- <div [ngClass]="(outletProductObj.value?.ctnPurchaseRebate && outletProductObj.value?.ctnPurchaseRebate >= 0) ? 'dollar-symbol-icon' : ''"> -->
                                            <input
                                              type="number"
                                              class="form-control"
                                              value="0"
                                              formControlName="ctnPurchaseRebate"
                                              readonly
                                            />
                                          </div>
                                        </div>
                                        
                                      </div>
                                      <div class="col-5">
                                        <div class="form-group">
                                          <label class="mb-0"
                                            >Host Ctn Cost</label
                                          >
                                          <div class="dollar-symbol-icon">
                                          <!-- <div [ngClass]="(outletProductObj.value?.cartonCostHost && outletProductObj.value?.cartonCostHost >= 0) ? 'dollar-symbol-icon' : ''"> -->
                                              <input
                                              type="number"
                                              class="form-control"
                                              formControlName="cartonCostHost"
                                            />
                                          </div>
                                        </div>
                                        <div class="form-group">
                                          <label class="mb-0"
                                            >Inv Ctn Cost
                                          </label>
                                          <div class="dollar-symbol-icon">
                                          <!-- <div [ngClass]="(outletProductObj.value?.cartonCostInv && outletProductObj.value?.cartonCostInv >= 0) ? 'dollar-symbol-icon' : ''"> -->
                                            <input
                                              type="number"
                                              class="form-control"
                                              formControlName="cartonCostInv"
                                            />
                                          </div>
                                        </div>
                                        <div class="form-group">
                                          <label class="mb-0"
                                            >Avg Ctn Cost</label
                                          >
                                          <div class="dollar-symbol-icon">
                                          <!-- <div [ngClass]="(outletProductObj.value?.cartonCostAvg && outletProductObj.value?.cartonCostAvg >= 0) ? 'dollar-symbol-icon' : ''"> -->
                                            <input
                                              type="number"
                                              class="form-control"
                                              formControlName="cartonCostAvg"
                                            />
                                          </div>
                                        </div>
                                      </div>
                                    
                                    </div>
                                  
                                  </div>

                                  <div class="col-12">
                                    <div class="form-group mb-0">
                                      <label class="mb-0"
                                        >Default Supplier</label
                                      >
                                      <div class="form-row m-0">
                                        <div class="col-md-4 pl-0 pr-2">
                                          <input
                                            type="text"
                                            class="form-control"
                                            [value]="testObj[outletProductObj?.value?.supplierId] || showValueOnUIOnly.supplier_code[i] || ''"
                                            readonly
                                          />
                                        </div>
                                        <div class="col-md-8 p-0">
                                          <ng-select
                                            [items]="productObj.supplier"
                                            bindLabel="desc"
                                            bindValue="id"
                                            [multiple]="false"
                                            [virtualScroll]="true"
                                            [clearable]="false"
                                            (change)="loadMoreData($event, 'supplier', true, i)"
                                            placeholder="Select Supplier"
                                            formControlName="supplierId"
                                          >
                                            <!-- It hold value on the basis of filter -->
                                            <ng-template
                                              ng-option-tmp
                                              let-item="item"
                                              let-item$="item$"
                                              let-index="index"
                                            >
                                              <div class="form-row">
                                                <span class="col-9 zone-overflow" title="{{ item?.desc }}">
                                                  {{ item?.desc }}
                                                </span>
                                                <div class="col-3">
                                                  {{ item?.code }}
                                                </div>
                                              </div>
                                            </ng-template>
                                          </ng-select>
                                          <!-- <select
                                            class="form-control"
                                            (change)="
                                              loadMoreData(
                                                $event.target.value,
                                                'supplier',
                                                true,
                                                i
                                              )
                                            "
                                            formControlName="supplierId"
                                          >
                                            <option
                                              [ngValue]="columnData.id"
                                              *ngFor="
                                                let columnData of productObj.supplier
                                              "
                                            >
                                              {{ columnData?.desc }}                
                                            </option>
                                          </select> -->
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <div class="form-row">
                                <div class="col-lg-5">
                                  <div class="group-from mt-0 h-142">
                                    <h5 class="title">Labels</h5>
                                    <div class="form-row">
                                      <div class="col-6 form-group">
                                        <label class="mb-0">No of Labels</label>
                                        <input
                                          type="number"
                                          class="form-control"
                                          formControlName="labelQty"
                                        />
                                      </div>
                                      <div class="col-6 form-group">
                                        <label class="mb-0">Short Label</label>
                                        <select
                                          class="form-control"
                                          formControlName="shortLabelInd"
                                        >
                                          <option
                                            *ngFor="let label of labelArray"
                                            [value]="label.value"
                                          >
                                            {{ label.status }}
                                          </option>
                                        </select>
                                      </div>
                                      <div class="col-6 form-group">
                                        <!-- Setting value inside function -->
                                        <label class="mb-0">Label Change</label>
                                        <input
                                          type="text"
                                          class="form-control"
                                          (click)="changeLabelValue()"
                                          [value]="gridLabelChangesValue"
                                          readonly
                                        />
                                      </div>
                                      <div class="col-6 form-group">
                                        <label class="mb-0"
                                          >Deli Scale Plu</label
                                        >
                                        <input
                                          type="number"
                                          class="form-control"
                                          formControlName="scalePlu"
                                        />
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <div class="col-lg-7">
                                  <div class="group-from mb-0 mt-0">
                                    <h5 class="title">Stock Units</h5>
                                    <div class="form-row res-change">
                                      <div class="col-md-4 form-group">
                                        <label class="mb-0"
                                          >Units on Hand</label
                                        >
                                        <input
                                          type="number"
                                          class="form-control"
                                          formControlName="qtyOnHand"
                                          readonly
                                        />
                                      </div>
                                      <div class="col-md-4 form-group">
                                        <label class="mb-0"
                                          >Min Stock Lev</label
                                        >
                                        <input
                                          type="number"
                                          class="form-control"
                                          formControlName="minOnHand"
                                        />
                                      </div>
                                      <div class="col-md-4 form-group">
                                        <label class="mb-0"
                                          >Shelf Capacity</label
                                        >
                                        <input
                                          type="number"
                                          class="form-control"
                                          formControlName="maxOnHand"
                                        />
                                      </div>
                                      <div class="col-md-4 form-group">
                                        <label class="mb-0">Min Reorder</label>
                                        <input
                                          type="number"
                                          class="form-control"
                                          formControlName="minReorderQty"
                                        />
                                      </div>
                                  
                                      <div class="col-md-4 form-group">
                                        <div
                                          class="custom-control custom-checkbox mt-4 res-change"
                                        >
                                          <input
                                            type="checkbox"
                                            class="custom-control-input"
                                            id="customControlFIFO"
                                            formControlName="fifoStock"
                                          />
                                          <label
                                            class="custom-control-label mb-0"
                                            for="customControlFIFO"
                                          >
                                            <span class="label-mt-2 d-block" title="FIFO Stock">FIFO Stock</span></label
                                          >
                                        </div>
                                      </div>
                                      <div class="col-md-4 form-group">
                                        <label class="mb-0"
                                          >No. of Facings</label
                                        >
                                        <input
                                          type="number"
                                          class="form-control"
                                          formControlName="pickingBinNo"
                                        />
                                      </div>
                                      <div class="col-md-6 form-group">
                                        <div
                                          class="custom-control custom-checkbox"
                                        >
                                          <input
                                            type="checkbox"
                                            class="custom-control-input"
                                            id="customControlSkip"
                                            formControlName="skipReorder"
                                          />
                                          <label
                                            class="custom-control-label mb-0"
                                            for="customControlSkip"
                                          >
                                            <span class="label-mt-2 d-block" title="Skip Recorder">Skip Recorder</span>
                                          </label>
                                        </div>
                                      </div>
                                     
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </ng-container>
                    </div>
                  </ng-container>
                </div>
              </div>
            </div>
          </div>

          <!-- Zone Pricing -->
          <div
            class="tab-pane fade"
            id="pills-Pricing"
            role="tabpanel"
            aria-labelledby="pills-Pricing-tab"
          >
            <div class="form-row">
              <div class="col-lg-5">
                <div class="group-from mb-0 prodcut-w">
                  <h5 class="title">Product Details</h5>
                  <div class="form-group form-row align-items-center">
                    <div class="col-md-2">
                      <label class="mb-0">Number</label>
                    </div>
                    <div class="col-md-10">
                      <div class="form-row align-items-center">
                        <div class="col-4">
                          <input
                            [readonly]="true"
                            type="text"
                            class="form-control"
                            value="{{ f.number?.value }}"
                          />
                        </div>
                        <div class="col-4">
                          <input
                            [readonly]="true"
                            type="text"
                            class="form-control"
                            value="{{ f.type?.value || productFormData?.type }}"
                          />
                        </div>
                        <div class="col-4">
                          <input
                            [readonly]="true"
                            type="text"
                            class="form-control"
                            value="{{
                              f.status?.value == true ? 'Active' : 'Inactive'
                            }}"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group mb-0 form-row align-items-center">
                    <div class="col-md-2">
                      <label class="mb-0">Description<sup>*</sup></label>
                    </div>
                    <div class="col-md-10">
                      <input
                        [readonly]="true"
                        type="text"
                        class="form-control"
                        value="{{ f.desc?.value }}"
                      />
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-12">
                <div class="mt-15">
                  <div class="table-responsive tran-table fixed-filter">
                    <table class="table ctm-table"  id="zonepricingHistory">
                      <thead>
                        <tr>
                          <ng-container
                            *ngFor="let column of zonePricingColumns"
                          >
                            <th>{{ column }}</th>
                          </ng-container>
                        </tr>
                      </thead>
                      <tbody>
                        <ng-container
                          *ngIf="
                            productObj.zone_pricing &&
                            productObj.zone_pricing.length
                          "
                        >
                          <tr
                            *ngFor="
                              let zonePrice of productObj.zone_pricing;
                              let i = index
                            "
                          >
                            <td>{{ zonePrice?.priceZoneName }}</td>
                            <td class="host_price">${{ zonePrice?.price || 0 }}</td>
                            <td><span style="display: none">{{convertDateToMiliSeconds(zonePrice?.priceDate)}}</span>
                              {{ zonePrice?.priceDate | customdatetimeformat }}
                            </td>
                            <!-- History1 Price -->
                            <td>${{ zonePrice?.priceSV1 || 0 }}</td>
                            <!-- History1 Date -->
                            <td><span style="display: none">{{convertDateToMiliSeconds(zonePrice?.priceDateSV1)}}</span>
                              {{
                                zonePrice?.priceDateSV1 | customdatetimeformat
                              }}
                            </td>
                            <!-- History2 Price -->
                            <td>${{ zonePrice?.priceSV2 || 0 }}</td>
                            <!-- History2 Date -->
                            <td><span style="display: none">{{convertDateToMiliSeconds(zonePrice?.priceDateSV2)}}</span>
                              {{
                                zonePrice?.priceDateSV2 | customdatetimeformat
                              }}
                            </td>
                            <!-- Host Ctn Cost -->
                            <td  class="ctn_Cost">${{ zonePrice?.ctnCost || 0 }}</td>
                            <!-- Cost Date -->
                            <td><span style="display: none">{{convertDateToMiliSeconds(zonePrice?.ctnCostDate)}}</span>
                              {{
                                zonePrice?.ctnCostDate | customdatetimeformat
                              }}
                            </td>
                            <!-- History1 Cost -->
                            <td>${{ zonePrice?.ctnCostSV1 || 0 }}</td>
                            <!-- History1 Date -->
                            <td><span style="display: none">{{convertDateToMiliSeconds(zonePrice?.ctnCostDateSV1)}}</span>
                              {{
                                zonePrice?.ctnCostDateSV1 | customdatetimeformat
                              }}
                            </td>
                            <!-- History2 Cost -->
                            <td>${{ zonePrice?.ctnCostSV2 || 0 }}</td>
                            <!-- History2 Date -->
                            <td><span style="display: none">{{convertDateToMiliSeconds(zonePrice?.ctnCostDateSV2)}}</span>
                              {{
                                zonePrice?.ctnCostDateSV2 | customdatetimeformat
                              }}
                            </td>
                            <!-- Raw Ctn Cost -->
                            <td>${{ zonePrice?.ctnCostStd || 0 }}</td>
                            <td>{{ zonePrice?.minReorderQty}}</td>
                          </tr>
                        </ng-container>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Product Promotions -->
          <div
            class="tab-pane fade"
            id="pills-Promostions"
            role="tabpanel"
            aria-labelledby="pills-Promostions-tab"
          >
            <div class="form-row">
              <div class="col-lg-5">
                <div class="group-from mb-0 prodcut-w">
                  <h5 class="title">Product Details</h5>
                  <div class="form-group form-row align-items-center">
                    <div class="col-md-2">
                      <label class="mb-0">Number</label>
                    </div>
                    <div class="col-md-10">
                      <div class="form-row align-items-center">
                        <div class="col-4">
                          <input
                            [readonly]="true"
                            type="text"
                            class="form-control"
                            value="{{ productFormData?.number }}"
                          />
                        </div>
                        <div class="col-4">
                          <input
                            [readonly]="true"
                            type="text"
                            class="form-control"
                            value="{{ productFormData?.type }}"
                          />
                        </div>
                        <div class="col-4">
                          <input
                            [readonly]="true"
                            type="text"
                            class="form-control"
                            value="{{
                              productFormData?.status == true
                                ? 'Active'
                                : 'Inactive'
                            }}"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group mb-0 form-row align-items-center">
                    <div class="col-md-2">
                      <label class="mb-0">Description<sup>*</sup></label>
                    </div>
                    <div class="col-md-10">
                      <input
                        [readonly]="true"
                        type="text"
                        class="form-control"
                        value="{{ productFormData?.desc }}"
                      />
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-12 mt-15">
                <div class="">
                  <div class="table-responsive tran-table fixed-filter">
                    <!-- <table id="promoHistory" class="table ctm-table" *ngIf="productFormData?.promotions?.length"> -->
                    <table
                      class="table ctm-table"
                      id="promoproductTable"
                    >
                      <thead>
                        <tr>
                          <ng-container *ngFor="let column of promotionColumns">
                            <th title="{{ column }}">
                              {{ column }}
                            </th>
                          </ng-container>
                        </tr>
                      </thead>
                      <tbody>
                        <ng-container *ngIf="productFormData?.promotions?.length">
                          <tr *ngFor="let promotion of productFormData?.promotions">
                            <td><span style="display: none">{{promotion.status}}</span>
                                <span class="status-check" [ngClass]="promotion.status ? 'status-true' : 'status-false'"></span>
                              
                              <!-- <span class="status-check" [ngClass]="{ 'status-true': promotion.status, 'status-false': !promotion.status }"></span>  -->
                            </td>
                            <td title="{{ promotion?.code }}">{{ promotion?.code }}</td>
                            <td title="{{ promotion?.desc }}">{{ promotion?.desc }}</td>
                            <td title="{{ promotion?.promotionType }}">{{ promotion?.promotionType }}</td>
                            <!-- <td>{{ promotion?.rptGroup }}</td> -->
                            <td title="{{ promotion?.start | customdatetimeformat }}"> <span style="display: none">{{convertDateToMiliSeconds(promotion?.start)}}</span> {{ promotion?.start | customdatetimeformat }}</td>
                            <td title="{{ promotion?.end | customdatetimeformat }}"> <span style="display: none">{{convertDateToMiliSeconds(promotion?.end)}}</span> {{ promotion?.end | customdatetimeformat }}</td>
                            <td title="{{ promotion?.promotion?.zone + '   ' + promotion?.zoneCode }}">{{ promotion?.zone + '   ' + promotion?.zoneCode}}</td>
                            <td>
                              {{
                                promotion.availibility &&
                                promotion.availibility.length
                                  ? promotion.availibility[1]
                                  : "N"
                              }}
                            </td>
                            <td>
                              {{
                                promotion.availibility &&
                                promotion.availibility.length
                                  ? promotion.availibility[2]
                                  : "N"
                              }}
                            </td>
                            <td>
                              {{
                                promotion.availibility &&
                                promotion.availibility.length
                                  ? promotion.availibility[3]
                                  : "N"
                              }}
                            </td>
                            <td>
                              {{
                                promotion.availibility
                                  ? promotion.availibility[4]
                                  : "N"
                              }}
                            </td>
                            <td>
                              {{
                                promotion.availibility &&
                                promotion.availibility.length
                                  ? promotion.availibility[5]
                                  : "N"
                              }}
                            </td>
                            <td>
                              {{
                                promotion.availibility &&
                                promotion.availibility.length
                                  ? promotion.availibility[6]
                                  : "N"
                              }}
                            </td>
                            <td>
                              {{
                                promotion.availibility &&
                                promotion.availibility.length
                                  ? promotion.availibility[0]
                                  : "N"
                              }}
                            </td>
                            <td title="{{ promotion?.action }}">{{ promotion?.action }}</td>
                            <td title="{{ promotion?.cartonCost }}">{{ promotion?.cartonCost }}</td>
                            <td title="{{ promotion?.price1 }}">{{ promotion?.price1 }}</td>
                            <td title="{{ promotion?.price2 }}">{{ promotion?.price2 }}</td>
                            <td title="{{ promotion?.price3 }}">{{ promotion?.price3 }}</td>
                            <td title="{{ promotion?.price4 }}">{{ promotion?.price4 }}</td>
                            <td title="{{ (promotion?.promotionType | lowercase) == 'mixmatch' ? promotion?.code : '' }}">
                              {{
                                (promotion?.promotionType | lowercase) ==
                                "mixmatch"
                                  ? promotion?.code
                                  : ""
                              }}
                            </td>
                            <td title="{{ (promotion?.promotionType | lowercase) == 'offer' ? promotion?.code : '' }}">
                              {{
                                (promotion?.promotionType | lowercase) == "offer"
                                  ? promotion?.code
                                  : ""
                              }}
                            </td>
                            <!-- <td>{{ promotion?.rptGroup }}</td><td>{{ promotion?.source }}</td> -->
                          </tr>
                        </ng-container> 
                      </tbody>
                    </table>
                    <!-- <span *ngIf="!productFormData?.promotions?.length">No record available!</span> -->
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Supplier Products -->
          <div
            class="tab-pane fade"
            id="pills-Suppliers"
            role="tabpanel"
            aria-labelledby="pills-Suppliers-tab"
          >
            <div class="form-row">
              <div class="col-lg-5">
                <div class="group-from mb-0 prodcut-w">
                  <h5 class="title">Product Details</h5>
                  <div class="form-group form-row align-items-center">
                    <div class="col-md-2">
                      <label class="mb-0">Number</label>
                    </div>
                    <div class="col-md-10">
                      <div class="form-row align-items-center">
                        <div class="col-4">
                          <input
                            [readonly]="true"
                            type="text"
                            class="form-control"
                            value="{{ f.number?.value }}"
                          />
                        </div>
                        <div class="col-4">
                          <input
                            [readonly]="true"
                            type="text"
                            class="form-control"
                            value="{{ f.type?.value || productFormData?.type }}"
                          />
                        </div>
                        <div class="col-4">
                          <input
                            [readonly]="true"
                            type="text"
                            class="form-control"
                            value="{{
                              f.status?.value == true ? 'Active' : 'Inactive'
                            }}"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group mb-0 form-row align-items-center">
                    <div class="col-md-2">
                      <label class="mb-0">Description<sup>*</sup></label>
                    </div>
                    <div class="col-md-10">
                      <input
                        [readonly]="true"
                        type="text"
                        class="form-control"
                        value="{{ f.desc?.value }}"
                      />
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-6">
                <div class="d-flex align-items-start h-100">
                  <a
                    type="button"
                    class="btn btn-blue mt-10"
                    data-toggle="modal"
                    data-target="#addSupplierForProduct"
                    (click)="resetSupplierProductForm()"
                  >
                    <i class="icon fa fa-plus-circle"></i> Add
                  </a>
                </div>
              </div>
              <div class="col-12 mt-15">
                <div class="min-height-3">
                  <div class="table-responsive tran-table fixed-filter">
                    <table class="table ctm-table">
                      <thead>
                        <!-- <ng-container
                          *ngIf="
                            productForm.get('supplierProduct')['controls']
                              .length
                          "
                        > -->
                          <tr>
                            <ng-container
                              *ngFor="let column of supplierProductColumns"
                            >
                              <th>{{ column }}</th>
                            </ng-container>
                          </tr>
                        <!-- </ng-container> -->
                      </thead>

                      <tbody>
                        <ng-container
                          *ngIf="
                            productForm.get('supplierProduct')['controls']
                              .length
                          "
                        >
                          <tr
                            *ngFor="
                              let supplier of productForm.get(
                                'supplierProduct'
                              )['controls'];
                              let i = index
                            "
                          >
                            <td>{{ supplier.value?.supplierCode }}</td>
                            <td>
                              <a
                                (click)="
                                  addOrUpdateSupplierProduct(
                                    supplier,
                                    'UPDATE',
                                    i
                                  )
                                "
                              >
                              
                              {{
    
                                  supplier.value?.supplierDesc
                              }}
                                <!-- {{
                                  supplier.value?.supplierCode +
                                    " " +
                                    supplier.value?.supplierDesc
                                }} -->
                              </a>
                            </td>
                            <td>{{ supplier.value?.supplierItem }}</td>
                            <td>{{ supplier.value?.desc }}</td>
                            <!--
													<td>{{supplier.value?.supplierDesc || supplier.value?.desc}}</td>
													-->
                            <td>{{ supplier.value?.cartonCost ? ('$' + supplier.value?.cartonCost) : ''}}</td>
                            <td>{{ supplier.value?.lastInvoiceCost ? ('$' + supplier.value?.lastInvoiceCost) : ''}}</td>
                            <td>{{ supplier.value?.minReorderQty }}</td>
                          </tr>
                        </ng-container>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- addSupplierProduct model -->
          <div
            class="modal fade bd-example-modal-md thm-popup"
            id="addSupplierForProduct"
            tabindex="-1"
            role="dialog"
            aria-labelledby="addSupplierForProduct"
            aria-hidden="true"
            data-backdrop="static"
          >
            <div
              class="modal-dialog modal-dialog-centered modal-md"
              role="document"
            >
              <form [formGroup]="supplierProductForm">
                <div class="modal-content">
                  <div class="modal-body popup-box-width supplier-select">
                    <div class="popup-box">
                      <div class="title-wrap mb-1">
                        <h4 class="title">Supplier Products</h4>
                      </div>
                      <div class="form-row align-items-center">
                        <div class="col-6 custom-ng-select supplier-ng-select">
                          <div class="form-group">
                            <label for="">Supplier Name<sup>*</sup></label>
                            <ng-select
                              [items]="productObj.supplier"
                              [ngClass]="{
                                'is-invalid':
                                  submitted &&
                                  getSupplierProductForm.supplierId.errors
                              }"
                              bindLabel="desc"
                              bindValue="id"
                              [multiple]="false"
                              [virtualScroll]="true"
                              [clearable]="false"
                              (change)="
                                getDropdownValues($event, 'supplierForm')
                              "
                              (search)="
                                searchBtnAction(
                                  $event,
                                  'supplier',
                                  'Supplier/GetActiveSuppliers'
                                )
                              "
                              placeholder="Select Supplier"
                              formControlName="supplierId"
                            >
                              <!-- It hold value on the basis of filter -->
                              <ng-template
                                ng-option-tmp
                                let-item="item"
                                let-item$="item$"
                                let-index="index"
                              >
                                <div class="form-row">
                                  <span class="col-9 zone-overflow" title="{{ item?.desc }}">
                                    {{ item?.desc }}
                                  </span>
                                  <div class="col-3">
                                    {{ item?.code }}
                                  </div>
                                </div>
                              </ng-template>
                            </ng-select>
                          </div>
                        </div>
                        <div class="col-6">
                          <div class="form-group mb-0">
                            <label for="">Supplier Item<sup>*</sup></label>
                            <input
                              type="text"
                              name=""
                              formControlName="supplierItem"
                              class="form-control"
                              [ngClass]="{
                                'is-invalid':
                                  submitted &&
                                  getSupplierProductForm.supplierItem.errors
                              }"
                            />
                            <div
                              *ngIf="
                                submitted &&
                                getSupplierProductForm.supplierItem.errors
                              "
                              class="invalid-feedback"
                            >
                              <div
                                *ngIf="
                                  getSupplierProductForm.supplierItem.errors
                                    .maxlength
                                "
                              >
                                It must not exceed from 15 characters
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="col-6">
                          <div class="form-group">
                            <label for="">Supplier</label>
                            <input
                              type="text"
                              name=""
                              formControlName="supplierCode"
                              class="form-control"
                              readonly
                            />
                          </div>
                        </div>
                        <div class="col-6">
                          <div class="form-group mb-0">
                            <label for="">Supplier Item Dec</label>
                            <input
                              type="text"
                              name=""
                              formControlName="desc"
                              [value]="
                                getSupplierProductForm.supplierDesc?.value
                              "
                              class="form-control"
                              readonly
                            />
                          </div>
                        </div>
                        <div class="col-6">
                          <div class="form-group">
                            <label for="">Supplier Cost<sup>*</sup></label>
                            <input
                              type="number"
                              name=""
                              formControlName="cartonCost"
                              class="form-control"
                              [ngClass]="{
                                'is-invalid':
                                  submitted &&
                                  getSupplierProductForm.cartonCost.errors
                              }"
                            />
                          </div>
                        </div>
                        <div class="col-6">
                          <div class="form-group mb-0">
                            <label for="">Last Invoice Cost</label>
                            <!-- MSD, didn't clear yet -->
                            <input
                              type="text"
                              name=""
                              value=""
                              class="form-control"
                              readonly
                            />
                          </div>
                        </div>
                        <div class="col-6">
                          <div class="form-group mb-0">
                            <label for="">Min Reorder</label>
                            <input
                              type="number"
                              name=""
                              formControlName="minReorderQty"
                              class="form-control"
                            />
                          </div>
                        </div>
                      </div>
                      <div class="btn-wrap text-right mt-10">
                        <button
                          type="button"
                          class="btn btn-blue mr-2"
                          (click)="addOrUpdateSupplierProduct()"
                        >
                          Ok
                        </button>
                        <button
                          type="button"
                          class="btn btn-grey"
                          data-dismiss="modal"
                        >
                          Cancel
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </form>
            </div>
          </div>

          <!-- Transaction History -->
          <div
            class="tab-pane fade"
            id="pills-Transaction"
            role="tabpanel"
            aria-labelledby="pills-Transaction-tab"
          >
            <div class="form-row">
              <div class="col-lg-5">
                <div class="group-from mb-0 prodcut-w">
                  <h5 class="title">Product Details</h5>
                  <div class="form-group form-row align-items-center">
                    <div class="col-md-2">
                      <label class="mb-0">Number</label>
                    </div>
                    <div class="col-md-10">
                      <div class="form-row align-items-center">
                        <div class="col-4">
                          <input
                            [readonly]="true"
                            type="text"
                            class="form-control"
                            value="{{ f.number?.value }}"
                          />
                        </div>
                        <div class="col-4">
                          <input
                            [readonly]="true"
                            type="text"
                            class="form-control"
                            value="{{ f.type?.value || productFormData?.type }}"
                          />
                        </div>
                        <div class="col-4">
                          <input
                            [readonly]="true"
                            type="text"
                            class="form-control"
                            value="{{
                              f.status?.value == true ? 'Active' : 'Inactive'
                            }}"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group mb-0 form-row align-items-center">
                    <div class="col-md-2">
                      <label class="mb-0">Description<sup>*</sup></label>
                    </div>
                    <div class="col-md-10">
                      <input
                        [readonly]="true"
                        type="text"
                        class="form-control"
                        value="{{ f.desc?.value }}"
                      />
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-4">
                <div class="group-from mb-0">
                  <h5 class="title">Date Range</h5>
                  <div class="form-group mb-0 form-row align-items-center">
                    <div class="col-12">
                      <div class="form-row align-items-center">
                        <div class="col-5">
                          <div class="ctm-calendar">
                            <input
                              #trnsFromDate
                              type="text"
                              class="form-control"
                              [maxDate]="fromDateObj"
                              bsDatepicker
                              [value]="default_stock_mMove_trans_weekly_formate_date"
                              [bsValue]="defaultDateObj.stock_mMove_trans_weekly"
                              (bsValueChange)="onDateChange($event)"
                              [bsConfig]="{showWeekNumbers: false}"
                              readonly
                            />
                          </div>
                        </div>
                        <div class="col-2 text-center">
                          <label for="" class="mb-0">To</label>
                        </div>
                        <div class="col-5">
                          <div class="ctm-calendar">
                            <input
                              #trnsToDate
                              type="text"
                              class="form-control"
                              bsDatepicker
                              [minDate]="minDateObj"
                              [maxDate]="fromDateObj"
                              [value]="fromDateObj"
                              [bsValue]="fromDateObj"
                              (bsValueChange)="onDateChange(trnsFromDate.value, $event)"
                              [bsConfig]="{showWeekNumbers: false}"

                              readonly
                            />
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-12 text-right">
                      <button
                        type="button"
                        (click)="
                          getTransOrWeeklyOrPurOrChangeLogHistoryOrStockMoveOrChildProd(
                            trnsFromDate.value,
                            trnsToDate.value,
                            'Transaction',
                            { transaction_history: 'transactionList' }
                          )
                        "
                        class="btn btn-grey mt-1 btn-blue input-btn"
                      >
                        Search
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-12">
                <div class="mt-15">
                  <div class="table-responsive tran-table fixed-filter">
                    <table class="table ctm-table" id="transactionHistory">
                      <thead>
                        <tr>
                          <ng-container
                            *ngFor="let column of transactionHistoryColumns"
                          >
                            <th>{{ column }}</th>
                          </ng-container>
                        </tr>
                      </thead>

                      <tbody>
                        <ng-container
                          *ngIf="
                            productObj.transaction_history &&
                            productObj.transaction_history.length
                          "
                        >
                          <tr
                            *ngFor="
                              let transactionHistory of productObj.transaction_history;
                              let i = index
                            "
                          >
                            <!--
													<td>{{(transactionHistory?.date ? (transactionHistory?.date.split('T')[0].split('-').join('/') ) : transactionHistory?.date)}}</td>
													-->
                            <td class="full_date text-center"> <span style="display: none">{{convertDateToMiliSeconds( transactionHistory?.date )}}</span> 
                              {{
                                transactionHistory?.date | customdatetimeformat
                              }}
                            </td>
                            <td>{{ transactionHistory?.day }}</td>
                            <td>{{ transactionHistory?.type }}</td>
                            <td>{{ transactionHistory?.outletCode }}</td>
                            <td>{{ transactionHistory?.tillCode }}</td>
                            <td>{{ transactionHistory?.qty }}</td>
                            <td>${{ transactionHistory?.amt || 0  | number: '0.2-3' }}</td>
                            <td>${{ transactionHistory?.amtGst || 0 | number: '0.2-3'}}</td>
                            <td>${{ transactionHistory?.cost || 0 | number: '0.2-3'}}</td>
                            <td>${{ transactionHistory?.costGst || 0 | number: '0.2-3'}}</td>
                            <td>${{ transactionHistory?.discount || 0 | number: '0.2-3' }}</td>
                            <td>{{ transactionHistory?.subType }}</td>
                            <td>{{ transactionHistory?.promSellCode }}</td>
                            <td>{{ transactionHistory?.promBuyCode }}</td>
                            <td>{{ transactionHistory?.stockUnitMovement }}</td>
                            <td>{{ transactionHistory?.parent }}</td>
                            <td>{{ transactionHistory?.member }}</td>
                            <td>{{ transactionHistory?.newUnitOnHand }}</td>
                            <td>{{ transactionHistory?.reference }}</td>
                            <td>{{transactionHistory?.manual === false ? "No" : "Yes"}}</td>
                            <td>{{ transactionHistory?.cartonQty }}</td>
                            <td>{{ transactionHistory?.sellUnit }}</td>
                            <td>{{ transactionHistory?.userName }}</td>
                            <td> <span style="display: none">{{convertDateToMiliSeconds(transactionHistory?.dateTimeStamp)}}</span>  {{transactionHistory?.dateTimeStamp | dateTimeFormate}}</td>
                            <td>{{ transactionHistory?.histDeptCode }}</td>
                            <td>{{ transactionHistory?.histSupplierCode }}</td>
                          </tr>
                        </ng-container>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Purchase History -->
          <div
            class="tab-pane fade"
            id="pills-Purchase"
            role="tabpanel"
            aria-labelledby="pills-Purchase-tab"
          >
            <div class="form-row">
              <div class="col-lg-5">
                <div class="group-from mb-0 prodcut-w">
                  <h5 class="title">Product Details</h5>
                  <div class="form-group form-row align-items-center">
                    <div class="col-md-2">
                      <label class="mb-0">Number</label>
                    </div>
                    <div class="col-md-10">
                      <div class="form-row align-items-center">
                        <div class="col-4">
                          <input
                            [readonly]="true"
                            type="text"
                            class="form-control"
                            value="{{ f.number?.value }}"
                          />
                        </div>
                        <div class="col-4">
                          <input
                            [readonly]="true"
                            type="text"
                            class="form-control"
                            value="{{ f.type?.value || productFormData?.type }}"
                          />
                        </div>
                        <div class="col-4">
                          <input
                            [readonly]="true"
                            type="text"
                            class="form-control"
                            value="{{
                              f.status?.value == true ? 'Active' : 'Inactive'
                            }}"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group mb-0 form-row align-items-center">
                    <div class="col-md-2">
                      <label class="mb-0">Description<sup>*</sup></label>
                    </div>
                    <div class="col-md-10">
                      <input
                        [readonly]="true"
                        type="text"
                        class="form-control"
                        value="{{ f.desc?.value }}"
                      />
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-12">
                <div class="mt-15">
                  <div class="table-responsive  tran-table fixed-filter">
                    <table class="table ctm-table" id="purchaseHistory">
                      <thead>
                        <tr>
                          <ng-container
                            *ngFor="let column of purchaseHistoryColumns"
                          >
                            <th>{{ column }}</th>
                          </ng-container>
                        </tr>
                      </thead>
                      <tbody>
                        <ng-container
                          *ngIf="
                            productObj.purchase_history &&
                            productObj.purchase_history.length
                          "
                        >
                          <tr
                            *ngFor="
                              let purchaseHistory of productObj.purchase_history;
                              let i = index
                            "
                            [ngClass]="selectedRowIndex == i ? 'row-active' : ''"  (click)="selectpurchaseHistoryRow(i)"
                          >
                            <td >{{ purchaseHistory?.outletCode }}</td>
                            <td > {{ purchaseHistory?.outletName || purchaseHistory?.outletDesc }}</td>
                            <td >{{ purchaseHistory?.orderNo }}</td>
                            <td >
                              <span style="display: none">{{convertDateToMiliSeconds(purchaseHistory?.orderDate)}}</span>
                              {{ purchaseHistory?.orderDate | customdatetimeformat }}
                            </td>
                            <td > {{ purchaseHistory?.datePosted | dateTimeFormate }}</td>
                            <td >{{ purchaseHistory?.docType }}</td>
                            <td >{{ purchaseHistory?.docStatus }}</td>
                            <td >{{ purchaseHistory?.supplier }}</td>
                            <td >{{ purchaseHistory?.invoiceNo }}</td>
                            <td > <span style="display: none">{{convertDateToMiliSeconds(purchaseHistory?.invoiceDate)}}</span> {{ purchaseHistory?.invoiceDate | customdatetimeformat }}</td>
                            <td >{{ purchaseHistory?.cartons }}</td>
                            <td >{{ purchaseHistory?.units }}</td>
                            <td >{{ purchaseHistory?.cartonCost | currency:'USD' }}</td>
                            <td >{{purchaseHistory?.lineTotal | currency:'USD' }}</td>
                            <td >{{ purchaseHistory?.cartonQty }}</td>
                            <td >{{ purchaseHistory?.supplierItem }}</td>
                            <td >{{ purchaseHistory?.invoiceTotal | currency:'USD' }}</td>
                            <td >{{ purchaseHistory?.delDocNo }}</td>
                            <td > <span style="display: none">{{convertDateToMiliSeconds(purchaseHistory?.delDocDate)}}</span> {{ purchaseHistory?.delDocDate | customdatetimeformat }}</td>
                            <td > <span style="display: none">{{convertDateToMiliSeconds(purchaseHistory?.timestamp)}}</span>{{ purchaseHistory?.timestamp | dateTimeFormate }}</td>
                          </tr>
                        </ng-container>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Weekly Sales History -->
          <div
            class="tab-pane fade"
            id="pills-Weekly"
            role="tabpanel"
            aria-labelledby="pills-Weekly-tab"
          >
            <div class="form-row">
              <div class="col-lg-5">
                <div class="group-from mb-0 prodcut-w">
                  <h5 class="title">Product Details</h5>
                  <div class="form-group form-row align-items-center">
                    <div class="col-md-2">
                      <label class="mb-0">Number</label>
                    </div>
                    <div class="col-md-10">
                      <div class="form-row align-items-center">
                        <div class="col-4">
                          <input
                            [readonly]="true"
                            type="text"
                            class="form-control"
                            value="{{ f.number?.value }}"
                          />
                        </div>
                        <div class="col-4">
                          <input
                            [readonly]="true"
                            type="text"
                            class="form-control"
                            value="{{ f.type?.value || productFormData?.type }}"
                          />
                        </div>
                        <div class="col-4">
                          <input
                            [readonly]="true"
                            type="text"
                            class="form-control"
                            value="{{
                              f.status?.value == true ? 'Active' : 'Inactive'
                            }}"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group mb-0 form-row align-items-center">
                    <div class="col-md-2">
                      <label class="mb-0">Description<sup>*</sup></label>
                    </div>
                    <div class="col-md-10">
                      <input
                        [readonly]="true"
                        type="text"
                        class="form-control"
                        value="{{ f.desc?.value }}"
                      />
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-4">
                <div class="group-from mb-0">
                  <h5 class="title">Date Range</h5>
                  <div class="form-group mb-0 form-row align-items-center">
                    <div class="col-12">
                      <div class="form-row align-items-center">
                        <div class="col-5">
                          <div class="ctm-calendar">
                            <input
                              #weeklyFromDate
                              type="text"
                              class="form-control"
                              [maxDate]="fromDateObj"
                              bsDatepicker
                              [value]="defaultDateObj.stock_mMove_trans_weekly | date: 'DD/MM/YYYY'"
                              [bsValue]="defaultDateObj.stock_mMove_trans_weekly  "
                              (bsValueChange)="onDateChange($event)"
                              [bsConfig]="{showWeekNumbers: false}"
                              readonly
                            />
                          </div>
                        </div>
                        <div class="col-2 text-center">
                          <label for="" class="mb-0">To</label>
                        </div>
                        <div class="col-5">
                          <div class="ctm-calendar">
                            <input
                              #weeklyToDate
                              type="text"
                              class="form-control"
                              [minDate]="minDateObj"
                              [maxDate]="fromDateObj"
                              bsDatepicker
                              [value]="fromDateObj | date: 'DD/MM/YYYY'"
                              [bsValue]="fromDateObj"
                              (bsValueChange)="
                                onDateChange(weeklyFromDate.value, $event)
                              "
                              [bsConfig]="{showWeekNumbers: false}"
                              readonly
                            />
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-12 text-right">
                      <button
                        (click)="
                          getTransOrWeeklyOrPurOrChangeLogHistoryOrStockMoveOrChildProd(
                            weeklyFromDate.value,
                            weeklyToDate.value,
                            'WeeklySales',
                            { weekly_sales_history: 'weeklySalesList' },
                            'Weekly Sales'
                          )
                        "
                        class="btn btn-grey mt-1 btn-blue input-btn"
                      >
                        Search
                      </button>
                    </div>
                  </div>
                </div>
              </div>
           
              <div class="col-lg-2 float-right">
                <div class="group-from mb-0">
                  <h5 class="title">Last APN Sold</h5>
                  <div class="form-group mb-0">
                    <input
                      type="text"
                      class="form-control"
                      [value]="this.updateProduct ? getAPNNumbers.value[0] : ''"
                      readOnly
                    />
                  </div>
                </div>
              </div>
              <div class="col-12">
                <div class="mt-15">
                  <div class="table-responsive tran-table fixed-filter">
                    <table class="table ctm-table w-100" id="weeklysalesHistory">
                      <thead>
                        <tr>
                          <ng-container
                            *ngFor="let column of weeklySalesHistoryColumns"
                          >
                            <th>{{ column }}</th>
                          </ng-container>
                        </tr>
                      </thead>

                      <tbody>
                        <ng-container
                          *ngIf="
                            productObj.weekly_sales_history &&
                            productObj.weekly_sales_history.length
                          "
                        >
                          <tr
                            *ngFor="
                              let weeklySalesHistory of productObj.weekly_sales_history;
                              let i = index
                            "
                          >
                            <td>
								<span style="display: none">{{convertDateToMiliSeconds(weeklySalesHistory?.weekEnding)}}</span>
                              {{
                                weeklySalesHistory?.weekEnding
                                  | customdatetimeformat
                              }}
                            </td>
                            <td>{{ weeklySalesHistory?.outletCode }}</td>
                            <td>
                              {{
                                weeklySalesHistory?.outletName ||
                                  weeklySalesHistory?.outletDesc
                              }}
                            </td>
                            <td>
                              {{
                                weeklySalesHistory?.promoSales | currency:'USD'
                              }}
                            </td>
                            <td>
                              {{
                                weeklySalesHistory?.discount | currency:'USD'
                              }}
                            </td>
                            <td>
                              {{
                                weeklySalesHistory?.avgItemPrice
                                | currency:'USD'
                              }}
                            </td>
                            <td>{{ weeklySalesHistory?.quantity }}</td>
                            <td>
                              {{
                                weeklySalesHistory?.salesCost | currency:'USD'
                              }}
                            </td>
                            <td>
                              {{
                                weeklySalesHistory?.margin | currency:'USD'
                              }}
                            </td>
                            <td>
                              {{ weeklySalesHistory?.gp | number: "0.1-2" }}
                            </td>
                            <td>
                              {{
                                weeklySalesHistory?.salesAmt | currency:'USD'
                              }}
                            </td>
                          </tr>
                        </ng-container>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Recipes -->
          <div
            class="tab-pane fade"
            id="pills-Recipes"
            role="tabpanel"
            aria-labelledby="pills-Recipes-tab"
          >
            <div class="form-row">
              <div class="col-12">
                <div class="mt-15">
                  <div class="table-responsive tran-table">
                    <table class="table ctm-table w-100" id="recipeHistory">
                      <thead>
                        <tr>
                          <ng-container *ngFor="let column of recipesColumns">
                            <th>{{ column }}</th>
                          </ng-container>
                        </tr>
                      </thead>
                      <tbody>
                        <ng-container
                          *ngIf="
                            productObj.recipes && productObj.recipes.length
                          "
                        >
                          <ng-container
                            *ngFor="let recipe of productObj.recipes"
                          >
                            <tr>
                              <td>{{ recipe?.outletCode }}</td>
                              <td>{{ recipe?.outletDesc }}</td>
                              <td>{{ recipe?.productDescription }}</td>
                              <td>{{ recipe?.ingredientNumber }}</td>
                              <td>{{ recipe?.ingredientDescription }}</td>
                              <td>{{ recipe?.qty || 0 }}</td>
                            </tr>
                          </ng-container>
                        </ng-container>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Change log -->
          <div
            class="tab-pane fade"
            id="pills-Changes"
            role="tabpanel"
            aria-labelledby="pills-Changes-tab"
          >
            <div class="form-row">
              <div class="col-lg-5">
                <div class="group-from mb-0  prodcut-w">
                  <h5 class="title">Product Details</h5>
                  <div class="form-group form-row align-items-center">
                    <div class="col-md-2">
                      <label class="mb-0">Number</label>
                    </div>
                    <div class="col-md-10">
                      <div class="form-row align-items-center">
                        <div class="col-4">
                          <input
                            [readonly]="true"
                            type="text"
                            class="form-control"
                            value="{{ f.number?.value }}"
                          />
                        </div>
                        <div class="col-4">
                          <input
                            [readonly]="true"
                            type="text"
                            class="form-control"
                            value="{{ f.type?.value || productFormData?.type }}"
                          />
                        </div>
                        <div class="col-4">
                          <input
                            [readonly]="true"
                            type="text"
                            class="form-control"
                            value="{{
                              f.status?.value == true ? 'Active' : 'Inactive'
                            }}"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group mb-0 form-row align-items-center">
                    <div class="col-md-2">
                      <label class="mb-0">Description<sup>*</sup></label>
                    </div>
                    <div class="col-md-10">
                      <input
                        [readonly]="true"
                        type="text"
                        class="form-control"
                        value="{{ f.desc?.value }}"
                      />
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-4">
                <div class="group-from mb-0">
                  <h5 class="title">Date Range</h5>
                  <div class="form-group mb-0 form-row align-items-center">
                    <div class="col-12">
                      <div class="form-row align-items-center">
                        <div class="col-5">
                          <div class="ctm-calendar">
                            <input
                              #changeLogFromDate
                              type="text"
                              class="form-control"
                              [maxDate]="fromDateObj"
                              bsDatepicker
                              [value]="defaultDateObj.change_log | date: 'dd/MM/yyyy'"
                              [bsValue]="defaultDateObj.change_log"
                              (bsValueChange)="onDateChange($event)"
                              [bsConfig]="{showWeekNumbers: false}"
                              readonly
                            />
                          </div>
                        </div>
                        <div class="col-2 text-center">
                          <label for="" class="mb-0">To</label>
                        </div>
                        <div class="col-5">
                          <div class="ctm-calendar">
                            <input
                              #changeLogToDate
                              type="text"
                              class="form-control"
                              bsDatepicker
                              [minDate]="minDateObj"
                              [maxDate]="fromDateObj"
                              [value]="fromDateObj | date: 'dd/MM/yyyy'"
                              [bsValue]="fromDateObj"
                              (bsValueChange)="
                                onDateChange(changeLogFromDate.value, $event)
                              "
                              [bsConfig]="{showWeekNumbers: false}"
                              readonly
                            />
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-12 text-right">
                      <button
                        (click)="
                          getTransOrWeeklyOrPurOrChangeLogHistoryOrStockMoveOrChildProd(
                            changeLogFromDate.value,
                            changeLogToDate.value,
                            'History',
                            {
                              apn_history: 'apnProductHistory',
                              outlet_product_history: 'outletProductHistroy',
                              product_history: 'productHistory'
                            },
                            'Change Log'
                          )
                        "
                        class="btn btn-grey mt-1 btn-blue input-btn"
                      >
                        Search
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-12">
                <div class="mt-15">
                  <div class="table-responsive tran-table fixed-filter">
                    <table class="table ctm-table" id="productChangeLogHistory">
                      <thead>
                        <tr>
                          <ng-container
                            *ngFor="let column of changeLogProductColumns"
                          >
                            <th>{{ column }}</th>
                          </ng-container>
                        </tr>
                      </thead>
                      <tbody>
                        <ng-container
                          *ngIf="
                            productObj.product_history &&
                            productObj.product_history.length
                          "
                        >
                          <tr
                            *ngFor="
                              let productHistory of productObj.product_history;
                              let i = index
                            "
                          >
                            <td>{{ productHistory?.userNumber }}</td>
                            <td>{{ productHistory?.userName }}</td>
                            <td> <span style="display: none">{{convertDateToMiliSeconds(productHistory?.actionAt)}}</span>
                              {{ productHistory?.actionAt | dateTimeFormate }}
                            </td>
                            <td>
                              {{
                                productHistory.activity !== '' ? productHistory?.activity :  "PRODUCT "+ productHistory?.action | uppercase
                              }}
                            </td>
                            <td>
                              {{
                                productHistory?.dataLogs?.newData?.desc ===
                                productHistory?.dataLogs?.oldData?.desc
                                  ? "{Same}"
                                  : productHistory?.dataLogs?.oldData?.desc
                              }}
                            </td>
                            <td>
                              {{ productHistory?.dataLogs?.newData?.desc }}
                            </td>
                            <td>
                              {{ productHistory?.dataLogs?.oldData?.commodityCode }}
                            </td>
                            <td>
                              {{ productHistory?.dataLogs?.newData?.commodityCode }}
                            </td>
                            <td>
                              {{
                                productHistory?.dataLogs?.oldData?.department
                              }}
                            </td>
                            <td>
                              {{
                                productHistory?.dataLogs?.newData?.department
                              }}
                            </td>
                            <td>
                              {{ productHistory?.dataLogs?.oldData?.cartonQty }}
                            </td>
                            <td>
                              {{ productHistory?.dataLogs?.newData?.cartonQty }}
                            </td>
                            <td>
                              {{ productHistory?.dataLogs?.oldData?.unitQty }}
                            </td>
                            <td>
                              {{ productHistory?.dataLogs?.newData?.unitQty }}
                            </td>
                            <td>
                              {{ productHistory?.dataLogs?.oldData?.supplier }}
                            </td>
                            <td>
                              {{ productHistory?.dataLogs?.newData?.supplier }}
                            </td>
                            <td>
                              {{(productHistory?.dataLogs?.oldData?.status == null) ? '' : (productHistory?.dataLogs?.oldData?.status == true) ? 'Active' : 'Inactive' }}
                            </td>
                            <td>
                              {{(productHistory?.dataLogs?.newData?.status == null) ? '' :  (productHistory?.dataLogs?.newData?.status == true) ? 'Active' : 'Inactive' }}
                            </td>
                            <td>
                              {{ productHistory?.dataLogs?.oldData?.replicate }}
                            </td>
                            <td>
                              {{ productHistory?.dataLogs?.newData?.replicate }}
                            </td>
                            <td>
                              {{
                                productHistory?.dataLogs?.oldData?.cartonCost | currency:'USD'
                              }}
                            </td>
                            <td>
                              {{
                                productHistory?.dataLogs?.newData?.cartonCost | currency:'USD'
                              }}
                            </td>
                            <td>
                              {{ productHistory?.dataLogs?.oldData?.tax }}
                            </td>
                            <td>
                              {{ productHistory?.dataLogs?.newData?.tax }}
                            </td>
                            <td>
                              {{
                                productHistory?.dataLogs?.oldData?.nationalRange
                              }}
                            </td>
                            <td>
                              {{
                                productHistory?.dataLogs?.newData?.nationalRange
                              }}
                            </td>
                          </tr>
                        </ng-container>
                      </tbody>
                    </table>
                    <!-- <span
                      *ngIf="!productObj.product_history.length"
                      class="d-block text-center"
                      >{{ emptyTableText }}</span
                    > -->
                  </div>
                </div>
                <div class="mt-15">
                  <div class="table-responsive tran-table fixed-filter">
                    <table class="table ctm-table" id="outletChangeLogHistory">
                      <thead>
                        <tr>
                          <ng-container
                            *ngFor="let column of changeLogOutletProductColumns"
                          >
                            <th>{{ column }}</th>
                          </ng-container>
                        </tr>
                      </thead>
                      <tbody>
                        <ng-container
                          *ngIf="
                            productObj.outlet_product_history &&
                            productObj.outlet_product_history.length
                          "
                        >
                          <tr
                            *ngFor="
                              let outletProductHistory of productObj.outlet_product_history;
                              let i = index
                            "
                          >
                            <td>{{ outletProductHistory?.userNumber }}</td>
                            <td>{{ outletProductHistory?.userName }}</td>
                            <td><span style="display: none">{{convertDateToMiliSeconds(outletProductHistory?.actionAt)}}</span>
                              {{
                                outletProductHistory?.actionAt | dateTimeFormate
                              }}
                            </td>
                            <td>
                              {{
                                outletProductHistory?.dataLogs?.newData
                                  ?.storeCode
                              }}
                            </td>
                            <td>
                              {{
                                (outletProductHistory?.dataLogs?.newData
                                  ?.storeCode || "") +
                                  " " +
                                  (outletProductHistory?.dataLogs?.newData
                                    ?.storeDesc || "")
                              }}
                            </td>
                            <td>
                              {{
                                outletProductHistory?.dataLogs?.oldData
                                  ?.normalPrice1 | currency:'USD'
                              }}
                            </td>
                            <td>
                              {{
                                outletProductHistory?.dataLogs?.newData
                                  ?.normalPrice1 | currency:'USD'
                              }}
                            </td>
                            <td>
                              {{
                                outletProductHistory?.dataLogs?.oldData
                                  ?.cartonCost | currency:'USD'
                              }}
                            </td>
                            <td>
                              {{
                                outletProductHistory?.dataLogs?.newData
                                  ?.cartonCost | currency:'USD'
                              }}
                            </td>
                            <td>
                              {{
                                outletProductHistory?.dataLogs?.oldData?.status ? 'Active' : 'Inactive'
                              }}
                            </td>
                            <td>
                              {{
                                outletProductHistory?.dataLogs?.newData?.status ? 'Active' : 'Inactive'
                              }}
                            </td>
                            <td>
                              {{
                                outletProductHistory?.dataLogs?.oldData
                                  ?.normalPrice2 | currency:'USD'
                              }}
                            </td>
                            <td>
                              {{
                                outletProductHistory?.dataLogs?.newData
                                  ?.normalPrice2 | currency:'USD'
                              }}
                            </td>
                            <td>
                              {{
                                outletProductHistory?.dataLogs?.oldData
                                  ?.normalPrice3 | currency:'USD'
                              }}
                            </td>
                            <td>
                              {{
                                outletProductHistory?.dataLogs?.newData
                                  ?.normalPrice3 | currency:'USD'
                              }}
                            </td>
                            <td>
                              {{
                                outletProductHistory?.dataLogs?.oldData
                                  ?.normalPrice4 | currency:'USD'
                              }}
                            </td>
                            <td>
                              {{
                                outletProductHistory?.dataLogs?.newData
                                  ?.normalPrice4 | currency:'USD'
                              }}
                            </td>
                            <td>
                              {{
                                (outletProductHistory?.dataLogs?.oldData
                                  ?.supplierCode || "") +
                                  " " +
                                  (outletProductHistory?.dataLogs?.oldData
                                    ?.supplierDesc || "")
                              }}
                            </td>
                            <td>
                              {{
                                (outletProductHistory?.dataLogs?.newData
                                  ?.supplierCode || "") +
                                  " " +
                                  (outletProductHistory?.dataLogs?.newData
                                    ?.supplierDesc || "")
                              }}
                            </td>
                            <td>
                              {{
                                outletProductHistory?.dataLogs?.oldData
                                  ?.specPrice | currency:'USD'
                              }}
                            </td>
                            <td>
                              {{
                                outletProductHistory?.dataLogs?.newData
                                  ?.specPrice | currency:'USD'
                              }}
                            </td>
                            <td>
                              {{
                                outletProductHistory?.dataLogs?.oldData
                                  ?.specCartonCost | currency:'USD'
                              }}
                            </td>
                            <td>
                              {{
                                outletProductHistory?.dataLogs?.newData
                                  ?.specCartonCost | currency:'USD'
                              }}
                            </td>
                            <td>
                              {{
                                outletProductHistory?.dataLogs?.oldData
                                  ?.specCode
                              }}
                            </td>
                            <td>
                              {{
                                outletProductHistory?.dataLogs?.newData
                                  ?.specCode
                              }}
                            </td>
                            <td>
                              {{
                                outletProductHistory?.dataLogs?.oldData
                                  ?.specFrom
                              }}
                            </td>
                            <td>
                              {{
                                outletProductHistory?.dataLogs?.newData
                                  ?.specFrom
                              }}
                            </td>
                            <td>
                              {{
                                outletProductHistory?.dataLogs?.oldData?.specTo
                              }}
                            </td>
                            <td>
                              {{
                                outletProductHistory?.dataLogs?.newData?.specTo
                              }}
                            </td>
                            <td>
                              {{
                                outletProductHistory?.dataLogs?.oldData
                                  ?.minOnHand
                              }}
                            </td>
                            <td>
                              {{
                                outletProductHistory?.dataLogs?.newData
                                  ?.minOnHand
                              }}
                            </td>
                            <td>
                              {{
                                outletProductHistory?.dataLogs?.oldData?.mrp | currency:'USD'
                              }}
                            </td>
                            <td>
                              {{
                                outletProductHistory?.dataLogs?.newData?.mrp | currency:'USD'
                              }}
                            </td>
                            <td>
                              {{
                                outletProductHistory?.dataLogs?.oldData
                                  ?.minReorderQty
                              }}
                            </td>
                            <td>
                              {{
                                outletProductHistory?.dataLogs?.newData
                                  ?.minReorderQty
                              }}
                            </td>
                            <td>{{(outletProductHistory?.dataLogs?.oldData?.skipReorder == null ) ? '' : (outletProductHistory?.dataLogs?.oldData?.skipReorder == true ) ? 'Y' : 'N'}}</td>
                            <td>{{(outletProductHistory?.dataLogs?.newData?.skipReorder == null) ? '' : (outletProductHistory?.dataLogs?.newData?.skipReorder == true) ? 'Y' : 'N'}}</td>
                          </tr>
                        </ng-container>
                      </tbody>
                    </table>
                    <!-- <span
                      class="d-block text-center"
                      *ngIf="!productObj.outlet_product_history.length"
                      >{{ emptyTableText }}</span
                    > -->
                  </div>
                </div>
                <div class="mt-15">
                  <div class="table-responsive tran-table fixed-filter">
                    <table class="table ctm-table" id="apnChangeLogHistory">
                      <thead>
                        <tr>
                          <ng-container
                            *ngFor="let column of changeLogApnColumns"
                          >
                            <th>{{ column }}</th>
                          </ng-container>
                        </tr>
                      </thead>
                      <tbody>
                        <ng-container
                          *ngIf="
                            productObj.apn_history &&
                            productObj.apn_history.length
                          "
                        >
                          <tr
                            *ngFor="
                              let apnHistory of productObj.apn_history;
                              let i = index
                            "
                          >
                            <td>{{ apnHistory?.userNumber }}</td>
                            <td>{{ apnHistory?.userName }}</td>
                            <td><span style="display: none">{{convertDateToMiliSeconds(apnHistory?.actionAt)}}</span>
                              {{ apnHistory?.actionAt | dateTimeFormate }}
                            </td>
                            <td>
                              {{ "APN " + apnHistory?.action | uppercase }}
                            </td>
                            <td>
                              {{
                                apnHistory?.dataLogs?.newData?.number ||
                                  apnHistory?.dataLogs?.oldData?.number
                              }}
                            </td>
                          </tr>
                        </ng-container>
                      </tbody>
                    </table>
                    <!-- <span
                      class="d-block text-center"
                      *ngIf="!productObj.apn_history.length"
                      >{{ emptyTableText }}</span -->
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Stock Movement -->
          <div
            class="tab-pane fade"
            id="pills-Stock"
            role="tabpanel"
            aria-labelledby="pills-Stock-tab"
          >
            <div class="form-row">
              <div class="col-lg-5">
                <div class="group-from mb-0 prodcut-w">
                  <h5 class="title">Product Details</h5>
                  <div class="form-group form-row align-items-center">
                    <div class="col-md-2">
                      <label class="mb-0">Number</label>
                    </div>
                    <div class="col-md-10">
                      <div class="form-row align-items-center">
                        <div class="col-4">
                          <input
                            [readonly]="true"
                            type="text"
                            class="form-control"
                            value="{{ f.number?.value }}"
                          />
                        </div>
                        <div class="col-4">
                          <input
                            [readonly]="true"
                            type="text"
                            class="form-control"
                            value="{{ f.type?.value || productFormData?.type }}"
                          />
                        </div>
                        <div class="col-4">
                          <input
                            [readonly]="true"
                            type="text"
                            class="form-control"
                            value="{{
                              f.status?.value == true ? 'Active' : 'Inactive'
                            }}"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group mb-0 form-row align-items-center">
                    <div class="col-md-2">
                      <label class="mb-0">Description<sup>*</sup></label>
                    </div>
                    <div class="col-md-10">
                      <input
                        [readonly]="true"
                        type="text"
                        class="form-control"
                        value="{{ f.desc?.value }}"
                      />
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-5">
                <div class="group-from mb-0 date-border">
                  <h5 class="title">Date Range</h5>
                  <div class="form-group mb-0 form-row align-items-center">
                    <div class="col-12">
                      <div class="form-row align-items-center">
                        <div class="col-5">
                          <div class="ctm-calendar">
                            <input
                              #stockMovementFromDate
                              type="text"
                              class="form-control"
                              [maxDate]="fromDateObj"
                              bsDatepicker
                              [value]="defaultDateObj.stock_mMove_trans_weekly | date: 'dd/MM/yyyy'"
                              [bsValue]="defaultDateObj.stock_mMove_trans_weekly"
                              (bsValueChange)="onDateChange($event)"
                              [bsConfig]="{showWeekNumbers: false}"
                              readonly
                            />
                          </div>
                        </div>
                        <div class="col-2 text-center">
                          <label for="" class="mb-0">To</label>
                        </div>
                        <div class="col-5">
                          <div class="ctm-calendar">
                            <input
                              #stockMovementToDate
                              type="text"
                              class="form-control"
                              bsDatepicker
                              [minDate]="minDateObj"
                              [maxDate]="fromDateObj"
                              [value]="fromDateObj | date: 'dd/MM/yyyy'"
                              [bsValue]="fromDateObj"
                              (bsValueChange)="
                                onDateChange(
                                  stockMovementFromDate.value,
                                  $event
                                )
                              "
                              [bsConfig]="{showWeekNumbers: false}"
                              readonly
                            />
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-12">
                      <div class="drop-btn-w">
                      <ng-select
                        [items]="productObj.stock_movement_store"
                        class="form-control mt-1"
                        bindLabel="desc"
                        bindValue="id"
                        [clearSearchOnAdd]="true"
                        [closeOnSelect]="true"
                        [virtualScroll]="true"
                        [multiple]="false"
                        [clearable]="false"
                        [clearOnBackspace]="false"
                        formControlName="stockMovemetStoreId"
                      >
                        <ng-template ng-option-tmp let-item="item" let-item$="item$" let-index="index">
														<div class="form-row">
															<div class="col-9 zone-overflow">
																<span title="{{ item?.desc }}">{{ item?.desc }}</span>
															</div>
															<div class="col-3">{{ item?.code }}</div>
														</div>
													</ng-template>
                      </ng-select>
                    </div>
                      <!-- <select
                        class="form-control mt-2"
                        [(ngModel)]="stockMovemetStoreId"
                        [ngModelOptions]="{ standalone: true }"
                      > -->
                        <!-- <option
                          *ngFor="let store of productObj.stock_movement_store"
                          [ngValue]="store?.storeId || store.id"
                        > -->
                          <!-- <div class="form-row">
                            <div class="col-9 zone-overflow">
                              <span title="{{ item?.desc }}">
                                {{ item?.desc }}
                              </span>
                            </div>
                            <div class="col-3">
                              {{ item?.code }}
                            </div>
                          </div> -->
                          <!-- {{ store?.desc }} &nbsp;&nbsp; {{ store?.code }} -->
                        <!-- </option>
                      </select> -->
                      <button
                        (click)="
                          getTransOrWeeklyOrPurOrChangeLogHistoryOrStockMoveOrChildProd(
                            stockMovementFromDate.value,
                            stockMovementToDate.value,
                            'StockMovement',
                            { stock_movement: 'stockMovementList' },
                            'Stock Movement'
                          )
                        "
                        class="btn btn-grey w-69 btn-blue input-btn float-right mt-1"
                      >
                        Search
                      </button>
                    </div>
                  
                  </div>
                </div>
              </div>
              <div class="col-12">
                <div class="mt-15">
                  <div class="table-responsive tran-table fixed-filter">
                    <table class="table ctm-table" id="stockmovementHistory">
                      <thead>
                        <tr>
                          <ng-container
                            *ngFor="let column of stockMovementColumns"
                          >
                            <th>{{ column }}</th>
                          </ng-container>
                        </tr>
                      </thead>
                      <tbody>
                        <ng-container
                          *ngIf="
                            productObj.stock_movement &&
                            productObj.stock_movement.length
                          "
                        >
                          <tr
                            *ngFor="
                              let stockMove of productObj.stock_movement;
                              let i = index
                            "
                          >
                            <td> <span style="display: none">{{convertDateToMiliSeconds(stockMove?.date)}}</span> {{ stockMove?.date | customdatetimeformat }}</td>
                            <td [ngClass]="stockMove?.type == 'INVOICE' ? 'ctn_Cost'  : ''">{{ stockMove?.type }}</td>
                            <td>{{ stockMove?.qty > 0 ? stockMove?.qty : ''}}</td>
                            <td>{{stockMove?.movement || stockMove?.stockMovement || 0}}</td>
                            <td>{{ stockMove?.newOnHand >  0  ? stockMove?.newOnHand : '' }}</td>
                            <td>{{ stockMove?.supplierDesc}}</td>
                            <td> <span style="display: none">{{convertDateToMiliSeconds((stockMove?.timestamp || stockMove?.date))}}</span>
								{{ (stockMove?.timestamp || stockMove?.date) | dateTimeFormate }}
							</td>
                          </tr>
                        </ng-container>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Child Products -->
          <div
            class="tab-pane fade"
            id="pills-Child"
            role="tabpanel"
            aria-labelledby="pills-Child-tab"
          >
            <div class="form-row">
              <div class="col-12">
                <div class="mt-15">
                  <div class="table-responsive tran-table fixed-filter">
                    <table class="table ctm-table w-100" id="childrenHistory">
                      <thead>
                        <tr>
                          <ng-container
                            *ngFor="let column of childProductColumns"
                          >
                            <th>{{ column }}</th>
                          </ng-container>
                        </tr>
                      </thead>
                      <tbody>
                        <ng-container
                          *ngIf="
                            productObj.child_product &&
                            productObj.child_product.length
                          "
                        >
                          <ng-container
                            *ngFor="
                              let childProduct of productObj.child_product;
                              let i = index
                            "
                          >
                            <tr
                              *ngIf="
                                childProduct?.number !==
                                productForm.get('number').value
                              "
                            >
                              <td>{{ childProduct?.number }}</td>
                              <td>{{ childProduct?.desc }}</td>
                              <td>{{ childProduct?.status ? 'Active' : 'Inactive' }}</td>
                              <td>{{ childProduct?.type || 0 }}</td>
                              <td>{{ childProduct?.unitQty || 0 }}</td>
                              <td>{{ childProduct?.cartonQty || 0 }}</td>
                            </tr>
                          </ng-container>
                        </ng-container>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>

<!-- Modal -->
<div
  class="modal fade bd-example-modal-md thm-popup"
  id="OutletSpecial"
  tabindex="-1"
  role="dialog"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <ng-container *ngIf="checkMinMaxDateExitance.selectedStoreId">
    <div class="modal-dialog modal-dialog-centered modal-md" role="document">
      <div class="modal-content">
        <div class="modal-body popup-box-width">
          <div class="popup-box">
            <form>
              <div class="title-wrap mb-1">
                <h4 class="title">Outlet Special Price</h4>
              </div>
              <div class="group-from mb-0 mx-4 center-v">
                <div class="form-group form-row align-items-center">
                  <label class="col-md-4">Special Sell Price</label>
                <input
                  #specialSellPrice
                  type="text"
                  class="form-control col-md-5"
                  [value]="
                    gridRefresh
                      ? getOutletProductControl?.value[selectedIndex].specPrice
                      : ''
                  "
                />
              </div>
              <div class="form-group form-row align-items-center">
                <label class="col-md-4 mb-0">Special Carton Cost</label>
                <input
                  #specialCartonCost
                  type="text"
                  class="form-control col-md-5"
                  [value]="
                    gridRefresh
                      ? getOutletProductControl?.value[selectedIndex].specCartonCost
                      : ''
                  "
                />
              </div>
              <div class="form-group form-row align-items-center">
                <label class="col-md-4 mb-0">Special Report Code</label>
                <input
                  #specialReportCode
                  type="text"
                  class="form-control col-md-5"
                  [value]="
                    gridRefresh
                      ? getOutletProductControl?.value[selectedIndex].specCode
                      : ''
                  "
                />
              </div>

              <div class="form-group form-row align-items-center">
                <label class="col-md-4 mb-0">Start Date</label>
                <div class="ctm-calendar col-md-5 p-0">
					<!--
					<input 
						#startDate
						type="text" 
						class="form-control"
						[minDate]="fromDateObj"
						bsDatepicker
						[bsConfig]="datepickerConfig"
						[value]="(getOutletProductControl?.value[selectedIndex].specFrom || fromDateObj) | date: 'dd/MM/yyyy'"
						(bsValueChange)="specDateChange(null, $event, 'specFrom', true)"
					>
					-->
                  <input
                    #startDate
                    type="text"
                    class="form-control"
                    [minDate]="(checkMinMaxDateExitance?.minDate[checkMinMaxDateExitance?.selectedStoreId]) || fromDateObj"
                    bsDatepicker
                    [value]="(checkMinMaxDateExitance.minDate[checkMinMaxDateExitance.selectedStoreId] | date: 'DD/MM/YYYY') ||
                      (fromDateObj | date: 'DD/MM/YYYY')"
                    [(ngModel)]="checkMinMaxDateExitance.minDate[checkMinMaxDateExitance.selectedStoreId]"
                    [ngModelOptions]="{ standalone: true }"
                    [bsConfig]="{showWeekNumbers: false, adaptivePosition: true}"
                    (bsValueChange)="specDateChange(checkMinMaxDateExitance.mode, $event, null, true)"
                    readonly
                  />
                </div>
              </div>
              <div class="form-group form-row align-items-center mb-0">
                <label class="col-md-4 mb-0">End Date</label>
                <div class="ctm-calendar col-mb-5 p-0 w-170">
					<!--
					<input 
						#endDate
						type="text" 
						class="form-control"
						[minDate]="fromDateObj | date: 'dd/MM/yyyy'"
						bsDatepicker
						[bsConfig]="datepickerConfig"
						[value]="(getOutletProductControl?.value[selectedIndex].specTo || fromDateObj) | date: 'dd/MM/yyyy'"
						(bsValueChange)="specDateChange(null, $event, 'specTo')"
					>
					-->
                  <input
                    #endDate
                    type="text"
                    class="form-control"
                    [minDate]="
                      checkMinMaxDateExitance.minDate[
                        checkMinMaxDateExitance.selectedStoreId
                      ]
                    "
                    bsDatepicker
                    [value]="
                      (checkMinMaxDateExitance.maxDate[
                        checkMinMaxDateExitance.selectedStoreId
                      ] | date: 'DD/MM/YYYY') ||
                      (fromDateObj | date: 'DD/MM/YYYY')
                    "
                    [(ngModel)]="
                      checkMinMaxDateExitance.maxDate[
                        checkMinMaxDateExitance.selectedStoreId
                      ]
                    "
                    [ngModelOptions]="{ standalone: true }"
                    [bsConfig]="{
                      showWeekNumbers: false,
                      adaptivePosition: true
                    }"
                    readonly
                    (bsValueChange)="
                      specDateChange(
                        checkMinMaxDateExitance.mode,
                        startDate.value,
                        $event
                      )
                    "
                  />
                </div>
              </div>
              </div>
              <div class="d-flex align-items-center mt-10 border-1">
                <div class="col-8 p-0">
                  <ng-container *ngIf="isSetSpecialCodeRequired">
                    <h4 class="title mb-0 primaryColor">
                      Code needed if a Price is entered
                    </h4>
                  </ng-container>
                </div>
                <div class="col-4 p-0">
                  <div class="btn-wrap text-right border-0 m-0">
                    <button
                      type="button"
                      class="btn btn-blue mr-2"
                      (click)="
                        setSpecialBtnOnOutletProduct(
                          specialSellPrice.value,
                          specialCartonCost.value,
                          specialReportCode.value,
                          startDate.value,
                          endDate.value
                        )
                      "
                    >
                      Ok
                    </button>
                    <button
                      type="button"
                      class="btn btn-grey"
                      data-dismiss="modal"
                      (click)="specDateChange('cancelSpecDate')"
                    >
                      Cancel
                    </button>
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
</div>

<!--
    result <br>
    
    <pre>
    {{productForm.value | json}}
    </pre>
    -->
