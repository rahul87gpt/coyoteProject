<div class="mainContent-innner">
    <div class="Stock-section">
        <div class="d-flex align-items-center">
            <!-- <h4 class="title flex-grow-1 mb-0">{{salesByText}}&nbsp;&nbsp; <span>Printeda:{{ f?.startDate?.value | customdatetimeformat }}</span></h4> -->
            <!-- <div class="text-right mb-2" style="text-align: center;">
                <h4 class="title flex-grow-1 mb-0"></h4>
            </div> -->
            <div class="probtn-wrap d-flex text-right">
                <button type="button" *ngIf="false" (click)="exportSheet()" class="btn btn-blue with-icon">
                    <i class="icon fa fa-file"></i> Export</button>
            </div>
        </div>
        <div class="bg-box mt-15 vh-100" [ngSwitch]="reporterObj.currentUrl">
            <!-- <iframe [src]='safeURL' frameborder="0" allowfullscreen width="100%" height="100%"></iframe> -->
            <ng-container *ngSwitchCase="'KPIRanking'">
                <ng-container *ngIf="pdfData">
                    <div class="bg-box">
                       <ngx-extended-pdf-viewer [src]="pdfData" [height]="'90vh'" [zoom]="'page-width'" [useBrowserLocale]="true"
                       [textLayer]="true" [showHandToolButton]="true"></ngx-extended-pdf-viewer>
                    </div> 
                 </ng-container>
                <!-- <div *ngIf="reporterObj.currentUrl != 'ReporterStoreKPI'">
                    <ngx-extended-pdf-viewer [src]="pdfData" [height]="'90vh'" [useBrowserLocale]="true" [textLayer]="true"
                        [showHandToolButton]="true">
                    </ngx-extended-pdf-viewer>
                </div> -->
            </ng-container>
            <ng-container *ngSwitchCase="'ReporterStoreKPI'">
                <ng-container *ngIf="showTab">
                    <div *ngIf="reporterObj.currentUrl == 'ReporterStoreKPI'" class="apn-navTab mt-15">
                        <ul class="nav nav-pills mb-2" id="pills-tab" role="tablist">
                            <li class="nav-item" (click)="selectTab('SALES')">
                                <a title="Sales" class="nav-link active" id="pills-Sales-tab" data-toggle="pill"
                                    href="#pills-Sales" role="tab" aria-controls="pills-Sales" aria-selected="true">$ Sales</a>
                            </li>
                            <li class="nav-item" (click)="selectTab('DEPARTMENTS')">
                                <a title="Departments" class="nav-link" id="pills-Departments-tab" data-toggle="pill"
                                    href="#pills-Departments" role="tab" aria-controls="pills-Departments"
                                    aria-selected="false">Departments %</a>
                            </li>
                            <li class="nav-item" (click)="selectTab('SP-CUSTOMER')">
                                <a title="Sales Per Customer" class="nav-link" id="pills-SalesPerCustomer-tab"
                                    data-toggle="pill" href="#pills-SalesPerCustomer" role="tab"
                                    aria-controls="pills-SalesPerCustomer" aria-selected="false">Sales per Customer</a>
                            </li>
                            <li class="nav-item" (click)="selectTab('SALES-SUMMARY')">
                                <a title="Sales Summary" class="nav-link" id="pills-Summary-tab" data-toggle="pill"
                                    href="#pills-Summary" role="tab" aria-controls="pills-Summary" aria-selected="false">$ Sales
                                    Summary</a>
                            </li>
                            <li class="nav-item" (click)="selectTab('SS-YID')">
                                <a title="Sales Summary YID" class="nav-link" id="pills-YID-tab" data-toggle="pill"
                                    href="#pills-YID" role="tab" aria-controls="pills-YID" aria-selected="false">$ Sales Summary YTD</a>
                            </li>
                            <li class="nav-item" (click)="selectTab('SPC-SUMMARY')">
                                <a title="Sales Per Customer Summary" class="nav-link" id="pills-CustomerSummary-tab"
                                    data-toggle="pill" href="#pills-CustomerSummary" role="tab"
                                    aria-controls="pills-CustomerSummary" aria-selected="false">Sales per Customer Summary</a>
                            </li>
                            <li class="nav-item" (click)="selectTab('SPCS-YID')">
                                <a title="Sales Per Customer Summary YID" class="nav-link" id="pills-CustomerSummaryYID-tab"
                                    data-toggle="pill" href="#pills-CustomerSummaryYID" role="tab"
                                    aria-controls="pills-CustomerSummaryYID" aria-selected="false">Sales per Customer Summary YTD</a>
                            </li>
                            <li class="nav-item" (click)="selectTab('SC-OUTLET')">
                                <a title="Sales Chart - Outlet" class="nav-link" id="pills-Chart-tab" data-toggle="pill"
                                    href="#pills-Chart" role="tab" aria-controls="pills-Chart" aria-selected="false">$ Sales Chart- Outlet</a>
                            </li>
                            <li class="nav-item" (click)="selectTab('SC-DEPARTMENT')">
                                <a title="Sales Chart - Department" class="nav-link" id="pills-ChartDepartment-tab"
                                    data-toggle="pill" href="#pills-ChartDepartment" role="tab"
                                    aria-controls="pills-ChartDepartment" aria-selected="false">$ Sales Chart-Department</a>
                            </li>
                        </ul>
        
                        <div class="tab-content" id="pills-tabContent">
                            <div class="tab-pane fade show active" id="pills-Sales" role="tabpanel"
                                aria-labelledby="pills-Sales-tab">
                                <div class="d-flex align-items-center">
                                    <h4 class="title flex-grow-1 mb-0">{{salesByText}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span>(Printed:{{ todaysDate | date: 'dd/MM/yyyy HH:mm' }})</span></h4>
                                </div>
                                <br>
                                <ng-container   *ngIf="reporterObj.currentUrl == reportNameObj.KPIReport">
                                    <div class="d-flex align-items-center"  *ngIf="tableData.SALES.length"> 
                                        <h5 class="title flex-grow-1 mb-0">
                                         Period: {{ f?.startDate?.value | customdatetimeformat }} to {{ f?.endDate?.value | customdatetimeformat }} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>Date Range  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {{dateRangeString}}</span>
                                        </h5>
                                       
                                      </div> 
                                </ng-container>
                                <br>
                                <div class="table-responsive">
                                    <!-- 1 -->
                                    <table id="SALES-TABLE" class="table ctm-table w-100">
                                        <thead>
                                            <tr>
                                                <th></th>
                                                <th>Store Name</th>
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th>Diff</th>
                                                <th>Sales</th>
                                                <th></th>
                                                <th></th>
                                                <th>CC</th>
                                                <th>CC</th>
                                                <th>CC</th>
                                                <th>Sales/Cust</th>
                                                <th>Sales/Cust</th>
                                                <th>Item/Bskt/th>
                                                <th>Item/Bskt</th>
                                                <!-- <th>UNALLOCATED</th>
                                                <th></th>
                                                <th></th> -->
                                                 <ng-container *ngIf="salesReportForm.value.departmentIds?.length">
                                                    <ng-container *ngFor="let department of departments">
                                                        <th></th>
                                                        <th>{{department.DEP_DESC
                                                            }}</th>
                                                        <th></th>
                                                    </ng-container>
                                                </ng-container> 
                                                
                                            </tr>
                                            <tr>
                                                <th></th>
                                                <th></th>
                                                <th>This Year</th>
                                                <th>Budget</th>
                                                <th>Last Year</th>
                                                <th>TY/LY $</th>
                                                <th>TY/LY %</th>
                                                <th>GP %</th>
                                                <th>GP % TY/LY</th>
                                                <th>TY</th>
                                                <th>Budget</th>
                                                <th>LY</th>
                                                <th>TY</th>
                                                <th>TY/LY</th>
                                                <th>TY</th>
                                                <th>TY/LY</th>
                                                <!-- <th>This Year $</th>
                                                <th>Budget $</th>
                                                <th>Last Year $</th> -->
                                                 <ng-container *ngIf="salesReportForm.value.departmentIds?.length"> 
                                                    <ng-container *ngFor="let department of departments">
                                                        <th>This Year $</th>
                                                        <th>Budget $</th>
                                                        <th>Last Year $</th>
                                                    </ng-container>
                                                 </ng-container> 
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <ng-container *ngFor="let salesItem of tableData.SALES;let i = index">
                                                <tr *ngIf="checkConditon(i, tableData.SALES.length,1)">
                                                    <td>{{salesItem.OUTL_OUTLET}}</td>
                                                    <td>{{salesItem.OUTL_DESC}}</td>
                                                    <td class="{{addAlertClass(salesItem.THIS_YEAR)}}">
                                                        {{salesItem.THIS_YEAR  | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                    <td class="{{addAlertClass(salesItem.BUDGET)}}">
                                                        {{salesItem.BUDGET  | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                    <td class="{{addAlertClass(salesItem.Last_YEAR)}}">
                                                        {{salesItem.Last_YEAR  | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                    <td class="{{addAlertClass(salesItem.DIFF_TY_ovr_LY_S)}}">
                                                        {{salesItem.DIFF_TY_ovr_LY_S | currency : 'USD' : 'symbol' : '1.0-0' }}</td>
                                                    <td class="{{addAlertClass(salesItem.DIFF_TY_ovr_LY_S)}}">
                                                        {{salesItem?.SALES_TY_ovr_LY_PERC > 0 ? (salesItem?.SALES_TY_ovr_LY_PERC   | number: "0.1-2")  : '0.00' }}%</td>
                                                    <td class="{{addAlertClass(salesItem.GP_Per)}}">
                                                        {{salesItem?.GP_Per > 0 ? (salesItem?.GP_Per  | number: "0.1-2" ): '0.00' }}% </td>
                                                    <td class="{{addAlertClass(salesItem.GP_PERC_TY_ovr_LY)}}">
                                                        {{salesItem?.GP_PERC_TY_ovr_LY > 0 ? (salesItem?.GP_PERC_TY_ovr_LY   | number: "0.1-2") : '0.00' }}%</td>
                                                    <td class="{{addAlertClass(salesItem.CC_TY)}}">
                                                        {{salesItem.CC_TY | number}}</td>
                                                    <td class="{{addAlertClass(salesItem.CC_BUDGET)}}">
                                                        {{salesItem.CC_BUDGET  | number}}</td>
                                                    <td class="{{addAlertClass(salesItem.CC_LY)}}">
                                                        {{salesItem.CC_LY  | number}}</td>
                                                    <td class="{{addAlertClass(salesItem.SALES_ovr_CUST_TY)}}">
                                                        {{salesItem.SALES_ovr_CUST_TY  | currency: 'USD'}} </td>
                                                    <td class="{{addAlertClass(salesItem.SALES_ovr_CUST_TY_ovr_LY)}}">
                                                        {{salesItem.SALES_ovr_CUST_TY_ovr_LY  | currency: 'USD'}} </td>
                                                    <td class="{{addAlertClass(salesItem.ITEM_ovr_BSKT_TY)}}">
                                                        {{salesItem?.ITEM_ovr_BSKT_TY  | number: "0.1-2"}} </td>
                                                    <td class="{{addAlertClass(salesItem.ITEM_ovr_BSKT_TY_ovr_LY)}}">
                                                        {{salesItem.ITEM_ovr_BSKT_TY_ovr_LY   | number: "0.1-2"}} </td>
                                                    <!-- <td></td>
                                                    <td></td>
                                                    <td></td> -->
                                                     <ng-container *ngIf="salesReportForm.value.departmentIds?.length"> 
                                                        <ng-container *ngFor="let department of departments">
                                                            <td
                                                                class="{{addAlertClassDepartment(department.TRX_DEPARTMENT, 'This_YEAR_Sales', salesItem)}}">
                                                                {{getDepartmentThisYearData(department.TRX_DEPARTMENT, 'This_YEAR_Sales', salesItem, 'dollar')}}
                                                            </td>
                                                            <td
                                                                class="{{addAlertClassDepartment(department.TRX_DEPARTMENT, 'Budget_YEAR_Sales', salesItem)}}">
                                                                {{getDepartmentBudgetData(department.TRX_DEPARTMENT, 'Budget_YEAR_Sales', salesItem, 'dollar')}}
                                                            </td>
                                                            <td
                                                                class="{{addAlertClassDepartment(department.TRX_DEPARTMENT, 'Last_YEAR_Sales', salesItem)}}">
                                                                {{getDepartmentLastYearData(department.TRX_DEPARTMENT, 'Last_YEAR_Sales', salesItem, 'dollar')}}
                                                            </td>
                                                        </ng-container>
                                                    </ng-container>
                                                </tr>
        
        
                                            </ng-container>
        
                                        </tbody>
                                        <tfoot>
                                            <ng-container *ngFor="let salesItem of tableData.SALES;let i = index">
                                                <tr *ngIf="checkConditon(i, tableData.SALES.length,2)">
                                                    <td>{{salesItem.OUTL_OUTLET}}</td>
                                                    <td>{{salesItem.OUTL_DESC}}</td>
                                                    <td class="{{addAlertClass(salesItem.THIS_YEAR)}}">
                                                        {{salesItem.THIS_YEAR  | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                    <td class="{{addAlertClass(salesItem.BUDGET)}}">
                                                        {{salesItem.BUDGET | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                    <td class="{{addAlertClass(salesItem.Last_YEAR)}}">
                                                        {{salesItem.Last_YEAR  | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                    <td class="{{addAlertClass(salesItem.DIFF_TY_ovr_LY_S)}}">
                                                        {{salesItem.DIFF_TY_ovr_LY_S | currency : 'USD' : 'symbol' : '1.0-0' }}</td>
                                                    <td class="{{addAlertClass(salesItem.DIFF_TY_ovr_LY_S)}}">
                                                       {{salesItem?.SALES_TY_ovr_LY_PERC > 0 ? (salesItem?.SALES_TY_ovr_LY_PERC | number: '0.1-2') : '0.00' }}% </td>
                                                    <td class="{{addAlertClass(salesItem.GP_Per)}}">
                                                       {{salesItem?.GP_Per > 0 ? (salesItem?.GP_Per  | number: '0.1-2' ) : '0.00'}}%</td>
                                                    <td class="{{addAlertClass(salesItem.GP_PERC_TY_ovr_LY)}}">
                                                        {{salesItem?.GP_PERC_TY_ovr_LY > 0 ? (salesItem?.GP_PERC_TY_ovr_LY | number: '0.1-2') : '0.00' }}%</td>
                                                    <td class="{{addAlertClass(salesItem.CC_TY)}}">
                                                        {{salesItem.CC_TY  | number}}</td>
                                                    <td class="{{addAlertClass(salesItem.CC_BUDGET)}}">
                                                        {{salesItem.CC_BUDGET  | number}}</td>
                                                    <td class="{{addAlertClass(salesItem.CC_LY)}}">
                                                        {{salesItem.CC_LY | number}}</td>
                                                    <td class="{{addAlertClass(salesItem.SALES_ovr_CUST_TY)}}">
                                                        {{salesItem.SALES_ovr_CUST_TY  | currency: 'USD'}} </td>
                                                    <td class="{{addAlertClass(salesItem.SALES_ovr_CUST_TY_ovr_LY)}}">
                                                        {{salesItem.SALES_ovr_CUST_TY_ovr_LY  | currency: 'USD'}} </td>
                                                    <td class="{{addAlertClass(salesItem.ITEM_ovr_BSKT_TY)}}">
                                                        {{salesItem.ITEM_ovr_BSKT_TY    | number: "0.1-2"}} </td>
                                                    <td class="{{addAlertClass(salesItem.ITEM_ovr_BSKT_TY_ovr_LY)}}">
                                                        {{salesItem.ITEM_ovr_BSKT_TY_ovr_LY  | number: "0.1-2"}} </td>
                                                    <!-- <td></td>
                                                            <td></td>
                                                            <td></td> -->
                                                     <ng-container *ngIf="salesReportForm.value.departmentIds?.length">  
                                                        <ng-container *ngFor="let department of departments">
                                                            <td
                                                                class="{{addAlertClassDepartment(department.TRX_DEPARTMENT, 'This_YEAR_Sales', salesItem)}}">
                                                                {{getDepartmentThisYearData(department.TRX_DEPARTMENT, 'This_YEAR_Sales', salesItem, 'dollar')}}
                                                            </td>
                                                            <td
                                                                class="{{addAlertClassDepartment(department.TRX_DEPARTMENT, 'Budget_YEAR_Sales', salesItem)}}">
                                                                {{getDepartmentBudgetData(department.TRX_DEPARTMENT, 'Budget_YEAR_Sales', salesItem, 'dollar')}}
                                                            </td>
                                                            <td
                                                                class="{{addAlertClassDepartment(department.TRX_DEPARTMENT, 'Last_YEAR_Sales', salesItem)}}">
                                                                {{getDepartmentLastYearData(department.TRX_DEPARTMENT, 'Last_YEAR_Sales', salesItem, 'dollar')}}
                                                            </td>
                                                       </ng-container>
                                                     </ng-container>       
                                                </tr>
        
        
                                            </ng-container>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="pills-Departments" role="tabpanel"
                                aria-labelledby="pills-Departments-tab">
                                
                                <div class="d-flex align-items-center">
                                    <h4 class="title flex-grow-1 mb-0">{{salesByText}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span>(Printed:{{ todaysDate | date: 'dd/MM/yyyy HH:mm' }})</span></h4>
                                </div>
                                <br>
                                <ng-container   *ngIf="reporterObj.currentUrl == reportNameObj.KPIReport">
                                    <div class="d-flex align-items-center"  *ngIf="tableData.SALES.length"> 
                                        <h5 class="title flex-grow-1 mb-0">
                                         Period: {{ f?.startDate?.value | customdatetimeformat }} to {{ f?.endDate?.value | customdatetimeformat }} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>Date Range &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {{dateRangeString}}</span>
                                        </h5>
                                      </div> 
                                </ng-container>
                                <br>
                                <!-- 2 -->
                                <div class="">
                                    <table id="DEPARTMENTS-TABLE" class="table ctm-table table-responsive w-100">
                                        <thead>
                                            <tr>
                                                <th></th>
                                                <th>Store Name</th>
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th>Diff</th>
                                                <th>Sales</th>
                                                <th></th>
                                                <th></th>
                                                <th>CC</th>
                                                <th>CC</th>
                                                <th>CC</th>
                                                <th>Sales/Cust</th>
                                                <th>Sales/Cust</th>
                                                <th>Item/Bskt/th>
                                                <th>Item/Bskt</th>
                                                <!-- <th>UNALLOCATED</th>
                                                <th></th>
                                                <th></th> -->
                                                <ng-container *ngIf="salesReportForm.value.departmentIds?.length">
                                                    <ng-container *ngFor="let department of departments">
                                                        <th></th>
                                                        <th>{{department.DEP_DESC
                                                            }}</th>
                                                        <th></th>
                                                    </ng-container>
                                                </ng-container> 
                                            </tr>
                                            <tr>
                                                <th></th>
                                                <th></th>
                                                <th>This Year</th>
                                                <th>Budget</th>
                                                <th>Last Year</th>
                                                <th>TY/LY $</th>
                                                <th>TY/LY %</th>
                                                <th>GP %</th>
                                                <th>GP % TY/LY</th>
                                                <th>TY</th>
                                                <th>Budget</th>
                                                <th>LY</th>
                                                <th>TY</th>
                                                <th>TY/LY</th>
                                                <th>TY</th>
                                                <th>TY/LY</th>
                                                <!-- <th>This Year $</th>
                                                <th>Budget $</th>
                                                <th>Last Year $</th> -->
                                                <ng-container *ngIf="salesReportForm.value.departmentIds?.length">
                                                    <ng-container *ngFor="let department of departments">
                                                        <th>This Year $</th>
                                                        <th>Budget $</th>
                                                        <th>Last Year $</th>
                                                    </ng-container>
                                                </ng-container>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <ng-container *ngFor="let item of tableData.DEPARTMENTS;let i = index">
                                                <tr>
                                                    <td>{{item.OUTL_OUTLET}}</td>
                                                    <td>{{item.OUTL_DESC}}</td>
                                                    <td class="{{addAlertClass(item.THIS_YEAR)}}">
                                                        {{item.THIS_YEAR  | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                    <td class="{{addAlertClass(item.BUDGET)}}">
                                                        {{item.BUDGET  | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                    <td class="{{addAlertClass(item.Last_YEAR)}}">
                                                        {{item.Last_YEAR  | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                    <td class="{{addAlertClass(item.DIFF_TY_ovr_LY_S)}}">
                                                        {{item.DIFF_TY_ovr_LY_S  | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                    <td class="{{addAlertClass(item.DIFF_TY_ovr_LY_S)}}">
                                                        {{item?.SALES_TY_ovr_LY_PERC > 0 ? (item?.SALES_TY_ovr_LY_PERC | number: "0.1-2") : '0.00' }}% </td>
                                                    <td class="{{addAlertClass(item.GP_Per)}}">
                                                        {{item?.GP_Per > 0 ? ( item?.GP_Per | number: "0.1-2") : '0.00' }}%
                                                    </td>
                                                    <td class="{{addAlertClass(item.GP_PERC_TY_ovr_LY)}}">
                                                        {{item?.GP_PERC_TY_ovr_LY > 0 ? ( item?.GP_PERC_TY_ovr_LY | number: "0.1-2") : '0.00' }}% </td>
                                                    <td class="{{addAlertClass(item.CC_TY)}}">{{item.CC_TY  | currency: 'USD'}}
                                                    </td>
                                                    <td class="{{addAlertClass(item.CC_BUDGET)}}">
                                                        {{item.CC_BUDGET  | number}}</td>
                                                    <td class="{{addAlertClass(item.CC_LY)}}">{{item.CC_LY  | number}}
                                                    </td>
                                                    <td class="{{addAlertClass(item.SALES_ovr_CUST_TY)}}">
                                                        {{item.SALES_ovr_CUST_TY  | currency: 'USD'}} </td>
                                                    <td class="{{addAlertClass(item.SALES_ovr_CUST_TY_ovr_LY)}}">
                                                        {{item.SALES_ovr_CUST_TY_ovr_LY  | currency: 'USD'}} </td>
                                                    <td class="{{addAlertClass(item.ITEM_ovr_BSKT_TY)}}">
                                                        {{item.ITEM_ovr_BSKT_TY   | number: '0.1-2'}} </td>
                                                    <td class="{{addAlertClass(item.ITEM_ovr_BSKT_TY_ovr_LY)}}">
                                                        {{item.ITEM_ovr_BSKT_TY_ovr_LY  | number: '0.1-2'}} </td>
                                                    <!-- <td></td>
                                                    <td></td>
                                                    <td></td> -->
                                                    <ng-container *ngIf="salesReportForm.value.departmentIds?.length">
                                                        <ng-container *ngFor="let department of departments">
                                                            <td
                                                                class="{{addAlertClassDepartment(department.TRX_DEPARTMENT, 'This_YEAR_Per', item)}}">
                                                                {{getDepartmentThisYearData(department.TRX_DEPARTMENT, 'This_YEAR_Per', item, 'percent')}}
                                                            </td>
                                                            <td
                                                                class="{{addAlertClassDepartment(department.TRX_DEPARTMENT, 'Budget_YEAR_Per', item)}}">
                                                                {{getDepartmentBudgetData(department.TRX_DEPARTMENT, 'Budget_YEAR_Per', item, 'percent')}}
                                                            </td>
                                                            <td
                                                                class="{{addAlertClassDepartment(department.TRX_DEPARTMENT, 'Last_YEAR_Per', item)}}">
                                                                {{getDepartmentLastYearData(department.TRX_DEPARTMENT, 'Last_YEAR_Per', item, 'percent')}}
                                                            </td>
                                                        </ng-container>
                                                    </ng-container>
                                                </tr>
                                            </ng-container>
        
                                        </tbody>
        
                                    </table>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="pills-SalesPerCustomer" role="tabpanel"
                                aria-labelledby="pills-SalesPerCustomer-tab">
                                <div class="d-flex align-items-center">
                                    <h4 class="title flex-grow-1 mb-0">{{salesByText}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span>(Printed:{{ todaysDate | date: 'dd/MM/yyyy HH:mm' }})</span></h4>
                                </div>
                                <br>
                                <ng-container   *ngIf="reporterObj.currentUrl == reportNameObj.KPIReport">
                                    <div class="d-flex align-items-center"  *ngIf="tableData.SALES.length"> 
                                        <h5 class="title flex-grow-1 mb-0">
                                         Period: {{ f?.startDate?.value | customdatetimeformat }} to {{ f?.endDate?.value | customdatetimeformat }} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span>Date Range &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {{dateRangeString}}</span>
                                        </h5>
                                      </div> 
                                </ng-container>
                                <br>
                                <!-- <div class="table-responsive"> -->
                                    <!-- 3 -->
                                    <div class="">
                                        <table id="SP-CUSTOMER-TABLE" class="table ctm-table table-responsive w-100">
                                            <thead>
                                                <tr>
                                                    <th></th>
                                                    <th>Store Name</th>
                                                    <th></th>
                                                    <th></th>
                                                    <th></th>
                                                    <th>Diff</th>
                                                    <th>Sales</th>
                                                    <th></th>
                                                    <th></th>
                                                    <th>CC</th>
                                                    <th>CC</th>
                                                    <th>CC</th>
                                                    <th>Sales/Cust</th>
                                                    <th>Sales/Cust</th>
                                                    <th>Item/Bskt/th>
                                                    <th>Item/Bskt</th>
                                                    <!-- <th>UNALLOCATED</th>
                                                                                    <th></th>
                                                                                    <th></th> -->
                                                    <ng-container *ngIf="salesReportForm.value.departmentIds?.length">
                                                        <ng-container *ngFor="let department of departments">
                                                            <th></th>
                                                            <th>{{department.DEP_DESC}}</th>
                                                            <th></th>
                                                        </ng-container>
                                                    </ng-container>
                                                </tr>
                                                <tr>
                                                    <th></th>
                                                    <th></th>
                                                    <th>This Year</th>
                                                    <th>Budget</th>
                                                    <th>Last Year</th>
                                                    <th>TY/LY $</th>
                                                    <th>TY/LY %</th>
                                                    <th>GP %</th>
                                                    <th>GP % TY/LY</th>
                                                    <th>TY</th>
                                                    <th>Budget</th>
                                                    <th>LY</th>
                                                    <th>TY</th>
                                                    <th>TY/LY</th>
                                                    <th>TY</th>
                                                    <th>TY/LY</th>
                                                    <!-- <th>This Year $</th>
                                                                                    <th>Budget $</th>
                                                                                    <th>Last Year $</th> -->
                                                    <ng-container *ngIf="salesReportForm.value.departmentIds?.length">
                                                        <ng-container *ngFor="let department of departments">
                                                            <th>This Year $</th>
                                                            <th>Budget $</th>
                                                            <th>Last Year $</th>
                                                        </ng-container>
                                                    </ng-container>                                
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <ng-container *ngFor="let item of tableData.SP_CUSTOMER;let i = index">
                                                    <tr *ngIf="checkConditon(i, tableData.SP_CUSTOMER.length,1)">
                                                        <td>{{item.OUTL_OUTLET}}</td>
                                                        <td>{{item.OUTL_DESC}}</td>
                                                        <td class="{{addAlertClass(item.THIS_YEAR)}}">
                                                            {{item.THIS_YEAR | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                        <td class="{{addAlertClass(item.BUDGET)}}">
                                                            {{item.BUDGET  | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                        <td class="{{addAlertClass(item.Last_YEAR)}}">
                                                            {{item.Last_YEAR  | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                        <td class="{{addAlertClass(item.DIFF_TY_ovr_LY_S)}}">
                                                            {{item.DIFF_TY_ovr_LY_S  | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                        <td class="{{addAlertClass(item.DIFF_TY_ovr_LY_S)}}">
                                                            {{item?.SALES_TY_ovr_LY_PERC > 0 ? ( item?.SALES_TY_ovr_LY_PERC | number: "0.1-2") : '0.00' }}%   </td>
                                                        <td class="{{addAlertClass(item.GP_Per)}}">
                                                            {{item?.GP_Per > 0 ? ( item?.GP_Per | number: "0.1-2") : '0.00' }}%
                                                        </td>
                                                        <td class="{{addAlertClass(item.GP_PERC_TY_ovr_LY)}}">
                                                            {{item?.GP_PERC_TY_ovr_LY > 0 ? ( item?.GP_PERC_TY_ovr_LY | number: "0.1-2") : '0.00' }}% </td>
                                                        <td class="{{addAlertClass(item.CC_TY)}}">
                                                            {{item.CC_TY  | number}}</td>
                                                        <td class="{{addAlertClass(item.CC_BUDGET)}}">
                                                            {{item.CC_BUDGET  | number}}</td>
                                                        <td class="{{addAlertClass(item.CC_LY)}}">
                                                            {{item.CC_LY  | number}}</td>
                                                        <td class="{{addAlertClass(item.SALES_ovr_CUST_TY)}}">
                                                            {{item.SALES_ovr_CUST_TY  | currency: 'USD'}}
                                                        </td>
                                                        <td class="{{addAlertClass(item.SALES_ovr_CUST_TY_ovr_LY)}}">
                                                            {{item.SALES_ovr_CUST_TY_ovr_LY  | currency: 'USD'}} </td>
                                                        <td class="{{addAlertClass(item.ITEM_ovr_BSKT_TY)}}">
                                                            {{item.ITEM_ovr_BSKT_TY   | number: '0.1-2'}} </td>
                                                        <td class="{{addAlertClass(item.ITEM_ovr_BSKT_TY_ovr_LY)}}">
                                                            {{item.ITEM_ovr_BSKT_TY_ovr_LY  | number: '0.1-2'}} </td>
                                                            
                                                        <ng-container *ngIf="salesReportForm.value.departmentIds?.length">
                                                            <ng-container *ngFor="let department of departments">
                                                                <td
                                                                    class="{{addAlertClassDepartment(department.TRX_DEPARTMENT, 'This_YEAR_Cust', item)}}">
                                                                    {{getDepartmentThisYearData(department.TRX_DEPARTMENT, 'This_YEAR_Cust', item,'dollar')}}
                                                                </td>
                                                                <td
                                                                    class="{{addAlertClassDepartment(department.TRX_DEPARTMENT, 'Budget_YEAR_Cust', item)}}">
                                                                    {{getDepartmentBudgetData(department.TRX_DEPARTMENT, 'Budget_YEAR_Cust', item,'dollar')}}
                                                                </td>
                                                                <td
                                                                    class="{{addAlertClassDepartment(department.TRX_DEPARTMENT, 'Last_YEAR_Cust', item)}}">
                                                                    {{getDepartmentLastYearData(department.TRX_DEPARTMENT, 'Last_YEAR_Cust', item,'dollar')}}
                                                                </td>
                                                            </ng-container>
                                                        </ng-container>
                                                    </tr>
        
        
                                                </ng-container>
        
                                            </tbody>
                                            <tfoot>
                                                <ng-container *ngFor="let item of tableData.SP_CUSTOMER;let i = index">
                                                    <tr *ngIf="checkConditon(i, tableData.SP_CUSTOMER.length,2)">
                                                        <td>{{item.OUTL_OUTLET}}</td>
                                                        <td>{{item.OUTL_DESC}}</td>
                                                        <td class="{{addAlertClass(item.THIS_YEAR)}}">
                                                            {{item.THIS_YEAR | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                        <td class="{{addAlertClass(item.BUDGET)}}">
                                                            {{item.BUDGET  | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                        <td class="{{addAlertClass(item.Last_YEAR)}}">
                                                            {{item.Last_YEAR  | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                        <td class="{{addAlertClass(item.DIFF_TY_ovr_LY_S)}}">
                                                            {{item.DIFF_TY_ovr_LY_S  | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                        <td class="{{addAlertClass(item.DIFF_TY_ovr_LY_S)}}">
                                                            {{item.SALES_TY_ovr_LY_PERC > 0 ? ( item.SALES_TY_ovr_LY_PERC | number: "0.1-2") : '0.00' }}% </td>
                                                        <td class="{{addAlertClass(item.GP_Per)}}">
                                                            {{item.GP_Per > 0 ? ( item.GP_Per | number: "0.1-2") : '0.00%' }}
                                                        </td>
                                                        <td class="{{addAlertClass(item.GP_PERC_TY_ovr_LY)}}">
                                                            {{item?.GP_PERC_TY_ovr_LY > 0  ? ( item.GP_PERC_TY_ovr_LY | number: "0.1-2") : '0.00' }}%</td>
                                                        <td class="{{addAlertClass(item.CC_TY)}}">
                                                            {{item.CC_TY | number}}</td>
                                                        <td class="{{addAlertClass(item.CC_BUDGET)}}">
                                                            {{item.CC_BUDGET  | number}}</td>
                                                        <td class="{{addAlertClass(item.CC_LY)}}">
                                                            {{item.CC_LY  | number}}</td>
                                                        <td class="{{addAlertClass(item.SALES_ovr_CUST_TY)}}">
                                                            {{item.SALES_ovr_CUST_TY  | currency: 'USD'}}
                                                        </td>
                                                        <td class="{{addAlertClass(item.SALES_ovr_CUST_TY_ovr_LY)}}">
                                                            {{item.SALES_ovr_CUST_TY_ovr_LY  | currency: 'USD'}} </td>
                                                        <td class="{{addAlertClass(item.ITEM_ovr_BSKT_TY)}}">
                                                            {{item.ITEM_ovr_BSKT_TY   | number: '0.1-2'}} </td>
                                                        <td class="{{addAlertClass(item.ITEM_ovr_BSKT_TY_ovr_LY)}}">
                                                            {{item.ITEM_ovr_BSKT_TY_ovr_LY  | number: '0.1-2'}} </td>

                                                        <ng-container *ngIf="salesReportForm.value.departmentIds?.length">
                                                            <ng-container *ngFor="let department of departments">
                                                                <td
                                                                    class="{{addAlertClassDepartment(department.TRX_DEPARTMENT, 'This_YEAR_Cust', item)}}">
                                                                    {{getDepartmentThisYearData(department.TRX_DEPARTMENT, 'This_YEAR_Cust', item,'dollar')}}
                                                                </td>
                                                                <td
                                                                    class="{{addAlertClassDepartment(department.TRX_DEPARTMENT, 'Budget_YEAR_Cust', item)}}">
                                                                    {{getDepartmentBudgetData(department.TRX_DEPARTMENT, 'Budget_YEAR_Cust', item,'dollar')}}
                                                                </td>
                                                                <td
                                                                    class="{{addAlertClassDepartment(department.TRX_DEPARTMENT, 'Last_YEAR_Cust', item)}}">
                                                                    {{getDepartmentLastYearData(department.TRX_DEPARTMENT, 'Last_YEAR_Cust', item,'dollar')}}
                                                                </td>
                                                            </ng-container>
                                                        </ng-container>
                                                    </tr>
                                                </ng-container>
                                            </tfoot>
                                        </table>
                                    </div>
        
                                <!-- </div> -->
                            </div>
                            <div class="tab-pane fade" id="pills-Summary" role="tabpanel" aria-labelledby="pills-Summary-tab">
                                <!-- <div class="table-responsive"> -->
                                    <!-- 4 -->
                                    <div class="">
                                        <table id="SALES-SUMMARY-TABLE" class="table ctm-table table-responsive w-100">
                                            <thead>
                                                <tr>
                                                    <th></th>
                                                    <th>Store Name</th>
                                                    <th></th>
                                                    <th></th>
                                                    <th></th>
                                                    <th>Diff</th>
                                                    <th>Sales</th>
                                                    <th></th>
                                                    <th></th>
                                                    <th>CC</th>
                                                    <th>CC</th>
                                                    <th>CC</th>
                                                    <th>Sales/Cust</th>
                                                    <th>Sales/Cust</th>
                                                    <th>Item/Bskt/th>
                                                    <th>Item/Bskt</th>
                                                    <!-- <th>UNALLOCATED</th>
                                                    <th></th>
                                                    <th></th> -->
                                                    <ng-container *ngIf="salesReportForm.value.departmentIds?.length">
                                                        <ng-container *ngFor="let department of departments">
                                                            <th></th>
                                                            <th>{{department.DEP_DESC
                                                                }}</th>
                                                            <th></th>
                                                        </ng-container>
                                                    </ng-container>
                                                </tr>
                                                <tr>
                                                    <th></th>
                                                    <th></th>
                                                    <th>This Year</th>
                                                    <th>Budget</th>
                                                    <th>Last Year</th>
                                                    <th>TY/LY $</th>
                                                    <th>TY/LY %</th>
                                                    <th>GP %</th>
                                                    <th>GP % TY/LY</th>
                                                    <th>TY</th>
                                                    <th>Budget</th>
                                                    <th>LY</th>
                                                    <th>TY</th>
                                                    <th>TY/LY</th>
                                                    <th>TY</th>
                                                    <th>TY/LY</th>
                                                    <!-- <th>This Year $</th>
                                                    <th>Budget $</th>
                                                    <th>Last Year $</th> -->
                                                    <ng-container *ngIf="salesReportForm.value.departmentIds?.length">
                                                        <ng-container *ngFor="let department of departments">
                                                            <th>This Year $</th>
                                                            <th>Budget $</th>
                                                            <th>Last Year $</th>
                                                        </ng-container>
                                                    </ng-container>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <ng-container *ngFor="let item of tableData.SALES_SUMMARY;let i = index">
                                                    <tr>
                                                        <td>{{item.OUTL_OUTLET}}</td>
                                                        <td>{{item.OUTL_DESC}}</td>
                                                        <td class="{{addAlertClass(item.THIS_YEAR)}}">
                                                            {{item.THIS_YEAR  | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                        <td class="{{addAlertClass(item.BUDGET)}}">
                                                            {{item.BUDGET  | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                        <td class="{{addAlertClass(item.Last_YEAR)}}">
                                                            {{item.Last_YEAR  | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                        <td class="{{addAlertClass(item.DIFF_TY_ovr_LY_S)}}">
                                                            {{item.DIFF_TY_ovr_LY_S  | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                        <td class="{{addAlertClass(item.DIFF_TY_ovr_LY_S)}}">
                                                            {{item?.SALES_TY_ovr_LY_PERC > 0 ? ( item?.SALES_TY_ovr_LY_PERC | number: "0.1-2") : '0.00' }}%</td>
                                                        <td class="{{addAlertClass(item.GP_Per)}}">
                                                            {{item?.GP_Per > 0 ? (item.GP_Per | number: "0.1-2") : '0.00' }}%
                                                        </td>
                                                        <td class="{{addAlertClass(item.GP_PERC_TY_ovr_LY)}}">
                                                            {{item?.GP_PERC_TY_ovr_LY > 0 ? (item?.GP_PERC_TY_ovr_LY | number: "0.1-2") : '0.00' }}%</td>
                                                        <td class="{{addAlertClass(item.CC_TY)}}">
                                                            {{item.CC_TY  | number}}</td>
                                                        <td class="{{addAlertClass(item.CC_BUDGET)}}">
                                                            {{item.CC_BUDGET  | number}}</td>
                                                        <td class="{{addAlertClass(item.CC_LY)}}">
                                                            {{item.CC_LY  | number}}</td>
                                                        <td class="{{addAlertClass(item.SALES_ovr_CUST_TY)}}">
                                                            {{item.SALES_ovr_CUST_TY  | currency: 'USD'}} </td>
                                                        <td class="{{addAlertClass(item.SALES_ovr_CUST_TY_ovr_LY)}}">
                                                            {{item.SALES_ovr_CUST_TY_ovr_LY  | currency: 'USD'}} </td>
                                                        <td class="{{addAlertClass(item.ITEM_ovr_BSKT_TY)}}">
                                                            {{item.ITEM_ovr_BSKT_TY   | number: '0.1-2'}} </td>
                                                        <td class="{{addAlertClass(item.ITEM_ovr_BSKT_TY_ovr_LY)}}">
                                                            {{item.ITEM_ovr_BSKT_TY_ovr_LY  | number: '0.1-2'}} </td>
                                                        <!-- <td></td>
                                                        <td></td>
                                                        <td></td> -->
                                                        <ng-container *ngIf="salesReportForm.value.departmentIds?.length">
                                                            <ng-container *ngFor="let department of departments">
                                                                <td
                                                                    class="{{addAlertClassDepartment(department.TRX_DEPARTMENT, 'This_YEAR_Sales', item)}}">
                                                                    {{getDepartmentThisYearData(department.TRX_DEPARTMENT, 'This_YEAR_Sales', item, 'dollar')}}
                                                                </td>
                                                                <td
                                                                    class="{{addAlertClassDepartment(department.TRX_DEPARTMENT, 'Budget_YEAR_Sales', item)}}">
                                                                    {{getDepartmentBudgetData(department.TRX_DEPARTMENT, 'Budget_YEAR_Sales', item, 'dollar')}}
                                                                </td>
                                                                <td
                                                                    class="{{addAlertClassDepartment(department.TRX_DEPARTMENT, 'Last_YEAR_Sales', item)}}">
                                                                    {{getDepartmentLastYearData(department.TRX_DEPARTMENT, 'Last_YEAR_Sales', item, 'dollar')}}
                                                                </td>
                                                            </ng-container>
                                                        </ng-container>
                                                    </tr>
                                                </ng-container>
        
                                            </tbody>
        
                                        </table>
                                    </div>
        
                                <!-- </div> -->
                            </div>
                            <div class="tab-pane fade" id="pills-YID" role="tabpanel" aria-labelledby="pills-YID-tab">
                                <!-- 5 -->
                                <div class="">
                                    <table id="SS-YID-TABLE" class="table ctm-table table-responsive w-100">
                                        <thead>
                                            <tr>
                                                <th></th>
                                                <th>Store Name</th>
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th>Diff</th>
                                                <th>Sales</th>
                                                <th></th>
                                                <th></th>
                                                <th>CC</th>
                                                <th>CC</th>
                                                <th>CC</th>
                                                <th>Sales/Cust</th>
                                                <th>Sales/Cust</th>
                                                <th>Item/Bskt/th>
                                                <th>Item/Bskt</th>
                                                <!-- <th>UNALLOCATED</th>
                                                <th></th>
                                                <th></th> -->
                                                <ng-container *ngIf="salesReportForm.value.departmentIds?.length">
                                                    <ng-container *ngFor="let department of departments">
                                                        <th></th>
                                                        <th>{{department.DEP_DESC
                                                            }}</th>
                                                        <th></th>
                                                    </ng-container>
                                                </ng-container>
                                            </tr>
                                            <tr>
                                                <th></th>
                                                <th></th>
                                                <th>This Year</th>
                                                <th>Budget</th>
                                                <th>Last Year</th>
                                                <th>TY/LY $</th>
                                                <th>TY/LY %</th>
                                                <th>GP %</th>
                                                <th>GP % TY/LY</th>
                                                <th>TY</th>
                                                <th>Budget</th>
                                                <th>LY</th>
                                                <th>TY</th>
                                                <th>TY/LY</th>
                                                <th>TY</th>
                                                <th>TY/LY</th>
                                                <!-- <th>This Year $</th>
                                                <th>Budget $</th>
                                                <th>Last Year $</th> -->
                                                <ng-container *ngIf="salesReportForm.value.departmentIds?.length">
                                                    <ng-container *ngFor="let department of departments">
                                                        <th>This Year $</th>
                                                        <th>Budget $</th>
                                                        <th>Last Year $</th>
                                                    </ng-container>
                                                </ng-container>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <ng-container *ngFor="let item of tableData.SS_YID;let i = index">
                                                <tr>
                                                    <td>{{item.OUTL_OUTLET}}</td>
                                                    <td>{{item.OUTL_DESC}}</td>
                                                    <td class="{{addAlertClass(item.THIS_YEAR)}}">
                                                        {{item.THIS_YEAR  | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                    <td class="{{addAlertClass(item.BUDGET)}}">
                                                        {{item.BUDGET  | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                    <td class="{{addAlertClass(item.Last_YEAR)}}">
                                                        {{item.Last_YEAR  | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                    <td class="{{addAlertClass(item.DIFF_TY_ovr_LY_S)}}">
                                                        {{item.DIFF_TY_ovr_LY_S  | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                    <td class="{{addAlertClass(item.DIFF_TY_ovr_LY_S)}}">
                                                        {{item?.SALES_TY_ovr_LY_PERC > 0 ? ( item?.SALES_TY_ovr_LY_PERC | number: "0.1-2") : '0.00' }}% </td>
                                                    <td class="{{addAlertClass(item.GP_Per)}}">
                                                        {{item?.GP_Per > 0 ? (item.GP_Per | number: "0.1-2") : '0.00' }}%</td>
                                                    <td class="{{addAlertClass(item.GP_PERC_TY_ovr_LY)}}">
                                                        {{item?.GP_PERC_TY_ovr_LY > 0 ? ( item?.GP_PERC_TY_ovr_LY | number: "0.1-2") : '0.00' }}% </td>
                                                    <td class="{{addAlertClass(item.CC_TY)}}">{{item.CC_TY  | number}}
                                                    </td>
                                                    <td class="{{addAlertClass(item.CC_BUDGET)}}">
                                                        {{item.CC_BUDGET  | number}}</td>
                                                    <td class="{{addAlertClass(item.CC_LY)}}">{{item.CC_LY  | number}}
                                                    </td>
                                                    <td class="{{addAlertClass(item.SALES_ovr_CUST_TY)}}">
                                                        {{item.SALES_ovr_CUST_TY  | currency: 'USD'}} </td>
                                                    <td class="{{addAlertClass(item.SALES_ovr_CUST_TY_ovr_LY)}}">
                                                        {{item.SALES_ovr_CUST_TY_ovr_LY  | currency: 'USD'}} </td>
                                                    <td class="{{addAlertClass(item.ITEM_ovr_BSKT_TY)}}">
                                                        {{item.ITEM_ovr_BSKT_TY   | number: '0.1-2'}} </td>
                                                    <td class="{{addAlertClass(item.ITEM_ovr_BSKT_TY_ovr_LY)}}">
                                                        {{item.ITEM_ovr_BSKT_TY_ovr_LY   | number: '0.1-2'}} </td>
                                                    <!-- <td></td>
                                                    <td></td>
                                                    <td></td> -->
                                                    <ng-container *ngIf="salesReportForm.value.departmentIds?.length">
                                                        <ng-container *ngFor="let department of departments">
                                                            <td
                                                                class="{{addAlertClassDepartment(department.TRX_DEPARTMENT, 'This_YEAR_Sales', item)}}">
                                                                {{getDepartmentThisYearData(department.TRX_DEPARTMENT, 'This_YEAR_Sales', item, 'dollar')}}
                                                            </td>
                                                            <td
                                                                class="{{addAlertClassDepartment(department.TRX_DEPARTMENT, 'Budget_YEAR_Sales', item)}}">
                                                                {{getDepartmentBudgetData(department.TRX_DEPARTMENT, 'Budget_YEAR_Sales', item, 'dollar')}}
                                                            </td>
                                                            <td
                                                                class="{{addAlertClassDepartment(department.TRX_DEPARTMENT, 'Last_YEAR_Sales', item)}}">
                                                                {{getDepartmentLastYearData(department.TRX_DEPARTMENT, 'Last_YEAR_Sales', item, 'dollar')}}
                                                            </td>
                                                        </ng-container>
                                                    </ng-container>
                                                    
                                                </tr>
        
        
                                            </ng-container>
        
                                        </tbody>
        
                                    </table>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="pills-CustomerSummary" role="tabpanel"
                                aria-labelledby="pills-CustomerSummary-tab">
                                <div class="">
                                    <table id="SPC-SUMMARY-TABLE" class="table ctm-table table-responsive w-100">
                                        <thead>
                                            <tr>
                                                <th></th>
                                                <th>Store Name</th>
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th>Diff</th>
                                                <th>Sales</th>
                                                <th></th>
                                                <th></th>
                                                <th>CC</th>
                                                <th>CC</th>
                                                <th>CC</th>
                                                <th>Sales/Cust</th>
                                                <th>Sales/Cust</th>
                                                <th>Item/Bskt/th>
                                                <th>Item/Bskt</th>
                                                <!-- <th>UNALLOCATED</th>
                                                                            <th></th>
                                                                            <th></th> -->
                                                <ng-container *ngIf="salesReportForm.value.departmentIds?.length">
                                                    <ng-container *ngFor="let department of departments">
                                                        <th></th>
                                                        <th>{{department.DEP_DESC
                                                                                        }}</th>
                                                        <th></th>
                                                    </ng-container>  
                                                </ng-container>
                                                
                                            </tr>
                                            <tr>
                                                <th></th>
                                                <th></th>
                                                <th>This Year</th>
                                                <th>Budget</th>
                                                <th>Last Year</th>
                                                <th>TY/LY $</th>
                                                <th>TY/LY %</th>
                                                <th>GP %</th>
                                                <th>GP % TY/LY</th>
                                                <th>TY</th>
                                                <th>Budget</th>
                                                <th>LY</th>
                                                <th>TY</th>
                                                <th>TY/LY</th>
                                                <th>TY</th>
                                                <th>TY/LY</th>
                                                <!-- <th>This Year $</th>
                                                                            <th>Budget $</th>
                                                                            <th>Last Year $</th> -->
                                                <ng-container *ngIf="salesReportForm.value.departmentIds?.length">
                                                    <ng-container *ngFor="let department of departments">
                                                        <th>This Year $</th>
                                                        <th>Budget $</th>
                                                        <th>Last Year $</th>
                                                    </ng-container>  
                                                </ng-container>
                                               
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <ng-container *ngFor="let item of tableData.SPC_SUMMARY;let i = index">
                                                <tr>
                                                    <td>{{item.OUTL_OUTLET}}</td>
                                                    <td>{{item.OUTL_DESC}}</td>
                                                    <td class="{{addAlertClass(item.THIS_YEAR)}}">
                                                        {{item.THIS_YEAR | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                    <td class="{{addAlertClass(item.BUDGET)}}">
                                                        {{item.BUDGET  | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                    <td class="{{addAlertClass(item.Last_YEAR)}}">
                                                        {{item.Last_YEAR  | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                    <td class="{{addAlertClass(item.DIFF_TY_ovr_LY_S)}}">
                                                        {{item.DIFF_TY_ovr_LY_S  | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                    <td class="{{addAlertClass(item.DIFF_TY_ovr_LY_S)}}">
                                                        {{item?.SALES_TY_ovr_LY_PERC > 0 ? ( item?.SALES_TY_ovr_LY_PERC | number: "0.1-2") : '0.00' }}% </td>
                                                    <td class="{{addAlertClass(item.GP_Per)}}">{{item?.GP_Per > 0 ? ( item?.GP_Per | number: "0.1-2") : '0.00' }}% </td>
                                                    <td class="{{addAlertClass(item.GP_PERC_TY_ovr_LY)}}">
                                                        {{item?.GP_PERC_TY_ovr_LY > 0 ? ( item?.GP_PERC_TY_ovr_LY | number: "0.1-2") : '0.00' }}% 
                                                    </td>
                                                    <td class="{{addAlertClass(item.CC_TY)}}">{{item.CC_TY  | number}}
                                                    </td>
                                                    <td class="{{addAlertClass(item.CC_BUDGET)}}">
                                                        {{item.CC_BUDGET  | number}}</td>
                                                    <td class="{{addAlertClass(item.CC_LY)}}">{{item.CC_LY  | number}}
                                                    </td>
                                                    <td class="{{addAlertClass(item.SALES_ovr_CUST_TY)}}">
                                                        {{item.SALES_ovr_CUST_TY  | currency: 'USD'}} </td>
                                                    <td class="{{addAlertClass(item.SALES_ovr_CUST_TY_ovr_LY)}}">
                                                        {{item.SALES_ovr_CUST_TY_ovr_LY  | currency: 'USD'}} </td>
                                                    <td class="{{addAlertClass(item.ITEM_ovr_BSKT_TY)}}">
                                                        {{item.ITEM_ovr_BSKT_TY   | number: '0.1-2'}} </td>
                                                    <td class="{{addAlertClass(item.ITEM_ovr_BSKT_TY_ovr_LY)}}">
                                                        {{item.ITEM_ovr_BSKT_TY_ovr_LY  | number: '0.1-2'}} </td>
                                                    <!-- <td></td>
                                                                                <td></td>
                                                                                <td></td> -->
                                                    <ng-container *ngIf="salesReportForm.value.departmentIds?.length">
                                                        <ng-container *ngFor="let department of departments">
                                                            <td
                                                                class="{{addAlertClassDepartment(department.TRX_DEPARTMENT, 'This_YEAR_Cust', item)}}">
                                                                {{getDepartmentThisYearData(department.TRX_DEPARTMENT, 'This_YEAR_Cust', item, 'dollar')}}
                                                            </td>
                                                            <td
                                                                class="{{addAlertClassDepartment(department.TRX_DEPARTMENT, 'Budget_YEAR_Cust', item)}}">
                                                                {{getDepartmentBudgetData(department.TRX_DEPARTMENT, 'Budget_YEAR_Cust', item, 'dollar')}}
                                                            </td>
                                                            <td
                                                                class="{{addAlertClassDepartment(department.TRX_DEPARTMENT, 'Last_YEAR_Cust', item)}}">
                                                                {{getDepartmentLastYearData(department.TRX_DEPARTMENT, 'Last_YEAR_Cust', item, 'dollar')}}
                                                            </td>
                                                        </ng-container>
                                                    </ng-container>                            
                                                   
                                                </tr>
        
        
                                            </ng-container>
        
                                        </tbody>
        
                                    </table>
                                </div>
        
                            </div>
                            <div class="tab-pane fade" id="pills-CustomerSummaryYID" role="tabpanel"
                                aria-labelledby="pills-CustomerSummaryYID-tab">
                                <!-- 7 -->
                                <div class="">
                                    <div class="">
                                        <table id="SPCS-YID-TABLE" class="table ctm-table table-responsive w-100">
                                            <thead>
                                                <tr>
                                                    <th></th>
                                                    <th>Store Name</th>
                                                    <th></th>
                                                    <th></th>
                                                    <th></th>
                                                    <th>Diff</th>
                                                    <th>Sales</th>
                                                    <th></th>
                                                    <th></th>
                                                    <th>CC</th>
                                                    <th>CC</th>
                                                    <th>CC</th>
                                                    <th>Sales/Cust</th>
                                                    <th>Sales/Cust</th>
                                                    <th>Item/Bskt/th>
                                                    <th>Item/Bskt</th>
                                                    <!-- <th>UNALLOCATED</th>
                                                <th></th>
                                                <th></th> -->
                                                <ng-container *ngIf="salesReportForm.value.departmentIds?.length">
                                                    <ng-container *ngFor="let department of departments">
                                                        <th></th>
                                                        <th>{{department.DEP_DESC
                                                        }}</th>
                                                        <th></th>
                                                    </ng-container>  
                                                </ng-container>   
                                                   
                                                </tr>
                                                <tr>
                                                    <th></th>
                                                    <th></th>
                                                    <th>This Year</th>
                                                    <th>Budget</th>
                                                    <th>Last Year</th>
                                                    <th>TY/LY $</th>
                                                    <th>TY/LY %</th>
                                                    <th>GP %</th>
                                                    <th>GP % TY/LY</th>
                                                    <th>TY</th>
                                                    <th>Budget</th>
                                                    <th>LY</th>
                                                    <th>TY</th>
                                                    <th>TY/LY</th>
                                                    <th>TY</th>
                                                    <th>TY/LY</th>
                                                    <!-- <th>This Year $</th>
                                                <th>Budget $</th>
                                                <th>Last Year $</th> -->
                                                <ng-container *ngIf="salesReportForm.value.departmentIds?.length">
                                                    <ng-container *ngFor="let department of departments">
                                                        <th>This Year $</th>
                                                        <th>Budget $</th>
                                                        <th>Last Year $</th>
                                                    </ng-container>   
                                                </ng-container>   
                                            
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <ng-container *ngFor="let item of tableData.SPCS_YID;let i = index">
                                                    <tr>
                                                        <td>{{item.OUTL_OUTLET}}</td>
                                                        <td>{{item.OUTL_DESC}}</td>
                                                        <td class="{{addAlertClass(item.THIS_YEAR)}}">
                                                            {{item.THIS_YEAR  | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                        <td class="{{addAlertClass(item.BUDGET)}}">
                                                            {{item.BUDGET  | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                        <td class="{{addAlertClass(item.Last_YEAR)}}">
                                                            {{item.Last_YEAR  | currency : 'USD' : 'symbol' : '1.0-0'}}</td>
                                                        <td class="{{addAlertClass(item.DIFF_TY_ovr_LY_S)}}">
                                                            {{item.DIFF_TY_ovr_LY_S | currency : 'USD' : 'symbol' : '1.0-0' }}</td>
                                                        <td class="{{addAlertClass(item.DIFF_TY_ovr_LY_S)}}">
                                                            {{item?.SALES_TY_ovr_LY_PERC > 0 ? ( item?.SALES_TY_ovr_LY_PERC | number: "0.1-2") : '0.00' }}%</td>
                                                        <td class="{{addAlertClass(item.GP_Per)}}">
                                                            {{item.GP_Per > 0 ? ( item?.GP_Per | number: "0.1-2") : '0.00' }} %
                                                        </td>
                                                        <td class="{{addAlertClass(item.GP_PERC_TY_ovr_LY)}}">
                                                            {{item?.GP_PERC_TY_ovr_LY > 0 ? ( item.GP_PERC_TY_ovr_LY | number: "0.1-2") : '0.00' }} %
                                                           </td>
                                                        <td class="{{addAlertClass(item.CC_TY)}}">
                                                            {{item.CC_TY | number}}</td>
                                                        <td class="{{addAlertClass(item.CC_BUDGET)}}">
                                                            {{item.CC_BUDGET  | number}}</td>
                                                        <td class="{{addAlertClass(item.CC_LY)}}">
                                                            {{item.CC_LY  | number }}</td>
                                                        <td class="{{addAlertClass(item.SALES_ovr_CUST_TY)}}">
                                                            {{item.SALES_ovr_CUST_TY  | currency: 'USD'}} </td>
                                                        <td class="{{addAlertClass(item.SALES_ovr_CUST_TY_ovr_LY)}}">
                                                            {{item.SALES_ovr_CUST_TY_ovr_LY  | currency: 'USD'}} </td>
                                                        <td class="{{addAlertClass(item.ITEM_ovr_BSKT_TY)}}">
                                                            {{item.ITEM_ovr_BSKT_TY  | number: '0.1-2'}} </td>
                                                        <td class="{{addAlertClass(item.ITEM_ovr_BSKT_TY_ovr_LY)}}">
                                                            {{item.ITEM_ovr_BSKT_TY_ovr_LY  | number: '0.1-2'}} </td>
                                                        <!-- <td></td>
                                                    <td></td>
                                                    <td></td> -->
                                                    <ng-container *ngIf="salesReportForm.value.departmentIds?.length">
                                                        <ng-container *ngFor="let department of departments">
                                                            <td
                                                                class="{{addAlertClassDepartment(department.TRX_DEPARTMENT, 'This_YEAR_Cust', item)}}">
                                                                {{getDepartmentThisYearData(department.TRX_DEPARTMENT, 'This_YEAR_Cust', item, 'dollar')}}
                                                            </td>
                                                            <td
                                                                class="{{addAlertClassDepartment(department.TRX_DEPARTMENT, 'Budget_YEAR_Cust', item)}}">
                                                                {{getDepartmentBudgetData(department.TRX_DEPARTMENT, 'Budget_YEAR_Cust', item, 'dollar')}}
                                                            </td>
                                                            <td
                                                                class="{{addAlertClassDepartment(department.TRX_DEPARTMENT, 'Last_YEAR_Cust', item)}}">
                                                                {{getDepartmentLastYearData(department.TRX_DEPARTMENT, 'Last_YEAR_Cust', item, 'dollar')}}
                                                            </td>
                                                        </ng-container>
                                                    </ng-container>   
                                                    </tr>
                                                </ng-container>
        
                                            </tbody>
        
                                        </table>
                                    </div>
        
                                </div>
                            </div>
                            <div class="tab-pane fade" id="pills-Chart" role="tabpanel" aria-labelledby="pills-Chart-tab">
                                <!-- 8 -->
                                <div class="bg-box mt-15 vh-100">
                                    <div id="SC_OUTLET-chartDiv" style="width: 100%;height: 500px;">
        
                                    </div>
        
                                </div>
                            </div>
                            <div class="tab-pane fade" id="pills-ChartDepartment" role="tabpanel"
                                aria-labelledby="pills-ChartDepartment-tab">
                                <!-- 9 -->
                                <div class="bg-box mt-15 vh-100">
                                    <div id="SC_DEPARTMENT-chartDiv" style="width: 100%;height: 500px;">
        
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </ng-container>
            </ng-container>
        </div>
    </div>
</div>
<div class="modal fade bd-example-modal-xl thm-popup" id="reportFilter" tabindex="-1" role="dialog"
    aria-labelledby="reportFilterModalLabel" aria-hidden="true" data-backdrop="static">
    <form [formGroup]="salesReportForm">
        <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-body popup-box-width">
                    <div class="popup-box">
                        <div class="form-row align-items-center">
                            <div class="col-5">
                                <div class="mb-0">
                                    <h4 class="title">{{salesByText}}</h4>
                                </div>
                            </div>
                            <div class="col-7">
                                <div class="text-right">
                                    <div class="custom-control form-group custom-checkbox mb-0">
                                        <input type="checkbox" class="custom-control-input checkedFilter"
                                            id="{{ reporterObj.currentUrl }}"
                                            (change)="onDateOrKeepFilterChange('keepFilter', $event.target.checked)"
                                            [checked]="dropdownObj?.keep_filter ? dropdownObj?.keep_filter[reporterObj.currentUrl] : false">
                                        <label class="custom-control-label mb-0" for="{{ reporterObj.currentUrl }}">Keep
                                            current filter</label>
                                        <button type="button" class="ml-2 btn btn-grey btn-grey-refresh"
                                            (click)="refreshBtnClicked()">
                                            <i class="icon fa fa-refresh"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-5 col-xl-5">
                                <div class="group-from mb-0 report-form-group">
                                    <h5 class="title">
                                        Date Range
                                    </h5>
                                    <div class="overflow-h">
                                        <ng-container
                                            *ngIf="reporterObj.currentUrl !== reportNameObj.productPriceDeviation">
                                            <div class="accordion exclude-list mb-3" id="accordionExample"
                                                *ngIf="reporterObj.currentUrl != 'nationalRanging'">
                                                <div id="headingOne">
                                                    <a href="javascript:void(0);" class="Out-btn" data-toggle="collapse"
                                                        data-target="#collapseOne" aria-expanded="true"
                                                        aria-controls="collapseOne">
                                                        <!-- Date Range -->
                                                    </a>
                                                </div>
                                                <div id="collapseOne" class="collapse show" aria-labelledby="headingOne"
                                                    data-parent="#accordionExample">
                                                    <!-- DATE RANGE -->
                                                    <div class="submenu h-auto">
                                                        <div class="form-row align-items-center">
                                                            <div class="col-4">
                                                                <div class="form-group mb-0">
                                                                    <div class="ctm-calendar">
                                                                        <input #startDateInput type="text"
                                                                            class="form-control"
                                                                            formControlName="startDate" bsDatepicker
                                                                            [bsConfig]="{ showWeekNumbers:false }"
                                                                            [maxDate]="maxDate"
                                                                            [ngClass]="{ 'is-invalid': submitted && f.startDate.errors }"
                                                                            (bsValueChange)="specDateChange($event, toDate.value)"
                                                                            readonly>
                                                                        <div *ngIf="f.startDate.errors"
                                                                            class="invalid-feedback">
                                                                            <div *ngIf="f.startDate.errors.required">
                                                                                Start date is required
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-2">
                                                                <div class="form-group mb-0 text-center">
                                                                    <label for="" class="mb-0">To</label>
                                                                </div>
                                                            </div>
                                                            <div class="col-4">
                                                                <div class="form-group mb-0">
                                                                    <div class="ctm-calendar">
                                                                        <input #toDate type="text" class="form-control"
                                                                            formControlName="endDate" bsDatepicker
                                                                            [bsConfig]="datepickerConfig"
                                                                            [maxDate]="maxDate"
                                                                            [ngClass]="{ 'is-invalid': submitted && f.endDate.errors }"
                                                                            (bsValueChange)="specDateChange(startDateInput.value, $event)"
                                                                            readonly>
                                                                        <div *ngIf="f.endDate.errors"
                                                                            class="invalid-feedback">
                                                                            <div *ngIf="f.endDate.errors.required">
                                                                                End date is required
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <!-- <div class="col-2">
                                                            <button type="button" class="btn btn-blue btn-block input-btn btn-grey">...</button>
                                                        </div> -->
                                                        </div>
                                                        <div *ngIf="false" class="form-row form-group mb-0 mt-2">
                                                            <ng-container *ngFor="let day of dropdownObj.days">
                                                                <div class="col-lg-4">
                                                                    <div class="custom-control custom-checkbox">
                                                                        <input type="checkbox"
                                                                            class="custom-control-input" [id]="day.code"
                                                                            (change)="onDateOrKeepFilterChange('day', $event.target.checked, day.code)"
                                                                            [checked]="f?.days?.value?.includes(day.code) ? true : false">
                                                                        <label class="custom-control-label mb-0"
                                                                            [for]="day.code">
                                                                            {{ day.name }}
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                            </ng-container>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </ng-container>

                                        <!-- General Field Filter -->
                                        <ng-container *ngIf="false">
                                            <div *ngIf="false" class="group-from">
                                                <h5 class="title">General Field Filters</h5>
                                                <div class="form-row form-group align-items-center">
                                                    <div class="col-4 text-right">
                                                        <label for="" class="mb-0">Sales AMT</label>
                                                    </div>
                                                    <div class="col-8">
                                                        <div class="form-row">
                                                            <div class="col-8">
                                                                <select class="form-control" formControlName="salesAMT">
                                                                    <option
                                                                        *ngFor="let generalField of generalFieldFilter"
                                                                        [value]="generalField.id">{{generalField.name}}
                                                                    </option>
                                                                </select>
                                                            </div>
                                                            <div class="col-4">
                                                                <input type="number" class="form-control"
                                                                    formControlName="salesAMTRange">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-row form-group align-items-center field-disabled">
                                                    <div class="col-4 text-right">
                                                        <label for="salesQty" class="mb-0">Sales QTY</label>
                                                    </div>
                                                    <div class="col-8">
                                                        <div class="form-row">
                                                            <div class="col-8">
                                                                <select name="salesQty" id="salesQty"
                                                                    class="form-control">
                                                                    <option value="">NONE</option>
                                                                </select>
                                                            </div>
                                                            <div class="col-4">
                                                                <input type="text" class="form-control">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-row form-group align-items-center">
                                                    <div class="col-4 text-right">
                                                        <label for="" class="mb-0">SOH</label>
                                                    </div>
                                                    <div class="col-8">
                                                        <div class="form-row">
                                                            <div class="col-8">
                                                                <select class="form-control" formControlName="salesSOH">
                                                                    <option
                                                                        *ngFor="let generalField of generalFieldFilter"
                                                                        [value]="generalField.id">{{generalField.name}}
                                                                    </option>
                                                                </select>
                                                            </div>
                                                            <div class="col-4">
                                                                <input type="number" class="form-control"
                                                                    formControlName="salesSOHRange">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-row form-group mb-0 align-items-center field-disabled">
                                                    <div class="col-4 text-right">
                                                        <label for="strVal" class="mb-0">String value</label>
                                                    </div>
                                                    <div class="col-8">
                                                        <div class="form-row">
                                                            <div class="col-8">
                                                                <select name="strVal" id="strVal" class="form-control">
                                                                    <option value="">NONE</option>
                                                                </select>
                                                            </div>
                                                            <div class="col-4">
                                                                <input type="text" class="form-control">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </ng-container>

                                        <!-- PROMOTION FILTER -->
                                        <div class="group-from" *ngIf="false">
                                            <h5 class="title">Promotion Filter {{ reporterObj.currentUrl }}</h5>
                                            <div class="form-row form-group align-items-center mb-0">
                                                <div class="col-6">
                                                    <div class="custom-control custom-checkbox">
                                                        <input formControlName="isPromoSale" type="checkbox"
                                                            class="custom-control-input" id="Sales">
                                                        <label class="custom-control-label mb-0" for="Sales">Only Promo
                                                            Sales</label>
                                                    </div>
                                                </div>
                                                <div class="col-6">
                                                    <div class="form-row align-items-center">
                                                        <div class="col-3">
                                                            <label class="label mb-0">Promo</label>
                                                        </div>
                                                        <div class="col-9">
                                                            <input formControlName="promoCode" type="text"
                                                                class="form-control">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Summary Report Options -->
                                        <ng-container *ngIf="false">
                                            <div class="group-from">
                                                <h5 class="title">Summary Report Options</h5>
                                                <div class="d-flex flex-wrap form-group mb-0">
                                                    <ng-container *ngFor="let summaryOpt of reporterObj.summary_option">
                                                        <div class="custom-control custom-radio mr-2">
                                                            <input type="radio" class="custom-control-input"
                                                                [id]="summaryOpt.code"
                                                                (change)="setSummaryOption(summaryOpt.code, 'summary_option', 'summaryRep')"
                                                                name="summaryRep"
                                                                [value]="f?.summaryRep?.value || summaryOpt.code"
                                                                [checked]="((f?.summaryRep?.value === summaryOpt.code) && !summaryOpt.disable) ? true : false"
                                                                [disabled]="summaryOpt.disable">
                                                            <label class="custom-control-label mb-0"
                                                                [for]="summaryOpt.code">
                                                                {{summaryOpt.code}}
                                                            </label>
                                                        </div>
                                                    </ng-container>
                                                </div>
                                            </div>
                                        </ng-container>

                                        <!-- Alternate Sort Order -->
                                        <ng-container *ngIf="false">
                                            <div class="group-from">
                                                <h5 class="title">Alternate Sort Order</h5>
                                                <div class="d-flex flex-wrap form-group mb-0">
                                                    <ng-container *ngFor="let sortOpt of reporterObj.sort_option">
                                                        <div class="custom-control custom-radio mr-2">
                                                            <input type="radio" class="custom-control-input"
                                                                [id]="sortOpt.code"
                                                                (change)="setSummaryOption(sortOpt.code, 'sort_option')"
                                                                name="sort" [value]="sortOpt.name"
                                                                formControlName="sort">
                                                            <label class="custom-control-label mb-0"
                                                                [for]="sortOpt.code">
                                                                {{sortOpt.name}}
                                                            </label>
                                                        </div>
                                                    </ng-container>
                                                </div>
                                            </div>
                                        </ng-container>

                                        <!-- Stock Order -->
                                        <ng-container *ngIf="false">
                                            <div class="group-from">
                                                <h5 class="title">Stock</h5>
                                                <div class="form-group mb-1">
                                                    <div class="custom-control custom-checkbox ">
                                                        <input formControlName="stockNegativeOH" type="checkbox"
                                                            class="custom-control-input" id="stockNegativeOnHand">
                                                        <label class="custom-control-label mb-0"
                                                            for="stockNegativeOnHand">
                                                            {{displayTextObj.stockNegativeOH}}
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="form-group mb-1">
                                                    <div class="custom-control custom-checkbox"
                                                        [ngClass]="reporterObj.currentUrl !== reportNameObj.lessthenXdaysStock ? 'field-disabled': ''">
                                                        <input type="checkbox" class="custom-control-input" id="Stock"
                                                            formControlName="stockSOHLevel">
                                                        <label class="custom-control-label mb-0" for="Stock">
                                                            {{displayTextObj.stockSOHLevel}}
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <div class="custom-control custom-checkbox"
                                                        [ngClass]="reporterObj.currentUrl !== reportNameObj.lessthenXdaysStock ? 'field-disabled': ''">
                                                        <input type="checkbox" class="custom-control-input" id="SOH1"
                                                            formControlName="stockSOHButNoSales">
                                                        <label class="custom-control-label mb-0" for="SOH1">
                                                            {{displayTextObj.stockSOHButNoSales}}
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <div class="custom-control custom-checkbox"
                                                        [ngClass]="reporterObj.currentUrl !== reportNameObj.lessthenXdaysStock ? 'field-disabled': ''">
                                                        <input type="checkbox" class="custom-control-input"
                                                            id="SOHWarning" formControlName="stockLowWarn">
                                                        <label class="custom-control-label mb-0" for="SOHWarning">
                                                            {{displayTextObj.stockLowWarn}}
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="form-group form-row align-items-center"
                                                    [ngClass]="reporterObj.currentUrl !== reportNameObj.lessthenXdaysStock ? 'field-disabled': ''">
                                                    <div class="col-6">
                                                        <label for="numDays" class="mb-0">Number of days warning</label>
                                                    </div>
                                                    <div class="col-6">
                                                        <input class="form-control form-txt" type="number" id="numDays"
                                                            name="quantity" formControlName="stockNoOfDaysWarn">
                                                    </div>

                                                </div>
                                                <div class="form-group mb-0"
                                                    [ngClass]="reporterObj.currentUrl !== reportNameObj.lessthenXdaysStock && reporterObj.currentUrl !== reportNameObj.productPriceDeviation ? 'field-disabled': ''">
                                                    <!-- <ng-select  
                                                    [items]="dropdownObj.nationalranges"
                                                    bindLabel="fullName"
                                                    bindValue="id"
                                                    [virtualScroll]="false"
                                                    [multiple]="false"
                                                    placeholder="Select National Range"
                                                    formControlName="stockNationalRange"
                                                    (remove)="removeNationRange()"
                                                >
                                                  
                                                    <ng-template ng-option-tmp let-item="item" let-item$="item$" 
                                                        let-index="index">
                                                        <span>{{item.fullName}}</span>
                                                    </ng-template>
                                                </ng-select> -->
                                                    <div class="col-12">
                                                        <label for="">National Range</label>
                                                    </div>
                                                    <div class="col-12">
                                                        <input type="number" class="form-control"
                                                            formControlName="stockNationalRange" min="-1" max="100">
                                                        <label for="" class="fontSize-11 mb-0 primaryColor"
                                                            style="color:#5145cd;">(less than or equal to,-1)</label>
                                                    </div>

                                                </div>
                                            </div>
                                        </ng-container>
                                    </div>
                                </div>
                            </div>

                            <!-- All Dropdown -->
                            <div class="col-lg-4 col-xl-4">
                                <div class="group-from mb-0 report-form-group report-form-select code-Height">
                                    <h5 class="title">
                                        Codes
                                    </h5>
                                    <div class="overflow">
                                        <div class="mb-2" *ngIf="reporterObj.currentUrl === reportNameObj.KPIReport">
                                           
                                            <div class="form-group form-row">
                                                <label class="label col-md-3 mb-0">Stores</label>
                                                <div class="col-md-9 mb-0">
                                                    <ng-select [items]="dropdownObj.stores" bindLabel="storeDetail"
                                                    bindValue="id" [closeOnSelect]="false" [virtualScroll]="false"
                                                    [multiple]="true" dropdownPosition="bottom"
                                                    [clearSearchOnAdd]="true" placeholder="Select Store"
                                                    formControlName="storeIds" (change)="
                                                  setDropdownSelection(
                                                    reporterObj.dropdownField.stores,
                                                    $event
                                                  )
                                                " (open)="
                                                getAndSetFilterData(
                                                    reporterObj.dropdownField.stores,
                                                    reporterObj.dropdownField.storeIds,
                                                    true
                                                  )
                                                " (remove)="
                                                  addOrRemoveItem(
                                                    $event,
                                                    reporterObj.dropdownField.stores,
                                                    'remove'
                                                  )
                                                " (clear)="
                                                  addOrRemoveItem(
                                                    $event,
                                                    reporterObj.dropdownField.stores,
                                                    'clear_all',
                                                    reporterObj.dropdownField.storeIds
                                                  )
                                                " (add)="
                                                  addOrRemoveItem(
                                                    $event,
                                                    reporterObj.dropdownField.stores,
                                                    'add'
                                                  )
                                                ">
                                                    <!-- It hold value on the basis of filter -->
                                                    <ng-template ng-option-tmp let-item="item" let-item$="item$"
                                                        let-index="index">

                                                        <div class="form-row">
                                                            <div class="col-10 zone-overflow">
                                                                <input id="item-{{ index }}" type="checkbox" [checked]="
                                                      reporterObj?.remove_index_map?.stores[item.id]
                                                        ? true
                                                        : false
                                                    " />&nbsp;
                                                                <span title="{{ item?.desc }}">
                                                                    {{ item?.desc }}
                                                                </span>
                                                            </div>
                                                            <div class="col-2" title="{{ item?.code }}">
                                                                {{ item?.code }}
                                                            </div>
                                                        </div>

                                                        <span>{{
                                                    selectAll(reporterObj.dropdownField.stores, item)
                                                  }}</span>
                                                    </ng-template>



                                                    <!-- Add button on top of the select and perform operations -->
                                                    <ng-template ng-header-tmp>
                                                        <div class="form-row align-items-center form-group mb-0">
                                                            <div class="col-12 text-right">
                                                                <button (click)="
                                                          addOrRemoveItem(
                                                            null,
                                                            reporterObj.dropdownField.stores,
                                                            reporterObj?.button_text?.stores,
                                                            reporterObj.dropdownField.storeIds
                                                          )
                                                        " class="btn btn-blue input-btn btn-grey">
                                                                    {{ reporterObj?.button_text?.stores }}
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </ng-template>

                                                    <!-- Add more tag with count -->
                                                    <ng-template ng-multi-label-tmp let-items="items" let-clear="clear">
                                                        <div class="ng-value" *ngFor="let item of items | slice: 0:2">
                                                            <span class="ng-value-label">{{
                                                      item.storeDetail
                                                    }}</span>
                                                            <span class="ng-value-icon right" (click)="clear(item)"
                                                                aria-hidden="true">×</span>
                                                        </div>
                                                        <div class="ng-value" *ngIf="items.length > 2">
                                                            <span class="ng-value-label">{{ items.length - 2 }}
                                                                more...</span>
                                                        </div>
                                                    </ng-template>
                                                </ng-select>
                                                </div>
                                              </div>  
                                    
                                            <!-- <div class="mb-2">
                                                <ng-select [items]="dropdownObj.stores" bindLabel="storeDetail"
                                                    bindValue="code" [closeOnSelect]="false" [virtualScroll]="false"
                                                    [multiple]="true" dropdownPosition="bottom"
                                                    placeholder="Select Store" formControlName="storeIds"
                                                    (change)="setDropdownSelection(reporterObj.dropdownField.stores, $event)"
                                                    (open)="getAndSetFilterFata(reporterObj.dropdownField.stores, reporterObj.dropdownField.storeIds, true)"
                                                    (remove)="addOrRemoveItem($event, reporterObj.dropdownField.stores, 'remove')"
                                                    (clear)="addOrRemoveItem($event, reporterObj.dropdownField.stores, 'clear_all', reporterObj.dropdownField.storeIds)"
                                                    (add)="addOrRemoveItem($event, reporterObj.dropdownField.stores, 'add')">
                                                  
                                                    <ng-template ng-option-tmp let-item="item" let-item$="item$"
                                                        let-index="index">

                                                        <div class="form-row">
                                                            <div class="col-10 zone-overflow">
                                                                <input id="item-{{ index }}" type="checkbox" [checked]="
                                                          reporterObj?.remove_index_map?.stores[item.id]
                                                            ? true
                                                            : false
                                                        " />&nbsp;
                                                                <span title="{{ item?.desc }}">
                                                                    {{ item?.desc }}
                                                                </span>
                                                            </div>
                                                            <div class="col-2" title="{{ item?.code }}">
                                                                {{ item?.code }}
                                                            </div>
                                                        </div>

                                                        <span>{{
                                                        selectAll(reporterObj.dropdownField.stores, item)
                                                      }}</span>
                                                    </ng-template>



                                                
                                                    <ng-template ng-header-tmp>
                                                        <div class="form-row align-items-center form-group mb-0">
                                                            <div class="col-12 text-right">
                                                                <button (click)="
                                                              addOrRemoveItem(
                                                                null,
                                                                reporterObj.dropdownField.stores,
                                                                reporterObj?.button_text?.stores,
                                                                reporterObj.dropdownField.storeIds
                                                              )
                                                            " class="btn btn-blue input-btn btn-grey">
                                                                    {{ reporterObj?.button_text?.stores }}
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </ng-template>

                                                  
                                                    <ng-template ng-multi-label-tmp let-items="items" let-clear="clear">
                                                        <div class="ng-value" *ngFor="let item of items | slice: 0:2">
                                                            <span class="ng-value-label">{{
                                                          item.desc
                                                        }}</span>
                                                            <span class="ng-value-icon right" (click)="clear(item)"
                                                                aria-hidden="true">×</span>
                                                        </div>
                                                        <div class="ng-value" *ngIf="items.length > 2">
                                                            <span class="ng-value-label">{{ items.length - 2 }}
                                                                more...</span>
                                                        </div>
                                                    </ng-template>
                                                </ng-select>
                                            </div> -->
                                        </div>

                                        <!-- Promotions -->
                                        <div class="form-group form-row" *ngIf="false">
                                            <label class="label col-md-3 mb-0">Promotions</label>
                                            <div class="col-md-9 mb-0">
                                                <ng-select
                                                *ngIf="reporterObj.currentUrl !== reportNameObj.productPriceDeviation"
                                                [items]="dropdownObj.promotions" bindLabel="code" bindValue="id"
                                                [closeOnSelect]="false" [closeOnSelect]="false" [virtualScroll]="false"
                                                [multiple]="true" placeholder="Select Promotion"
                                                formControlName="promotionIds"
                                                (change)="setDropdownSelection(reporterObj.dropdownField.promotions, $event)"
                                                (open)="getAndSetFilterData(reporterObj.dropdownField.promotions, reporterObj.dropdownField.promotionIds, true)"
                                                (remove)="addOrRemoveItem($event, reporterObj.dropdownField.promotions, 'remove')"
                                                (clear)="addOrRemoveItem($event, reporterObj.dropdownField.promotions, 'clear_all', reporterObj.dropdownField.promotionIds)"
                                                (add)="addOrRemoveItem($event, reporterObj.dropdownField.promotions, 'add')">
                                                <!-- It hold value on the basis of filter -->
                                                <ng-template ng-option-tmp let-item="item" let-item$="item$"
                                                    let-index="index">
                                                    <input id="item-{{index}}" type="checkbox"
                                                        ng-click="$event.stopPropagation()"
                                                        [checked]="reporterObj?.remove_index_map?.promotions[item.id] ? true : false" />&nbsp;
                                                    <span>{{item.fullName}}</span>
                                                    <span>{{selectAll(reporterObj.dropdownField.promotions, item)}}</span>
                                                </ng-template>

                                                <!-- Add button on top of the select and perform operations -->
                                                <ng-template ng-header-tmp>
                                                    <div class="form-row align-items-center form-group">
                                                        <div class="col-8">
                                                            <div class="custom-control custom-checkbox">
                                                                <input type="checkbox" class="custom-control-input"
                                                                    id="promoFilter" formControlName="isPromoSale">
                                                                <label class="custom-control-label mb-0"
                                                                    for="promoFilter">
                                                                    Show only promotional sales
                                                                </label>
                                                            </div>
                                                        </div>
                                                        <div class="col-4 text-right">
                                                            <button
                                                                (click)="addOrRemoveItem(null, reporterObj.dropdownField.promotions, reporterObj?.button_text?.promotions, reporterObj.dropdownField.promotionIds)"
                                                                class="btn btn-blue input-btn btn-grey">
                                                                {{ reporterObj?.button_text?.promotions }}
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="form-row align-items-center form-group mb-0">
                                                        <div class="col-5">
                                                            <div class="form-group mb-0">
                                                                <div class="ctm-calendar">
                                                                    <input #startPromoDate type="text"
                                                                        class="form-control" bsDatepicker
                                                                        [bsConfig]="{ showWeekNumbers:false }"
                                                                        [maxDate]="maxDate"
                                                                        formControlName="promoFromDate"
                                                                        [value]="(f?.promoFromDate?.value || todaysDate) | date: 'MM/dd/yyyy'"
                                                                        (bsValueChange)="
                                                                            specDateChange(
                                                                            $event,
                                                                            toPromoDate.value,
                                                                            'promotion'
                                                                            )
                                                                        " readonly>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-2">
                                                            <div class="form-group mb-0 text-center">
                                                                <label for="" class="mb-0">To</label>
                                                            </div>
                                                        </div>
                                                        <div class="col-5">
                                                            <div class="form-group mb-0">
                                                                <div class="ctm-calendar">
                                                                    <input #toPromoDate type="text" class="form-control"
                                                                        bsDatepicker
                                                                        [bsConfig]="{ showWeekNumbers:false }"
                                                                        [maxDate]="maxDate"
                                                                        formControlName="promoToDate"
                                                                        [value]="(f?.promoToDate?.value || todaysDate) | date: 'MM/dd/yyyy'"
                                                                        (bsValueChange)="
                                                                            specDateChange(
                                                                            startPromoDate.value,
                                                                            $event,
                                                                            'promotion'
                                                                            )
                                                                        " readonly>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </ng-template>
                                            </ng-select>
                                            </div>
                                        </div>

                                        
                                        <!-- Zones -->
                                        <div class="form-group form-row" *ngIf="reporterObj.currentUrl === reportNameObj.KPIReport">
                                            <label class="label col-md-3 mb-0">Zones</label>
                                            <div class="col-md-9 mb-0">
                                                <ng-select [items]="dropdownObj.zones" bindLabel="name" bindValue="id"
                                                [closeOnSelect]="false" [virtualScroll]="false"
                                                [clearSearchOnAdd]="true" dropdownPosition="bottom" [multiple]="true"
                                                placeholder="Select Zone" formControlName="zoneIds" (change)="
                                            setDropdownSelection(
                                              reporterObj.dropdownField.zones,
                                              $event
                                            )
                                          " (open)="
                                          getAndSetFilterData(
                                              reporterObj.dropdownField.zones,
                                              reporterObj.dropdownField.zoneIds,
                                              true
                                            )
                                          " (remove)="
                                            addOrRemoveItem(
                                              $event,
                                              reporterObj.dropdownField.zones,
                                              'remove'
                                            )
                                          " (clear)="
                                            addOrRemoveItem(
                                              $event,
                                              reporterObj.dropdownField.zones,
                                              'clear_all',
                                              reporterObj.dropdownField.zoneIds
                                            )
                                          " (add)="
                                            addOrRemoveItem(
                                              $event,
                                              reporterObj.dropdownField.zones,
                                              'add'
                                            )
                                          ">
                                                <!-- It hold value on the basis of filter -->
                                                <ng-template ng-option-tmp let-item="item" let-item$="item$"
                                                    let-index="index">

                                                    <div class="form-row">
                                                        <div class="col-10 zone-overflow">
                                                            <input id="item-{{ index }}" type="checkbox" [checked]="
                                                reporterObj?.remove_index_map?.zones[item.id]
                                                  ? true
                                                  : false
                                              " />&nbsp;

                                                            <span title="{{ item?.name }}">
                                                                {{ item?.name }}
                                                            </span>
                                                        </div>
                                                        <div class="col-2" title="{{ item?.code }}">
                                                            {{ item?.code }}
                                                        </div>
                                                    </div>

                                                    <span>{{
                                              selectAll(reporterObj.dropdownField.zones, item)
                                            }}</span>
                                                </ng-template>

                                                <!-- Add button on top of the select and perform operations -->
                                                <ng-template ng-header-tmp>
                                                    <div class="form-row align-items-center form-group mb-0">
                                                        <div class="col-12 text-right">
                                                            <button (click)="
                                                    addOrRemoveItem(
                                                      null,
                                                      reporterObj.dropdownField.zones,
                                                      reporterObj?.button_text?.zones,
                                                      reporterObj.dropdownField.zoneIds
                                                    )
                                                  " class="btn btn-blue input-btn btn-grey">
                                                                {{ reporterObj?.button_text?.zones }}
                                                            </button>
                                                        </div>
                                                    </div>
                                                </ng-template>

                                                <!-- Add more tag with count -->
                                                <ng-template ng-multi-label-tmp let-items="items" let-clear="clear">
                                                    <div class="ng-value" *ngFor="let item of items | slice: 0:2">
                                                        <span class="ng-value-label">{{ item.name }}</span>
                                                        <span class="ng-value-icon right" (click)="clear(item)"
                                                            aria-hidden="true">×</span>
                                                    </div>
                                                    <div class="ng-value" *ngIf="items.length > 2">
                                                        <span class="ng-value-label">{{ items.length - 2 }}
                                                            more...</span>
                                                    </div>
                                                </ng-template>
                                            </ng-select>
                                            </div>
                                        </div>  

                                        <!-- Departments -->
                                        <div class="form-group form-row">
                                            <label class="label col-md-3 mb-0">Departments</label>
                                            <div class="col-md-9 mb-0">
                                                <ng-select [items]="dropdownObj.departments" bindLabel="desc" bindValue="id"
                                                [closeOnSelect]="false" dropdownPosition="bottom"
                                                [virtualScroll]="false" [multiple]="true" [clearSearchOnAdd]="true"
                                                placeholder="Select Departments" formControlName="departmentIds"
                                                (change)="
                                            setDropdownSelection(
                                              reporterObj.dropdownField.departments,
                                              $event
                                            )
                                          " (open)="
                                          getAndSetFilterData(
                                              reporterObj.dropdownField.departments,
                                              reporterObj.dropdownField.departmentIds,
                                              true
                                            )
                                          " (remove)="
                                            addOrRemoveItem(
                                              $event,
                                              reporterObj.dropdownField.departments,
                                              'remove'
                                            )
                                          " (clear)="
                                            addOrRemoveItem(
                                              $event,
                                              reporterObj.dropdownField.departments,
                                              'clear_all',
                                              reporterObj.dropdownField.departmentIds
                                            )
                                          " (add)="
                                            addOrRemoveItem(
                                              $event,
                                              reporterObj.dropdownField.departments,
                                              'add'
                                            )
                                          ">
                                                <!-- It hold value on the basis of filter -->
                                                <ng-template ng-option-tmp let-item="item" let-item$="item$"
                                                    let-index="index">

                                                    <div class="form-row">
                                                        <div class="col-10 zone-overflow">
                                                            <input id="item-{{ index }}" type="checkbox" [checked]="
                                                reporterObj?.remove_index_map?.departments[item.id]
                                                  ? true
                                                  : false
                                              " />&nbsp;

                                                            <span title="{{ item?.desc }}">
                                                                {{ item?.desc }}
                                                            </span>
                                                        </div>
                                                        <div class="col-2" title="{{ item?.code }}">
                                                            {{ item?.code }}
                                                        </div>
                                                    </div>

                                                    <span>{{
                                              
                                                        selectAll(reporterObj.dropdownField.departments, item)
                                                    }}</span>
                                                </ng-template>

                                                <!-- Add button on top of the select and perform operations -->
                                                <ng-template ng-header-tmp>
                                                    <div class="form-row align-items-center form-group mb-0">

                                                        <div class="col-12 text-right">
                                                            <button (click)="
                                                    addOrRemoveItem(
                                                      null,
                                                      reporterObj.dropdownField.departments,
                                                      reporterObj?.button_text?.departments,
                                                      reporterObj.dropdownField.departmentIds
                                                    )
                                                  " class="btn btn-blue input-btn btn-grey">
                                                                {{ reporterObj?.button_text?.departments }}
                                                            </button>
                                                        </div>
                                                    </div>
                                                </ng-template>

                                                <!-- Add more tag with count -->
                                                <ng-template ng-multi-label-tmp let-items="items" let-clear="clear">
                                                    <div class="ng-value" *ngFor="let item of items | slice: 0:2">
                                                        <span class="ng-value-label">{{ item.desc }}</span>
                                                        <span class="ng-value-icon right" (click)="clear(item)"
                                                            aria-hidden="true">×</span>
                                                    </div>
                                                    <div class="ng-value" *ngIf="items.length > 2">
                                                        <span class="ng-value-label">{{ items.length - 2 }}
                                                            more...</span>
                                                    </div>
                                                </ng-template>
                                            </ng-select>

                                            <!-- <ng-select [items]="dropdownObj.departments" bindLabel="desc" bindValue="id"
                                                [closeOnSelect]="false" dropdownPosition="bottom" [virtualScroll]="false"
                                                [multiple]="true" placeholder="Select Departments"
                                                formControlName="departmentIds"
                                                (change)="setDropdownSelection(reporterObj.dropdownField.departments, $event)"
                                                (open)="getAndSetFilterFata(reporterObj.dropdownField.departments, reporterObj.dropdownField.departmentIds, true)"
                                                (remove)="addOrRemoveItem($event, reporterObj.dropdownField.departments, 'remove')"
                                                (clear)="addOrRemoveItem($event, reporterObj.dropdownField.departments, 'clear_all', reporterObj.dropdownField.departmentIds)"
                                                (add)="addOrRemoveItem($event, reporterObj.dropdownField.departments, 'add')">
                                               
                                                <ng-template ng-option-tmp let-item="item" let-item$="item$"
                                                    let-index="index">
                                                    <div class="form-row">
                                                        <div class="col-10 zone-overflow">
                                                            <input id="item-{{ index }}" type="checkbox" [checked]="
                                                        reporterObj?.remove_index_map?.departments[item.id]
                                                          ? true
                                                          : false
                                                      " />&nbsp;
    
                                                            <span title="{{ item?.desc }}">
                                                                {{ item?.desc }}
                                                            </span>
                                                        </div>
                                                        <div class="col-2" title="{{ item?.code }}">
                                                            {{ item?.code }}
                                                        </div>
                                                    </div>
                                                    <span>{{selectAll(reporterObj.dropdownField.departments, item)}}</span>
    
                                                    <ng-template ng-multi-label-tmp let-items="items" let-clear="clear">
                                                        <div class="ng-value" *ngFor="let item of items | slice: 0:2">
                                                            <span class="ng-value-label">{{ item.desc }}</span>
                                                            <span class="ng-value-icon right" (click)="clear(item)"
                                                                aria-hidden="true">×</span>
                                                        </div>
                                                        <div class="ng-value" *ngIf="items.length > 2">
                                                            <span class="ng-value-label">{{ items.length - 2 }}
                                                                more...</span>
                                                        </div>
                                                    </ng-template>
    
                                                </ng-template>
    
                                               
                                                <ng-template ng-header-tmp>
                                                    <div class="form-row align-items-center form-group mb-0">
                                                        <div class="col-8">
                                                        </div>
                                                        <div class="col-4 text-right">
                                                            <button
                                                                (click)="addOrRemoveItem(null, reporterObj.dropdownField.departments, reporterObj?.button_text?.departments, reporterObj.dropdownField.departmentIds)"
                                                                class="btn btn-blue input-btn btn-grey">
                                                                {{ reporterObj?.button_text?.departments }}
                                                            </button>
                                                        </div>
                                                    </div>
    
                                                </ng-template>
                                            </ng-select> -->
                                            </div>
                                        </div>

                                        <!--Commodities -->
                                        <div class="form-group form-row" *ngIf="false">
                                            <label class="label col-md-3 mb-0">Commodities</label>
                                            <div class="col-md-9 mb-0">
                                                <ng-select [items]="dropdownObj.commodities" bindLabel="desc" bindValue="id"
                                                [closeOnSelect]="false" [virtualScroll]="false"
                                                dropdownPosition="bottom" [multiple]="true"
                                                placeholder="Select Commodity" formControlName="commodityIds"
                                                (change)="setDropdownSelection(reporterObj.dropdownField.commodities, $event)"
                                                (open)="getAndSetFilterData(reporterObj.dropdownField.commodities, reporterObj.dropdownField.commodityIds, true)"
                                                (remove)="addOrRemoveItem($event, reporterObj.dropdownField.commodities, 'remove')"
                                                (clear)="addOrRemoveItem($event, reporterObj.dropdownField.commodities, 'clear_all', reporterObj.dropdownField.commodityIds)"
                                                (add)="addOrRemoveItem($event, reporterObj.dropdownField.commodities, 'add')">
                                                <!-- It hold value on the basis of filter -->
                                                <ng-template ng-option-tmp let-item="item" let-item$="item$"
                                                    let-index="index">
                                                    <input id="item-{{index}}" type="checkbox"
                                                        [checked]="reporterObj?.remove_index_map?.commodities[item.id] ? true : false" />&nbsp;
                                                    <span>{{item.desc}}</span>
                                                    <span>{{selectAll(reporterObj.dropdownField.commodities, item)}}</span>
                                                </ng-template>

                                                <!-- Add button on top of the select and perform operations -->
                                                <ng-template ng-header-tmp>
                                                    <div class="form-row align-items-center form-group mb-0">
                                                        <div class="col-8">
                                                        </div>
                                                        <div class="col-4 text-right">
                                                            <button
                                                                (click)="addOrRemoveItem(null, reporterObj.dropdownField.commodities, reporterObj?.button_text?.commodities, reporterObj.dropdownField.commodityIds)"
                                                                class="btn btn-blue input-btn btn-grey">
                                                                {{ reporterObj?.button_text?.commodities }}
                                                            </button>
                                                        </div>
                                                    </div>
                                                </ng-template>
                                            </ng-select>
                                            </div>
                                        </div>  

                                        <!-- Categories -->
                                        <div class="form-group form-row" *ngIf="false">
                                            <label class="label col-md-3 mb-0">Categories</label>
                                            <div class="col-md-9 mb-0">
                                                <ng-select [items]="dropdownObj.categories" bindLabel="fullName"
                                                bindValue="id" [closeOnSelect]="false" [virtualScroll]="false"
                                                [multiple]="true" placeholder="Select Category"
                                                formControlName="categoryIds"
                                                (change)="setDropdownSelection(reporterObj.dropdownField.categories, $event)"
                                                (open)="getAndSetFilterData(reporterObj.dropdownField.categories, reporterObj.dropdownField.categoryIds, true)"
                                                (remove)="addOrRemoveItem($event, reporterObj.dropdownField.categories, 'remove')"
                                                (clear)="addOrRemoveItem($event, reporterObj.dropdownField.categories, 'clear_all', reporterObj.dropdownField.categoryIds)"
                                                (add)="addOrRemoveItem($event, reporterObj.dropdownField.categories, 'add')">
                                                <!-- It hold value on the basis of filter -->
                                                <ng-template ng-option-tmp let-item="item" let-item$="item$"
                                                    let-index="index">
                                                    <input id="item-{{index}}" type="checkbox"
                                                        [checked]="reporterObj?.remove_index_map?.categories[item.id] ? true : false" />&nbsp;
                                                    <span>{{item.fullName}}</span>
                                                    <span>{{selectAll(reporterObj.dropdownField.categories, item)}}</span>
                                                </ng-template>

                                                <!-- Add button on top of the select and perform operations -->
                                                <ng-template ng-header-tmp>
                                                    <div class="form-row align-items-center form-group mb-0">
                                                        <div class="col-8">
                                                        </div>
                                                        <div class="col-4 text-right">
                                                            <button
                                                                (click)="addOrRemoveItem(null, reporterObj.dropdownField.categories, reporterObj?.button_text?.categories, reporterObj.dropdownField.categoryIds)"
                                                                class="btn btn-blue input-btn btn-grey">
                                                                {{ reporterObj?.button_text?.categories }}
                                                            </button>
                                                        </div>
                                                    </div>
                                                </ng-template>
                                            </ng-select>
                                            </div>
                                        </div>  
                                      
                                        <!-- Groups -->
                                        <div class="form-group form-row" *ngIf="false">
                                            <label class="label col-md-3 mb-0">Groups</label>
                                            <div class="col-md-9 mb-0">
                                                <ng-select [items]="dropdownObj.groups" bindLabel="fullName" bindValue="id"
                                                [closeOnSelect]="false" [virtualScroll]="false" [multiple]="true"
                                                placeholder="Select Group" formControlName="groupIds"
                                                (change)="setDropdownSelection(reporterObj.dropdownField.groups, $event)"
                                                (open)="getAndSetFilterData(reporterObj.dropdownField.groups, reporterObj.dropdownField.groupIds, true)"
                                                (remove)="addOrRemoveItem($event, reporterObj.dropdownField.groups, 'remove')"
                                                (clear)="addOrRemoveItem($event, reporterObj.dropdownField.groups, 'clear_all', reporterObj.dropdownField.groupIds)"
                                                (add)="addOrRemoveItem($event, reporterObj.dropdownField.groups, 'add')">
                                                <!-- It hold value on the basis of filter -->
                                                <ng-template ng-option-tmp let-item="item" let-item$="item$"
                                                    let-index="index">
                                                    <input id="item-{{index}}" type="checkbox"
                                                        [checked]="reporterObj?.remove_index_map?.groups[item.id] ? true : false" />&nbsp;
                                                    <span>{{item.fullName}}</span>
                                                    <span>{{selectAll(reporterObj.dropdownField.groups, item)}}</span>
                                                </ng-template>

                                                <!-- Add button on top of the select and perform operations -->
                                                <ng-template ng-header-tmp>
                                                    <div class="form-row align-items-center form-group mb-0">
                                                        <div class="col-8">
                                                        </div>
                                                        <div class="col-4 text-right">
                                                            <button
                                                                (click)="addOrRemoveItem(null, reporterObj.dropdownField.groups, reporterObj?.button_text?.groups, reporterObj.dropdownField.groupIds)"
                                                                class="btn btn-blue input-btn btn-grey">
                                                                {{ reporterObj?.button_text?.groups }}
                                                            </button>
                                                        </div>
                                                    </div>
                                                </ng-template>
                                            </ng-select>
                                            </div>
                                        </div>  

                                        <!-- Suppliers -->
                                        <div class="form-group form-row" *ngIf="false">
                                            <label class="label col-md-3 mb-0">Suppliers</label>
                                            <div class="col-md-9 mb-0">
                                                <ng-select #supplierSelection [items]="dropdownObj.suppliers"
                                                bindLabel="desc" bindValue="id" [closeOnSelect]="false"
                                                [virtualScroll]="false" [multiple]="true" placeholder="Select Supplier"
                                                formControlName="supplierIds"
                                                (change)="setDropdownSelection(reporterObj.dropdownField.suppliers, $event)"
                                                (open)="getAndSetFilterData(reporterObj.dropdownField.suppliers, reporterObj.dropdownField.supplierIds, true)"
                                                (remove)="addOrRemoveItem($event, reporterObj.dropdownField.suppliers, 'remove')"
                                                (clear)="addOrRemoveItem($event, reporterObj.dropdownField.suppliers, 'clear_all', reporterObj.dropdownField.supplierIds)"
                                                (add)="addOrRemoveItem($event, reporterObj.dropdownField.suppliers, 'add')">
                                                <!-- It hold value on the basis of filter -->
                                                <ng-template ng-option-tmp let-item="item" let-item$="item$"
                                                    let-index="index">
                                                    <input id="item-{{index}}" type="checkbox"
                                                        [checked]="reporterObj?.remove_index_map?.suppliers[item.id] ? true : false" />&nbsp;
                                                    <span>{{item.desc}} &nbsp;&nbsp; {{item.code}}</span>
                                                    <span>{{selectAll(reporterObj.dropdownField.suppliers, item)}}</span>
                                                </ng-template>

                                                <!-- Add more tag with count -->
                                                <!-- <ng-template ng-multi-label-tmp let-items="items" let-clear="clear">
                                                    <div class="ng-value" *ngFor="let item of items | slice:0:2">
                                                        <span class="ng-value-label">{{item.desc}}</span>
                                                        <span class="ng-value-icon right" (click)="clear(item)" aria-hidden="true">×</span>
                                                    </div>
                                                    <div class="ng-value" *ngIf="items.length > 2">
                                                        <span class="ng-value-label">{{items.length - 2}} more...</span>
                                                    </div>
                                                </ng-template> -->

                                                <!-- Add button on top of the select and perform operations -->
                                                <ng-template ng-header-tmp>
                                                    <div class="form-row align-items-center form-group mb-0">
                                                        <div class="col-8">
                                                        </div>
                                                        <div class="col-4 text-right">
                                                            <button
                                                                (click)="addOrRemoveItem(null, reporterObj.dropdownField.suppliers, reporterObj?.button_text?.suppliers, reporterObj.dropdownField.supplierIds)"
                                                                class="btn btn-blue input-btn btn-grey">
                                                                {{ reporterObj?.button_text?.suppliers }}
                                                            </button>
                                                        </div>
                                                    </div>
                                                </ng-template>
                                            </ng-select>
                                            </div>
                                        </div>  

                                
                                        <!-- Tills -->
                                        <div class="form-group form-row" *ngIf="false">
                                            <label class="label col-md-3 mb-0">Tills</label>
                                            <div class="col-md-9 mb-0">
                                                <ng-select [items]="dropdownObj.tills" bindLabel="desc" bindValue="id"
                                                [closeOnSelect]="false" [virtualScroll]="false" [multiple]="true"
                                                placeholder="Select Till" formControlName="tillId"
                                                (change)="setDropdownSelection(reporterObj.dropdownField.tills, $event)"
                                                (open)="getAndSetFilterData(reporterObj.dropdownField.tills, reporterObj.dropdownField.tillId, true)"
                                                (remove)="addOrRemoveItem($event, reporterObj.dropdownField.tills, 'remove')"
                                                (clear)="addOrRemoveItem($event, reporterObj.dropdownField.tills, 'clear_all', reporterObj.dropdownField.tillId)"
                                                (add)="addOrRemoveItem($event, reporterObj.dropdownField.tills, 'add')">
                                                <!-- It hold value on the basis of filter -->
                                                <ng-template ng-option-tmp let-item="item" let-item$="item$"
                                                    let-index="index">
                                                    <input id="item-{{index}}" type="checkbox"
                                                        [checked]="reporterObj?.remove_index_map?.tills[item.id] ? true : false" />&nbsp;
                                                    <span>{{item.desc}}</span>
                                                    <span>{{selectAll(reporterObj.dropdownField.tills, item)}}</span>
                                                </ng-template>

                                                <!-- Add button on top of the select and perform operations -->
                                                <ng-template ng-header-tmp>
                                                    <div class="form-row align-items-center form-group mb-0">
                                                        <div class="col-8">
                                                        </div>
                                                        <div class="col-4 text-right">
                                                            <button
                                                                (click)="addOrRemoveItem(null, reporterObj.dropdownField.tills, reporterObj?.button_text?.tills, reporterObj.dropdownField.tillId)"
                                                                class="btn btn-blue input-btn btn-grey">
                                                                {{ reporterObj?.button_text?.tills }}
                                                            </button>
                                                        </div>
                                                    </div>
                                                </ng-template>
                                            </ng-select>
                                            </div>
                                        </div>  

                                        <!-- Manufacturers -->
                                        <div class="form-group form-row" *ngIf="false">
                                            <label class="label col-md-3 mb-0">Manufacturers</label>
                                            <div class="col-md-9 mb-0">
                                                <ng-select [items]="dropdownObj.manufacturers" bindLabel="name"
                                                bindValue="id" [closeOnSelect]="false" [virtualScroll]="false"
                                                [multiple]="true" placeholder="Select Manufacturer"
                                                formControlName="manufacturerIds"
                                                (change)="setDropdownSelection(reporterObj.dropdownField.manufacturers, $event)"
                                                (open)="getAndSetFilterData(reporterObj.dropdownField.manufacturers, reporterObj.dropdownField.manufacturerIds, true)"
                                                (remove)="addOrRemoveItem($event, reporterObj.dropdownField.manufacturers, 'remove')"
                                                (clear)="addOrRemoveItem($event, reporterObj.dropdownField.manufacturers, 'clear_all', reporterObj.dropdownField.manufacturerIds)"
                                                (add)="addOrRemoveItem($event, reporterObj.dropdownField.manufacturers, 'add')">
                                                <!-- It hold value on the basis of filter -->
                                                <ng-template ng-option-tmp let-item="item" let-item$="item$"
                                                    let-index="index">
                                                    <input id="item-{{index}}" type="checkbox"
                                                        [checked]="reporterObj?.remove_index_map?.manufacturers[item.id] ? true : false" />&nbsp;
                                                    <span>{{item.name}}</span>
                                                    <span>{{selectAll(reporterObj.dropdownField.manufacturers, item)}}</span>
                                                </ng-template>

                                                <!-- Add button on top of the select and perform operations -->
                                                <ng-template ng-header-tmp>
                                                    <div class="form-row align-items-center form-group mb-0">
                                                        <div class="col-8">

                                                        </div>
                                                        <div class="col-4 text-right">
                                                            <button
                                                                (click)="addOrRemoveItem(null, reporterObj.dropdownField.manufacturers, reporterObj?.button_text?.manufacturers, reporterObj.dropdownField.manufacturerIds)"
                                                                class="btn btn-blue input-btn btn-grey">
                                                                {{ reporterObj?.button_text?.manufacturers }}
                                                            </button>
                                                        </div>
                                                    </div>
                                                </ng-template>
                                            </ng-select>
                                            </div>
                                        </div>  
                                    </div>
                                </div>


                                <!-- <div class="" *ngIf="reporterObj.currentUrl!='appSales' && reporterObj.currentUrl!='basketIncident' && reporterObj.currentUrl!='stockAdjustment' && reporterObj.currentUrl!='stockVariance' && reporterObj.currentUrl!='stockWastage' && reporterObj.currentUrl!='noSales' && reporterObj.currentUrl!='financial' && reporterObj.currentUrl!='hourlySales' && reporterObj.currentUrl!='nilTransaction'">
                                    <div class="custom-control form-group custom-checkbox mb-0">
                                        <input type="checkbox" class="custom-control-input" id="Member">
                                        <label class="custom-control-label mb-0" for="Member">Only Member Sales</label>
                                    </div>
                                </div> -->
                            </div>

                            <!-- All Selections -->
                            <div class="col-lg-3 col-xl-3">
                                <div class="group-from mb-0 report-form-group">
                                    <h5 class="title">Selections</h5>
                                    <div class="overflow-h">
                                        <div class="reportDay_list">

                                            <ng-container
                                                *ngIf="reporterObj.currentUrl !== reportNameObj.productPriceDeviation">
                                                <div *ngIf="f?.startDate?.value">
                                                    <h4><u>Date Range</u></h4>
                                                    <ul>
                                                        <li>{{f?.startDate?.value | date: 'dd/MM/yyyy'}} to
                                                            {{f?.endDate?.value | date: 'dd/MM/yyyy'}}</li>
                                                    </ul>
                                                </div>
                                            </ng-container>

                                            <ng-container
                                                *ngIf="reporterObj.currentUrl !== reportNameObj.productPriceDeviation">
                                                <div *ngIf="f?.days?.value">
                                                    <h4><u>Days</u></h4>
                                                    <ul>
                                                        <li *ngFor="let day of f?.days?.value?.split(',')">
                                                            {{day | uppercase}}
                                                        </li>
                                                    </ul>
                                                </div>
                                            </ng-container>

                                            <ng-container *ngIf="reporterObj.currentUrl !== reportNameObj.productPriceDeviation && 
                                                reporterObj.currentUrl !== reportNameObj.itemWithNoSalesProduct && 
                                                reporterObj.currentUrl !== reportNameObj.lessthenXdaysStock">
                                                <div class="mt-1" *ngIf="f?.isPromoSale?.value">
                                                    <h4><u>Promotion</u></h4>
                                                    <ul>
                                                        <li>Only Promo Sales</li>
                                                    </ul>
                                                </div>
                                            </ng-container>

                                            <ng-container *ngIf="reporterObj.currentUrl !== reportNameObj.productPriceDeviation && 
                                                reporterObj.currentUrl !== reportNameObj.itemWithNoSalesProduct && 
                                                reporterObj.currentUrl !== reportNameObj.lessthenXdaysStock">
                                                <div class="mt-1" *ngIf="f?.productStartId?.value">
                                                    <h4><u>Product Range</u></h4>
                                                    <ul>
                                                        <li>{{f?.productStartId?.value}} to {{f?.productEndId?.value}}
                                                        </li>
                                                    </ul>
                                                </div>
                                            </ng-container>

                                            <ng-container *ngIf="reporterObj.currentUrl !== reportNameObj.productPriceDeviation && 
                                                reporterObj.currentUrl !== reportNameObj.itemWithNoSalesProduct && 
                                                reporterObj.currentUrl !== reportNameObj.lessthenXdaysStock">
                                                <div class="mt-1" *ngIf="shrinkage">
                                                    <h4><u>Shrinkage</u></h4>
                                                    <ul>
                                                        <li>{{shrinkage}}</li>
                                                    </ul>
                                                </div>
                                            </ng-container>

                                            <!-- <div class="mt-1" *ngIf="summaryOptionType">
                                                <h4>Summary Report Options</h4>
                                                <ul>
                                                    <li>{{summaryOptionType | uppercase}}</li>
                                                </ul>
                                            </div> -->

                                            <ng-container>
                                                <div class="mt-1" *ngIf="f?.summaryRep?.value && 
                                                    ((f?.summaryRep?.value | lowercase) !== 'none')">
                                                    <h4><u>Summary Options</u></h4>
                                                    <ul>
                                                        <li>{{f?.summaryRep?.value}}</li>
                                                    </ul>
                                                </div>
                                            </ng-container>

                                            <ng-container *ngIf="reporterObj.currentUrl !== reportNameObj.productPriceDeviation && 
                                                reporterObj.currentUrl !== reportNameObj.itemWithNoSalesProduct  && reporterObj.currentUrl !== reportNameObj.KPIReport
                                                && reporterObj.currentUrl !== reportNameObj.KPIRanking">
                                                <div class="mt-1" *ngIf="f?.sort?.value">
                                                    <h4><u>Sort Order</u></h4>
                                                    <ul>
                                                        <li>{{f?.sort?.value | uppercase}}</li>
                                                    </ul>
                                                </div>
                                            </ng-container>

                                            <ng-container *ngIf="reporterObj.currentUrl !== reportNameObj.productPriceDeviation && 
                                                reporterObj.currentUrl !== reportNameObj.itemWithNoSalesProduct && 
                                                reporterObj.currentUrl !== reportNameObj.lessthenXdaysStock">
                                                <div class="mt-1" *ngIf="f?.promoCode?.value">
                                                    <h4><u>Promo Code</u></h4>
                                                    <ul>
                                                        <li>Only Items in Promo Code: {{f?.promoCode?.value}}</li>
                                                    </ul>
                                                </div>
                                            </ng-container>

                                            <ng-container
                                                *ngIf="reporterObj.currentUrl !== reportNameObj.productPriceDeviation">
                                                <div class="mt-1" *ngIf="selectedValues.promotions">
                                                    <h4><u>Promotions</u></h4>
                                                    <ul>
                                                        <li *ngFor="let promotion of selectedValues?.promotions">
                                                            {{promotion.fullName}}
                                                        </li>
                                                    </ul>
                                                </div>
                                            </ng-container>

                                            <div class="mt-1 list-li" *ngIf="selectedValues.departments">
                                                <h4><u>Departments</u></h4>
                                                <ul>
                                                    <!-- <li *ngFor="let department of selectedValues?.departments">
                                                        {{department.desc}}
                                                    </li> -->
                                                    <ng-container
                                                        *ngIf="(dropdownObj.departments?.length !== selectedValues?.departments?.length); else allDeptSelected">
                                                        <li *ngFor="let department of selectedValues?.departments">
                                                            <span class="mr-2"></span>
                                                            {{ department.code }} &nbsp;-&nbsp;{{ department.desc }}
                                                        </li>
                                                    </ng-container>
                                                    <ng-template #allDeptSelected>
                                                        <li>All Values Has Been Selected</li>
                                                    </ng-template>

                                                </ul>
                                            </div>

                                            <ng-container
                                                *ngIf="reporterObj.currentUrl !== reportNameObj.productPriceDeviation">
                                                <div class="mt-1" *ngIf="selectedValues.commodities">
                                                    <h4><u>Commodities</u></h4>
                                                    <ul>
                                                        <li *ngFor="let commodity of selectedValues?.commodities">
                                                            {{commodity.desc}}
                                                        </li>
                                                    </ul>
                                                </div>
                                            </ng-container>

                                            <ng-container
                                                *ngIf="reporterObj.currentUrl !== reportNameObj.productPriceDeviation">
                                                <div class="mt-1" *ngIf="selectedValues.categories">
                                                    <h4><u>Categories</u></h4>
                                                    <ul>
                                                        <li *ngFor="let category of selectedValues?.categories">
                                                            {{category.fullName}}
                                                        </li>
                                                    </ul>
                                                </div>
                                            </ng-container>

                                            <ng-container
                                                *ngIf="reporterObj.currentUrl !== reportNameObj.productPriceDeviation">
                                                <div class="mt-1" *ngIf="selectedValues.groups">
                                                    <h4><u>Groups</u></h4>
                                                    <ul>
                                                        <li *ngFor="let group of selectedValues?.groups">
                                                            {{group.fullName}}
                                                        </li>
                                                    </ul>
                                                </div>
                                            </ng-container>

                                            <ng-container
                                                *ngIf="reporterObj.currentUrl !== reportNameObj.productPriceDeviation">
                                                <div class="mt-1" *ngIf="selectedValues.suppliers">
                                                    <h4><u>Suppliers</u></h4>
                                                    <ul>
                                                        <li *ngFor="let supplier of selectedValues?.suppliers">
                                                            {{supplier.desc}}
                                                        </li>
                                                    </ul>
                                                </div>
                                            </ng-container>

                                            <ng-container
                                                *ngIf="reporterObj.currentUrl !== reportNameObj.productPriceDeviation">
                                                <div class="mt-1" *ngIf="selectedValues.manufacturers">
                                                    <h4><u>Manufacturers</u></h4>
                                                    <ul>
                                                        <li *ngFor="let manufacturer of selectedValues?.manufacturers">
                                                            {{manufacturer.desc}} &nbsp;&nbsp; {{manufacturer.code}}
                                                        </li>
                                                    </ul>
                                                </div>
                                            </ng-container>

                                            <ng-container *ngIf="reporterObj.currentUrl !== reportNameObj.KPIRanking">
                                                <div class="mt-1 list-li" *ngIf="selectedValues.stores">
                                                    <h4><u>Outlets</u></h4>
                                                    <ul>
                                                        <ng-container
                                                            *ngIf="(dropdownObj.stores?.length !== selectedValues?.stores?.length); else allStoreSelected">
                                                            <li *ngFor="let store of selectedValues?.stores">
                                                                <span class="mr-2"></span>
                                                                {{ store.code }} &nbsp;-&nbsp;{{ store.desc }}
                                                            </li>
                                                        </ng-container>
                                                        <ng-template #allStoreSelected>
                                                            <li>All Values Has Been Selected</li>
                                                        </ng-template>
                                                        <!-- <li *ngFor="let store of selectedValues.stores">{{store.storeDetail}}
                                                        </li> -->

                                                    </ul>
                                                </div>
                                            </ng-container>


                                            <ng-container *ngIf="reporterObj.currentUrl !== reportNameObj.KPIRanking">
                                                <div class="mt-1 list-li" *ngIf="selectedValues.zones">
                                                    <h4><u>Zones</u></h4>
                                                    <ul>
                                                        <ng-container
                                                            *ngIf="(dropdownObj.zones?.length !== selectedValues?.zones?.length); else allZonesSelected">
                                                            <li class="d-flex"
                                                                *ngFor="let zone of selectedValues?.zones">

                                                                <span class="mr-2"></span>
                                                                {{ zone.code }} &nbsp;-&nbsp;{{ zone.name }}
                                                            </li>
                                                        </ng-container>
                                                        <ng-template #allZonesSelected>
                                                            <li>All Values Has Been Selected</li>
                                                        </ng-template>
                                                    </ul>
                                                </div>
                                            </ng-container>

                                            <ng-container *ngIf="reporterObj.currentUrl !== reportNameObj.productPriceDeviation && 
                                                reporterObj.currentUrl !== reportNameObj.itemWithNoSalesProduct">
                                                <div class="mt-1" *ngIf="selectedValues.tills">
                                                    <h4><u>Till</u></h4>
                                                    <ul>
                                                        <li *ngFor="let till of selectedValues.tills">
                                                            {{till.desc}}
                                                            <!-- &nbsp;&nbsp; -->
                                                            <!-- {{till.code }} -->
                                                        </li>
                                                    </ul>
                                                </div>
                                            </ng-container>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <ng-container *ngIf="false">
                                <div class="col-12">
                                    <div class="form-group mt-2 mb-0">
                                        <textarea name="" id="" class="form-control">
                                            Sales Report data is retrieved from the Transaction Summary records (TRX) by 
                                            default It can also be retrieved from the Journal Records (JNL)
                                            To do this, change your settings under ‘Settings>>REPORTS - Data’.
                                            Your current setting : TRX
                                        </textarea>
                                    </div>
                                </div>
                            </ng-container>

                            <div class="col-12">
                                <div class="btn-wrap text-right mt-10">
                                    <button type="button" class="btn btn-grey mr-2"
                                        [disabled]="reporterObj.currentUrl == reportNameObj.rankingByOutlet || reporterObj.currentUrl == reportNameObj.KPIReport || reporterObj.currentUrl == reportNameObj.KPIRanking ">
                                        <i class="fa fa-info-circle"></i> Hide info
                                    </button>
                                    <button type="button" class="btn btn-grey mr-2"
                                        [disabled]="reporterObj.currentUrl == reportNameObj.rankingByOutlet || reporterObj.currentUrl == reportNameObj.KPIReport || reporterObj.currentUrl == reportNameObj.KPIRanking ">Mail</button>
                                    <button type="button" class="btn btn-grey mr-2" (click)="schedularFilter()"><i
                                            class="fa fa-clock-o"></i>
                                        Schedule</button>
                                    <button type="button" class="btn btn-grey mr-2"><i class="fa fa-save"></i>
                                        Save</button>
                                    <button type="button" class="btn btn-grey mr-2"><i class="fa fa-folder-open"></i>
                                        Load</button>
                                    <!-- <a class="btn btn-grey mr-2" (click)="resetForm()">Clear Selections</a> -->
                                    <button class="btn btn-blue mr-2" (click)="getSalesReport()">Ok</button>
                                    <a class="btn btn-grey" data-dismiss="modal" (click)="isCancelApi()">Cancel</a>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>
<div class="modal fade thm-popup" id="schedularFilter" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true" data-backdrop="static">
    <div class="modal-dialog modal-dialog-centered dialog-w2" role="document">
        <div class="modal-content">
            <div class="modal-body popup-box-width border-popup">
                <div class="popup-box">
                    <form name="searchForm2" id="searchForm2">
                        <div class="title-wrap mb-2">
                            <h4 class="title">Filter Name</h4>
                        </div>
                        <div class="group-from mb-0 mx-2">
                            <div class="form-group">
                                <input id="reportKpi" type="text" class="form-control col-md-10"
                                    placeholder="Report Name" #searchValue />
                            </div>

                        </div>
                        <div class="btn-wrap text-right mt-10">
                            <button class="btn btn-blue mr-2" (click)="schedularReport()">Ok</button>
                            <button class="btn btn-grey" data-dismiss="modal">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade bd-example-modal-lg thm-popup" id="newSch" tabindex="-1" role="dialog"
    aria-labelledby="reportFilterModalLabel" aria-hidden="true" data-backdrop="static">
    <form [formGroup]="reportScheduleForm">
        <div class="modal-dialog modal-dialog-centered modal-lg border-popup" role="document">
            <div class="modal-content">
                <div class="modal-body popup-box-width">
                    <div class="popup-box">
                        <div class="form-row align-items-center">
                            <!-- Added click event to close promotion dropdown forcefully -->
                            <div class="col-12">
                                <div class="title-wrap mb-0">
                                    <h4 class="title">New Schedule </h4>
                                </div>
                            </div>
                            <!-- Nav tabs -->
                            <ul class="nav nav-tabs col-md-12 flag-nav">
                                <li class="nav-item">
                                    <a class="nav-link active" data-toggle="tab" href="#home">Details</a>
                                </li>
                                <!-- <li class="nav-item">
                 <a class="nav-link" data-toggle="tab" href="#menu1">Flags</a>
                 </li> -->
                            </ul>
                            <!-- Tab panes -->
                            <div class="tab-content col-md-12 p-0 flag-content">
                                <div class="tab-pane active" id="home">
                                    <!-- Added click event to close promotion dropdown forcefully -->
                                    <div class="col-lg-12 col-xl-12">
                                        <!-- General Field Filter -->
                                        <div class="form-row align-items-center">
                                            <div class="col-md-6">
                                                <div class="group-from">
                                                    <h5 class="title">Reports</h5>
                                                    <div class="form-row form-group align-items-center">
                                                        <div class="col-12">
                                                            <input type="text" class="form-control"
                                                                formControlName="reportName" readonly />
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="group-from">
                                                    <h5 class="title">Filters</h5>
                                                    <div class="form-row form-group align-items-center">
                                                        <div class="col-12">
                                                            <input type="text" class="form-control"
                                                                formControlName="description" readonly />
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Filter Date Range -->
                                        <div class="form-row align-items-center">
                                            <div class="col-md-6">
                                                <div class="group-from">
                                                    <h5 class="title">
                                                        Filter Date Range
                                                    </h5>
                                                    <div class="form-row form-group align-items-center mb-0">
                                                        <div class="col-12">
                                                            <div class="form-row align-items-center">
                                                                <div class="col-5">
                                                                    <div class="form-group mb-0">
                                                                        <div class="ctm-calendar">
                                                                            <input #startDatesch type="text"
                                                                                class="form-control" bsDatepicker
                                                                                [bsConfig]="{ showWeekNumbers: false }"
                                                                                [maxDate]="maxDate"
                                                                                [ngClass]="{'is-invalid': submitted && f.startDate.errors}"
                                                                                (bsValueChange)="onShDateChange($event, 'startDate');scheduleDateChange($event, startDatesch.value);"
                                                                                [bsValue]="shStartDateBsValue"
                                                                                readonly />
                                                                            <div *ngIf="f_schedule.startDate?.errors"
                                                                                class="invalid-feedback">
                                                                                <div
                                                                                    *ngIf="f_schedule.startDate?.errors.required">
                                                                                    Start date is required
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-2">
                                                                    <div class="form-group mb-0 text-center">
                                                                        <label for class="mb-0">To</label>
                                                                    </div>
                                                                </div>
                                                                <div class="col-5">
                                                                    <div class="form-group mb-0">
                                                                        <div class="ctm-calendar">
                                                                            <input #toDateSch type="text"
                                                                                class="form-control" bsDatepicker
                                                                                [bsConfig]="{ showWeekNumbers: false }"
                                                                                [maxDate]="maxDate"
                                                                                [ngClass]="{'is-invalid': isReportScheduleFormSubmitted && f.endDate.errors }"
                                                                                (bsValueChange)="onShDateChange($event, 'endDate');scheduleDateChange(toDateSch.value,$event);"
                                                                                [bsValue]="shEndDateBsValue" readonly />
                                                                            <div *ngIf="f_schedule.endDate?.errors"
                                                                                class="invalid-feedback">
                                                                                <div
                                                                                    *ngIf="f_schedule.endDate?.errors.required">
                                                                                    End date is required
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-5">
                                                            <div *ngIf="false" class="custom-control custom-checkbox">
                                                                <input formControlName="roleOnCompletion"
                                                                    type="checkbox" class="custom-control-input"
                                                                    id="Sales" />
                                                                <label class="custom-control-label mb-0"
                                                                    for="Sales">Roll of open complition</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="group-from">
                                                    <h5 class="title">
                                                        Intervel
                                                    </h5>
                                                    <div class="form-row form-group align-items-center mb-0">
                                                        <div class="col-12">
                                                            <div class="form-row align-items-center">
                                                                <div class="col-md-4">
                                                                    <div class="form-row align-items-center pt-2">
                                                                        <div class="col-md-4">
                                                                            <label>Every</label>
                                                                        </div>
                                                                        <div class="col-md-8">
                                                                            <input type="number" name="intervalBracket"
                                                                                [ngClass]="{
                                        'is-invalid':
                                        isReportScheduleFormSubmitted && f_schedule.intervalBracket.errors
                                        }" formControlName="intervalBracket" class="form-control">
                                                                            <div *ngIf="isReportScheduleFormSubmitted && f_schedule.intervalBracket.errors"
                                                                                class="invalid-feedback">
                                                                                <div
                                                                                    *ngIf="f_schedule.intervalBracket.errors.required">
                                                                                    required
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-8">
                                                                    <div class="group-from my-0">
                                                                        <div class="d-flex flex-wrap form-group mb-0">
                                                                            <div
                                                                                class="custom-control custom-radio mr-2">
                                                                                <input type="radio" name="interval"
                                                                                    class="custom-control-input"
                                                                                    formControlName="interval"
                                                                                    id="months" value="1"><label
                                                                                    for="months"
                                                                                    class="custom-control-label mb-0"
                                                                                    for="months">
                                                                                    Months </label>
                                                                            </div>
                                                                            <div
                                                                                class="custom-control custom-radio mr-2">
                                                                                <input type="radio" name="interval"
                                                                                    class="custom-control-input"
                                                                                    formControlName="interval"
                                                                                    id="weeks" value="2"><label
                                                                                    class="custom-control-label mb-0"
                                                                                    for="weeks">Weeks </label>
                                                                            </div>
                                                                            <div class="custom-control custom-radio mr-2"
                                                                                [ngClass]="{
                                          'is-invalid':
                                          isReportScheduleFormSubmitted && f_schedule.interval.errors
                                          }"><input type="radio" name="interval" class="custom-control-input"
                                                                                    formControlName="interval" id="days"
                                                                                    value="3"><label
                                                                                    class="custom-control-label mb-0"
                                                                                    for="days"> Days </label>
                                                                            </div>
                                                                            <div *ngIf="isReportScheduleFormSubmitted && f_schedule.interval.errors"
                                                                                class="invalid-feedback">
                                                                                <div
                                                                                    *ngIf="f_schedule.interval.errors.required">
                                                                                    required
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-row form-group align-items-center">
                                            <div class="col-md-6">
                                                <div class="group-from">
                                                    <h5 class="title">Schedule Group</h5>
                                                    <div class="form-row form-group align-items-center">
                                                        <div class="col-10">
                                                            <select formControlName="groupIds" disabled
                                                                class="form-control" placeholder='Schedule Group'>
                                                                <option value="">select</option>
                                                                <option *ngFor="let item of dropdownObj.stores">
                                                                    {{ item.storeDetail }}
                                                                </option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="group-from">
                                                    <h5 class="title">Destination email </h5>
                                                    <div class="form-row form-group align-items-center">
                                                        <div class="col-12">
                                                            <ng-select [clearSearchOnAdd]="true"
                                                                [items]="dropdownObj.users" bindLabel="email"
                                                                bindValue="id" [clearSearchOnAdd]="true"
                                                                [closeOnSelect]="false" [virtualScroll]="false"
                                                                [multiple]="true" placeholder="Destination email"
                                                                formControlName="userIds" (change)="
                                setDropdownSelection(
                                  reporterObj.dropdownField.users,
                                  $event
                                )
                              " (open)="
                              getAndSetFilterData(
                                  reporterObj.dropdownField.users,
                                  reporterObj.dropdownField.userIds,
                                  true
                                )
                              " (remove)="
                                addOrRemoveItem(
                                  $event,
                                  reporterObj.dropdownField.users,
                                  'remove'
                                )
                              " (clear)="
                                addOrRemoveItem(
                                  $event,
                                  reporterObj.dropdownField.users,
                                  'clear_all',
                                  reporterObj.dropdownField.userIds
                                )
                              " (add)="
                                addOrRemoveItem(
                                  $event,
                                  reporterObj.dropdownField.users,
                                  'add'
                                )
                              ">
                                                                <!-- It hold value on the basis of filter -->
                                                                <ng-template ng-option-tmp let-item="item"
                                                                    let-item$="item$" let-index="index">
                                                                    <div class="form-row">
                                                                        <div class="col-12 zone-overflow">
                                                                            <input id="item-{{ index }}" type="checkbox"
                                                                                [checked]="
                                    reporterObj?.remove_index_user?.users[item.id]
                                      ? true
                                      : false
                                  " />&nbsp;
                                                                            <span
                                                                                title="{{ item?.firstName }}, {{ item?.lastName }}, {{ item?.email }}">
                                                                                {{ item.firstName }},
                                                                                {{ item.lastName }}, {{ item.email }}
                                                                            </span>
                                                                        </div>
                                                                    </div>
                                                                </ng-template>

                                                                <!-- Add more tag with count -->
                                                                <ng-template ng-multi-label-tmp let-items="items"
                                                                    let-clear="clear">
                                                                    <div class="ng-value"
                                                                        *ngFor="let item of items | slice: 0:2">
                                                                        <span
                                                                            class="ng-value-label">{{ item.email }}</span>
                                                                        <span class="ng-value-icon right"
                                                                            (click)="clear(item)"
                                                                            aria-hidden="true">×</span>
                                                                    </div>
                                                                    <div class="ng-value" *ngIf="items.length > 2">
                                                                        <span
                                                                            class="ng-value-label">{{ items.length - 2 }}
                                                                            more...</span>
                                                                    </div>
                                                                </ng-template>
                                                            </ng-select>
                                                            <div *ngIf="isReportScheduleFormSubmitted && f_schedule.userIds.errors"
                                                                class="invalid-feedback">
                                                                <div *ngIf="f_schedule.userIds.errors.required">
                                                                    Destination email is required
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <!-- <div class="col-2 <button class="btn blue browse-btn">New..</button></div> -->
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-row form-group align-items-center">
                                            <div class="col-md-6">
                                                <div class="group-from">
                                                    <h5 class="title">Export Format</h5>
                                                    <div class="form-row form-group align-items-center">
                                                        <div class="col-4">
                                                            <div class="custom-control custom-checkbox">
                                                                <input formControlName="excelExport" type="checkbox"
                                                                    class="custom-control-input" id="Excel" />
                                                                <label class="custom-control-label mb-0"
                                                                    for="Excel">Excel</label>
                                                            </div>
                                                        </div>
                                                        <div class="col-4">
                                                            <div class="custom-control custom-checkbox">
                                                                <input formControlName="pdfExport" type="checkbox"
                                                                    class="custom-control-input" id="PDF" />
                                                                <label class="custom-control-label mb-0"
                                                                    for="PDF">PDF</label>
                                                            </div>
                                                        </div>

                                                        <div *ngIf="isReportScheduleFormSubmitted && (f_schedule.pdfExport.errors || f_schedule.excelExport.errors || f_schedule.csvExport.errors)"
                                                            class="invalid-feedback">
                                                            <div *ngIf="f_schedule.exportFormat.errors.required">
                                                                Export Format is required
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="group-from">
                                                    <h5 class="title">Last Run</h5>
                                                    <div class="form-row form-group align-items-center">
                                                        <div class="col-10">
                                                            <input onkeydown="return false" type="text"
                                                                class="form-control" [disabled]="true"
                                                                formControlName="lastRun" placeholder="Never"
                                                                readonly />
                                                            <!-- (bsValueChange)="specDateChange($event, last_run.value)" -->
                                                        </div>
                                                        <!-- <div class="col-2"><button class="btn blue browse-btn" disabled>Reset</button></div> -->
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- 123 -->
                                        <div class="form-row form-group align-items-center">
                                            <div class="group-from col-md-6">
                                                <h5 class="title">
                                                    Inception
                                                </h5>
                                                <div class="form-row form-group align-items-center mb-0">
                                                    <div class="col-12">
                                                        <div class="row align-items-center">
                                                            <div class="col-5  mt-27">
                                                                <div class="form-group mb-0">
                                                                    <div class="ctm-calendar">
                                                                        <!-- [maxDate]="maxDate" -->
                                                                        <input #inceptionDate type="text"
                                                                            class="form-control"
                                                                            formControlName="inceptionDate" bsDatepicker
                                                                            [minDate]="maxDate"
                                                                            [bsConfig]="{ showWeekNumbers: false ,adaptivePosition: true }"
                                                                            [ngClass]="{'is-invalid': isReportScheduleFormSubmitted && f_schedule.startDate.errors}"
                                                                            readonly />
                                                                        <!-- (bsValueChange)=" specDateChange($event, inceptionDate.value) " -->
                                                                        <div *ngIf="f_schedule.startDate.errors"
                                                                            class="invalid-feedback">
                                                                            <div
                                                                                *ngIf="f_schedule.startDate.errors.required">
                                                                                Inception is required
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-7">
                                                                <div class="form-group mb-0">
                                                                    <div class="ctm-timepicker">
                                                                        <timepicker class="form-timepicker"
                                                                            formControlName="inceptionTime"
                                                                            #dateTimeSch>
                                                                        </timepicker>
                                                                        <div *ngIf="f_schedule.endDate.errors"
                                                                            class="invalid-feedback">
                                                                            <div
                                                                                *ngIf="f_schedule.endDate.errors.required">
                                                                                End date is required
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6 text-right  mt-5">
                                                <div class="custom-control custom-checkbox sd-checkbox-active">
                                                    <input formControlName="isFlags" class="custom-control-input"
                                                        type="checkbox" id="isFlags" checked>
                                                    <label for="isFlags" class="custom-control-label mb-0">
                                                        <h6 class="mb-0">Active</h6>
                                                    </label>
                                                </div>
                                                <!-- <button class="btn btn-blue">Flags</button> -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane" id="menu1">1234</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 p-0">
                        <div class="btn-wrap text-right mt-10">
                            <button class="btn btn-blue mr-2" (click)="scheduleData()">
                                Ok
                            </button>
                            <a class="btn btn-grey" (click)="resetScheduleform()" data-dismiss="modal">Cancel</a>
                        </div>
                    </div>
                </div>
            </div>
            <!-- </div> -->
        </div>
        <!-- </div> -->
    </form>
</div>